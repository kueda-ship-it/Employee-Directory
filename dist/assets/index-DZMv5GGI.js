(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var _g={exports:{}},Rc={};var Ib;function WC(){if(Ib)return Rc;Ib=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:a,type:i,key:u,ref:o!==void 0?o:null,props:c}}return Rc.Fragment=e,Rc.jsx=n,Rc.jsxs=n,Rc}var Nb;function ZC(){return Nb||(Nb=1,_g.exports=WC()),_g.exports}var Q=ZC(),wg={exports:{}},ot={};var Db;function eE(){if(Db)return ot;Db=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),O=Symbol.iterator;function R(x){return x===null||typeof x!="object"?null:(x=O&&x[O]||x["@@iterator"],typeof x=="function"?x:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,J={};function ge(x,X,ne){this.props=x,this.context=X,this.refs=J,this.updater=ne||B}ge.prototype.isReactComponent={},ge.prototype.setState=function(x,X){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,X,"setState")},ge.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function me(){}me.prototype=ge.prototype;function ce(x,X,ne){this.props=x,this.context=X,this.refs=J,this.updater=ne||B}var ke=ce.prototype=new me;ke.constructor=ce,V(ke,ge.prototype),ke.isPureReactComponent=!0;var Ze=Array.isArray;function xe(){}var pe={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function K(x,X,ne){var ye=ne.ref;return{$$typeof:a,type:x,key:X,ref:ye!==void 0?ye:null,props:ne}}function fe(x,X){return K(x.type,X,x.props)}function Oe(x){return typeof x=="object"&&x!==null&&x.$$typeof===a}function ae(x){var X={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ne){return X[ne]})}var Ce=/\/+/g;function Ye(x,X){return typeof x=="object"&&x!==null&&x.key!=null?ae(""+x.key):X.toString(36)}function Je(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(xe,xe):(x.status="pending",x.then(function(X){x.status==="pending"&&(x.status="fulfilled",x.value=X)},function(X){x.status==="pending"&&(x.status="rejected",x.reason=X)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function $(x,X,ne,ye,Ue){var Ke=typeof x;(Ke==="undefined"||Ke==="boolean")&&(x=null);var je=!1;if(x===null)je=!0;else switch(Ke){case"bigint":case"string":case"number":je=!0;break;case"object":switch(x.$$typeof){case a:case e:je=!0;break;case S:return je=x._init,$(je(x._payload),X,ne,ye,Ue)}}if(je)return Ue=Ue(x),je=ye===""?"."+Ye(x,0):ye,Ze(Ue)?(ne="",je!=null&&(ne=je.replace(Ce,"$&/")+"/"),$(Ue,X,ne,"",function(Ee){return Ee})):Ue!=null&&(Oe(Ue)&&(Ue=fe(Ue,ne+(Ue.key==null||x&&x.key===Ue.key?"":(""+Ue.key).replace(Ce,"$&/")+"/")+je)),X.push(Ue)),1;je=0;var Ve=ye===""?".":ye+":";if(Ze(x))for(var Fe=0;Fe<x.length;Fe++)ye=x[Fe],Ke=Ve+Ye(ye,Fe),je+=$(ye,X,ne,Ke,Ue);else if(Fe=R(x),typeof Fe=="function")for(x=Fe.call(x),Fe=0;!(ye=x.next()).done;)ye=ye.value,Ke=Ve+Ye(ye,Fe++),je+=$(ye,X,ne,Ke,Ue);else if(Ke==="object"){if(typeof x.then=="function")return $(Je(x),X,ne,ye,Ue);throw X=String(x),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return je}function se(x,X,ne){if(x==null)return x;var ye=[],Ue=0;return $(x,ye,"","",function(Ke){return X.call(ne,Ke,Ue++)}),ye}function ie(x){if(x._status===-1){var X=x._result;X=X(),X.then(function(ne){(x._status===0||x._status===-1)&&(x._status=1,x._result=ne)},function(ne){(x._status===0||x._status===-1)&&(x._status=2,x._result=ne)}),x._status===-1&&(x._status=0,x._result=X)}if(x._status===1)return x._result.default;throw x._result}var we=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},Le={map:se,forEach:function(x,X,ne){se(x,function(){X.apply(this,arguments)},ne)},count:function(x){var X=0;return se(x,function(){X++}),X},toArray:function(x){return se(x,function(X){return X})||[]},only:function(x){if(!Oe(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return ot.Activity=E,ot.Children=Le,ot.Component=ge,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=ce,ot.StrictMode=i,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,ot.__COMPILER_RUNTIME={__proto__:null,c:function(x){return pe.H.useMemoCache(x)}},ot.cache=function(x){return function(){return x.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(x,X,ne){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ye=V({},x.props),Ue=x.key;if(X!=null)for(Ke in X.key!==void 0&&(Ue=""+X.key),X)!I.call(X,Ke)||Ke==="key"||Ke==="__self"||Ke==="__source"||Ke==="ref"&&X.ref===void 0||(ye[Ke]=X[Ke]);var Ke=arguments.length-2;if(Ke===1)ye.children=ne;else if(1<Ke){for(var je=Array(Ke),Ve=0;Ve<Ke;Ve++)je[Ve]=arguments[Ve+2];ye.children=je}return K(x.type,Ue,ye)},ot.createContext=function(x){return x={$$typeof:u,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},ot.createElement=function(x,X,ne){var ye,Ue={},Ke=null;if(X!=null)for(ye in X.key!==void 0&&(Ke=""+X.key),X)I.call(X,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Ue[ye]=X[ye]);var je=arguments.length-2;if(je===1)Ue.children=ne;else if(1<je){for(var Ve=Array(je),Fe=0;Fe<je;Fe++)Ve[Fe]=arguments[Fe+2];Ue.children=Ve}if(x&&x.defaultProps)for(ye in je=x.defaultProps,je)Ue[ye]===void 0&&(Ue[ye]=je[ye]);return K(x,Ke,Ue)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(x){return{$$typeof:f,render:x}},ot.isValidElement=Oe,ot.lazy=function(x){return{$$typeof:S,_payload:{_status:-1,_result:x},_init:ie}},ot.memo=function(x,X){return{$$typeof:y,type:x,compare:X===void 0?null:X}},ot.startTransition=function(x){var X=pe.T,ne={};pe.T=ne;try{var ye=x(),Ue=pe.S;Ue!==null&&Ue(ne,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(xe,we)}catch(Ke){we(Ke)}finally{X!==null&&ne.types!==null&&(X.types=ne.types),pe.T=X}},ot.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},ot.use=function(x){return pe.H.use(x)},ot.useActionState=function(x,X,ne){return pe.H.useActionState(x,X,ne)},ot.useCallback=function(x,X){return pe.H.useCallback(x,X)},ot.useContext=function(x){return pe.H.useContext(x)},ot.useDebugValue=function(){},ot.useDeferredValue=function(x,X){return pe.H.useDeferredValue(x,X)},ot.useEffect=function(x,X){return pe.H.useEffect(x,X)},ot.useEffectEvent=function(x){return pe.H.useEffectEvent(x)},ot.useId=function(){return pe.H.useId()},ot.useImperativeHandle=function(x,X,ne){return pe.H.useImperativeHandle(x,X,ne)},ot.useInsertionEffect=function(x,X){return pe.H.useInsertionEffect(x,X)},ot.useLayoutEffect=function(x,X){return pe.H.useLayoutEffect(x,X)},ot.useMemo=function(x,X){return pe.H.useMemo(x,X)},ot.useOptimistic=function(x,X){return pe.H.useOptimistic(x,X)},ot.useReducer=function(x,X,ne){return pe.H.useReducer(x,X,ne)},ot.useRef=function(x){return pe.H.useRef(x)},ot.useState=function(x){return pe.H.useState(x)},ot.useSyncExternalStore=function(x,X,ne){return pe.H.useSyncExternalStore(x,X,ne)},ot.useTransition=function(){return pe.H.useTransition()},ot.version="19.2.4",ot}var Ub;function Sp(){return Ub||(Ub=1,wg.exports=eE()),wg.exports}var mt=Sp();const tE=wp(mt);var Sg={exports:{}},xc={},Cg={exports:{}},Eg={};var Mb;function nE(){return Mb||(Mb=1,(function(a){function e($,se){var ie=$.length;$.push(se);e:for(;0<ie;){var we=ie-1>>>1,Le=$[we];if(0<o(Le,se))$[we]=se,$[ie]=Le,ie=we;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var se=$[0],ie=$.pop();if(ie!==se){$[0]=ie;e:for(var we=0,Le=$.length,x=Le>>>1;we<x;){var X=2*(we+1)-1,ne=$[X],ye=X+1,Ue=$[ye];if(0>o(ne,ie))ye<Le&&0>o(Ue,ne)?($[we]=Ue,$[ye]=ie,we=ye):($[we]=ne,$[X]=ie,we=X);else if(ye<Le&&0>o(Ue,ie))$[we]=Ue,$[ye]=ie,we=ye;else break e}}return se}function o($,se){var ie=$.sortIndex-se.sortIndex;return ie!==0?ie:$.id-se.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();a.unstable_now=function(){return u.now()-f}}var m=[],y=[],S=1,E=null,O=3,R=!1,B=!1,V=!1,J=!1,ge=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ke($){for(var se=n(y);se!==null;){if(se.callback===null)i(y);else if(se.startTime<=$)i(y),se.sortIndex=se.expirationTime,e(m,se);else break;se=n(y)}}function Ze($){if(V=!1,ke($),!B)if(n(m)!==null)B=!0,xe||(xe=!0,ae());else{var se=n(y);se!==null&&Je(Ze,se.startTime-$)}}var xe=!1,pe=-1,I=5,K=-1;function fe(){return J?!0:!(a.unstable_now()-K<I)}function Oe(){if(J=!1,xe){var $=a.unstable_now();K=$;var se=!0;try{e:{B=!1,V&&(V=!1,me(pe),pe=-1),R=!0;var ie=O;try{t:{for(ke($),E=n(m);E!==null&&!(E.expirationTime>$&&fe());){var we=E.callback;if(typeof we=="function"){E.callback=null,O=E.priorityLevel;var Le=we(E.expirationTime<=$);if($=a.unstable_now(),typeof Le=="function"){E.callback=Le,ke($),se=!0;break t}E===n(m)&&i(m),ke($)}else i(m);E=n(m)}if(E!==null)se=!0;else{var x=n(y);x!==null&&Je(Ze,x.startTime-$),se=!1}}break e}finally{E=null,O=ie,R=!1}se=void 0}}finally{se?ae():xe=!1}}}var ae;if(typeof ce=="function")ae=function(){ce(Oe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ye=Ce.port2;Ce.port1.onmessage=Oe,ae=function(){Ye.postMessage(null)}}else ae=function(){ge(Oe,0)};function Je($,se){pe=ge(function(){$(a.unstable_now())},se)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function($){$.callback=null},a.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},a.unstable_getCurrentPriorityLevel=function(){return O},a.unstable_next=function($){switch(O){case 1:case 2:case 3:var se=3;break;default:se=O}var ie=O;O=se;try{return $()}finally{O=ie}},a.unstable_requestPaint=function(){J=!0},a.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=O;O=$;try{return se()}finally{O=ie}},a.unstable_scheduleCallback=function($,se,ie){var we=a.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,$){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ie+Le,$={id:S++,callback:se,priorityLevel:$,startTime:ie,expirationTime:Le,sortIndex:-1},ie>we?($.sortIndex=ie,e(y,$),n(m)===null&&$===n(y)&&(V?(me(pe),pe=-1):V=!0,Je(Ze,ie-we))):($.sortIndex=Le,e(m,$),B||R||(B=!0,xe||(xe=!0,ae()))),$},a.unstable_shouldYield=fe,a.unstable_wrapCallback=function($){var se=O;return function(){var ie=O;O=se;try{return $.apply(this,arguments)}finally{O=ie}}}})(Eg)),Eg}var Pb;function rE(){return Pb||(Pb=1,Cg.exports=nE()),Cg.exports}var Tg={exports:{}},Xn={};var jb;function iE(){if(jb)return Xn;jb=1;var a=Sp();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(m,y,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:y,implementation:S}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xn.createPortal=function(m,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(m,y,null,S)},Xn.flushSync=function(m){var y=u.T,S=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=y,i.p=S,i.d.f()}},Xn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},Xn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Xn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var S=y.as,E=f(S,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:O,fetchPriority:R}):S==="script"&&i.d.X(m,{crossOrigin:E,integrity:O,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Xn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=f(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},Xn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,E=f(S,y.crossOrigin);i.d.L(m,S,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Xn.preloadModule=function(m,y){if(typeof m=="string")if(y){var S=f(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},Xn.requestFormReset=function(m){i.d.r(m)},Xn.unstable_batchedUpdates=function(m,y){return m(y)},Xn.useFormState=function(m,y,S){return u.H.useFormState(m,y,S)},Xn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Xn.version="19.2.4",Xn}var Lb;function E0(){if(Lb)return Tg.exports;Lb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Tg.exports=iE(),Tg.exports}var zb;function aE(){if(zb)return xc;zb=1;var a=rE(),e=Sp(),n=E0();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function f(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var s=t,l=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return m(d),t;if(g===l)return m(d),r;g=g.sibling}throw Error(i(188))}if(s.return!==l.return)s=d,l=g;else{for(var _=!1,T=d.child;T;){if(T===s){_=!0,s=d,l=g;break}if(T===l){_=!0,l=d,s=g;break}T=T.sibling}if(!_){for(T=g.child;T;){if(T===s){_=!0,s=g,l=d;break}if(T===l){_=!0,l=g,s=d;break}T=T.sibling}if(!_)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:r}function S(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=S(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,O=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),me=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Ze=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=Oe&&t[Oe]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Symbol.for("react.client.reference");function Ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case ge:return"Profiler";case J:return"StrictMode";case Ze:return"Suspense";case xe:return"SuspenseList";case K:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case ce:return t.displayName||"Context";case me:return(t._context.displayName||"Context")+".Consumer";case ke:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pe:return r=t.displayName||null,r!==null?r:Ye(t.type)||"Memo";case I:r=t._payload,t=t._init;try{return Ye(t(r))}catch{}}return null}var Je=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},we=[],Le=-1;function x(t){return{current:t}}function X(t){0>Le||(t.current=we[Le],we[Le]=null,Le--)}function ne(t,r){Le++,we[Le]=t.current,t.current=r}var ye=x(null),Ue=x(null),Ke=x(null),je=x(null);function Ve(t,r){switch(ne(Ke,r),ne(Ue,t),ne(ye,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?eb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=eb(r),t=tb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(ye),ne(ye,t)}function Fe(){X(ye),X(Ue),X(Ke)}function Ee(t){t.memoizedState!==null&&ne(je,t);var r=ye.current,s=tb(r,t.type);r!==s&&(ne(Ue,t),ne(ye,s))}function rt(t){Ue.current===t&&(X(ye),X(Ue)),je.current===t&&(X(je),Tc._currentValue=ie)}var qe,qt;function Tt(t){if(qe===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);qe=r&&r[1]||"",qt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+t+qt}var ht=!1;function lt(t,r){if(!t||ht)return"";ht=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var te=re}Reflect.construct(t,[],de)}else{try{de.call()}catch(re){te=re}t.call(de.prototype)}}else{try{throw Error()}catch(re){te=re}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),_=g[0],T=g[1];if(_&&T){var N=_.split(`
`),Z=T.split(`
`);for(d=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;if(l===N.length||d===Z.length)for(l=N.length-1,d=Z.length-1;1<=l&&0<=d&&N[l]!==Z[d];)d--;for(;1<=l&&0<=d;l--,d--)if(N[l]!==Z[d]){if(l!==1||d!==1)do if(l--,d--,0>d||N[l]!==Z[d]){var le=`
`+N[l].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=l&&0<=d);break}}}finally{ht=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Tt(s):""}function gn(t,r){switch(t.tag){case 26:case 27:case 5:return Tt(t.type);case 16:return Tt("Lazy");case 13:return t.child!==r&&r!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return lt(t.type,!1);case 11:return lt(t.type.render,!1);case 1:return lt(t.type,!0);case 31:return Tt("Activity");default:return""}}function wt(t){try{var r="",s=null;do r+=gn(t,s),s=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Dt=Object.prototype.hasOwnProperty,Gt=a.unstable_scheduleCallback,ln=a.unstable_cancelCallback,er=a.unstable_shouldYield,vr=a.unstable_requestPaint,At=a.unstable_now,Rn=a.unstable_getCurrentPriorityLevel,St=a.unstable_ImmediatePriority,Xt=a.unstable_UserBlockingPriority,xn=a.unstable_NormalPriority,Qr=a.unstable_LowPriority,xi=a.unstable_IdlePriority,br=a.log,pn=a.unstable_setDisableYieldValue,$n=null,mn=null;function Pn(t){if(typeof br=="function"&&pn(t),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode($n,t)}catch{}}var De=Math.clz32?Math.clz32:io,os=Math.log,Ii=Math.LN2;function io(t){return t>>>=0,t===0?32:31-(os(t)/Ii|0)|0}var Re=256,da=262144,ls=4194304;function Jr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cs(t,r,s){var l=t.pendingLanes;if(l===0)return 0;var d=0,g=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~g,l!==0?d=Jr(l):(_&=T,_!==0?d=Jr(_):s||(s=T&~t,s!==0&&(d=Jr(s))))):(T=l&~g,T!==0?d=Jr(T):_!==0?d=Jr(_):s||(s=l&~t,s!==0&&(d=Jr(s)))),d===0?0:r!==0&&r!==d&&(r&g)===0&&(g=d&-d,s=r&-r,g>=s||g===32&&(s&4194048)!==0)?r:d}function Ni(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ad(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function su(){var t=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),t}function fi(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Dr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rl(t,r,s,l,d,g){var _=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,Z=t.hiddenUpdates;for(s=_&~s;0<s;){var le=31-De(s),de=1<<le;T[le]=0,N[le]=-1;var te=Z[le];if(te!==null)for(Z[le]=null,le=0;le<te.length;le++){var re=te[le];re!==null&&(re.lane&=-536870913)}s&=~de}l!==0&&us(t,l,0),g!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=g&~(_&~r))}function us(t,r,s){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-De(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Ft(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var l=31-De(s),d=1<<l;d&r|t[l]&r&&(t[l]|=r),s&=~d}}function cn(t,r){var s=r&-r;return s=(s&42)!==0?1:xl(s),(s&(t.suspendedLanes|r))!==0?0:s}function xl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hs(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Eb(t.type))}function ds(t,r){var s=se.p;try{return se.p=t,r()}finally{se.p=s}}var gi=Math.random().toString(36).slice(2),Yt="__reactFiber$"+gi,un="__reactProps$"+gi,tr="__reactContainer$"+gi,ga="__reactEvents$"+gi,kd="__reactListeners$"+gi,pi="__reactHandles$"+gi,Il="__reactResources$"+gi,_r="__reactMarker$"+gi;function ao(t){delete t[Yt],delete t[un],delete t[ga],delete t[kd],delete t[pi]}function mi(t){var r=t[Yt];if(r)return r;for(var s=t.parentNode;s;){if(r=s[tr]||s[Yt]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=lb(t);t!==null;){if(s=t[Yt])return s;t=lb(t)}return r}t=s,s=t.parentNode}return null}function Lt(t){if(t=t[Yt]||t[tr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function wr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Vn(t){var r=t[Il];return r||(r=t[Il]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function hn(t){t[_r]=!0}var Di=new Set,fs={};function Xr(t,r){yi(t,r),yi(t+"Capture",r)}function yi(t,r){for(fs[t]=r,t=0;t<r.length;t++)Di.add(r[t])}var Ui=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nl={},gs={};function ou(t){return Dt.call(gs,t)?!0:Dt.call(Nl,t)?!1:Ui.test(t)?gs[t]=!0:(Nl[t]=!0,!1)}function dt(t,r,s){if(ou(r))if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+s)}}function ps(t,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+s)}}function Ur(t,r,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(r,s,""+l)}}function jn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pa(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lu(t,r,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,g=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){s=""+_,g.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function so(t){if(!t._valueTracker){var r=pa(t)?"checked":"value";t._valueTracker=lu(t,r,""+t[r])}}function Dl(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),l="";return t&&(l=pa(t)?t.checked?"true":"false":t.value),t=l,t!==s?(r.setValue(t),!0):!1}function xt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ms=/[\n"\\]/g;function In(t){return t.replace(ms,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vi(t,r,s,l,d,g,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+jn(r)):t.value!==""+jn(r)&&(t.value=""+jn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?ys(t,_,jn(r)):s!=null?ys(t,_,jn(s)):l!=null&&t.removeAttribute("value"),d==null&&g!=null&&(t.defaultChecked=!!g),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+jn(T):t.removeAttribute("name")}function oo(t,r,s,l,d,g,_,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),r!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){so(t);return}s=s!=null?""+jn(s):"",r=r!=null?""+jn(r):s,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),so(t)}function ys(t,r,s){r==="number"&&xt(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Wr(t,r,s,l){if(t=t.options,r){r={};for(var d=0;d<s.length;d++)r["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=r.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&l&&(t[s].defaultSelected=!0)}else{for(s=""+jn(s),r=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Ul(t,r,s){if(r!=null&&(r=""+jn(r),r!==t.value&&(t.value=r),s==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=s!=null?""+jn(s):""}function vs(t,r,s,l){if(r==null){if(l!=null){if(s!=null)throw Error(i(92));if(Je(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),r=s}s=jn(r),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),so(t)}function Mi(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var Od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(t,r,s){var l=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,s):typeof s!="number"||s===0||Od.has(r)?r==="float"?t.cssFloat=s:t[r]=(""+s).trim():t[r]=s+"px"}function Ml(t,r,s){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&s[d]!==l&&Ct(t,d,l)}else for(var g in r)r.hasOwnProperty(g)&&Ct(t,g,r[g])}function Pl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zr(t){return nr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function or(){}var Mr=null;function lo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,Wt=null;function Sr(t){var r=Lt(t);if(r&&(t=r.stateNode)){var s=t[un]||null;e:switch(t=r.stateNode,r.type){case"input":if(vi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+In(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var l=s[r];if(l!==t&&l.form===t.form){var d=l[un]||null;if(!d)throw Error(i(90));vi(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<s.length;r++)l=s[r],l.form===t.form&&Dl(l)}break e;case"textarea":Ul(t,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&Wr(t,!!s.multiple,r,!1)}}}var ji=!1;function ma(t,r,s){if(ji)return t(r,s);ji=!0;try{var l=t(r);return l}finally{if(ji=!1,(Pi!==null||Wt!==null)&&(Xu(),Pi&&(r=Pi,t=Wt,Wt=Pi=null,Sr(r),t)))for(r=0;r<t.length;r++)Sr(t[r])}}function Li(t,r){var s=t.stateNode;if(s===null)return null;var l=s[un]||null;if(l===null)return null;s=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,r,typeof s));return s}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=!1;if(Nn)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){jl=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{jl=!1}var Pr=null,co=null,ya=null;function va(){if(ya)return ya;var t,r=co,s=r.length,l,d="value"in Pr?Pr.value:Pr.textContent,g=d.length;for(t=0;t<s&&r[t]===d[t];t++);var _=s-t;for(l=1;l<=_&&r[s-l]===d[g-l];l++);return ya=d.slice(t,1<l?1-l:void 0)}function ba(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function bs(){return!0}function cu(){return!1}function yn(t){function r(s,l,d,g,_){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?bs:cu,this.isPropagationStopped=cu,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),r}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=yn(zi),bi=E({},zi,{view:0,detail:0}),ho=yn(bi),_s,Ll,ws,fo=E({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(_s=t.screenX-ws.screenX,Ll=t.screenY-ws.screenY):Ll=_s=0,ws=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:Ll}}),go=yn(fo),zl=E({},fo,{dataTransfer:0}),uu=yn(zl),po=E({},bi,{relatedTarget:0}),_a=yn(po),mo=E({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=yn(mo),xd=E({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wa=yn(xd),Hl=E({},zi,{data:0}),yo=yn(Hl),Bl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ss(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Dn[t])?!!r[t]:!1}function Hi(){return Ss}var du=E({},bi,{key:function(t){if(t.key){var r=Bl[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hi,charCode:function(t){return t.type==="keypress"?ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vo=yn(du),fu=E({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ql=yn(fu),bo=E({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hi}),Gl=yn(bo),Bi=E({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fl=yn(Bi),$l=E({},fo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_o=yn($l),Vl=E({},zi,{newState:0,oldState:0}),gu=yn(Vl),Id=[9,13,27,32],Cs=Nn&&"CompositionEvent"in window,_i=null;Nn&&"documentMode"in document&&(_i=document.documentMode);var Nd=Nn&&"TextEvent"in window&&!_i,wo=Nn&&(!Cs||_i&&8<_i&&11>=_i),So=" ",pu=!1;function Yl(t,r){switch(t){case"keyup":return Id.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function yu(t,r){switch(t){case"compositionend":return mu(r);case"keypress":return r.which!==32?null:(pu=!0,So);case"textInput":return t=r.data,t===So&&pu?null:t;default:return null}}function Dd(t,r){if(Ki)return t==="compositionend"||!Cs&&Yl(t,r)?(t=va(),ya=co=Pr=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wo&&r.locale!=="ko"?null:r.data;default:return null}}var vu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Co(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!vu[t.type]:r==="textarea"}function Ql(t,r,s,l){Pi?Wt?Wt.push(l):Wt=[l]:Pi=l,r=ih(r,"onChange"),0<r.length&&(s=new uo("onChange","change",null,s,l),t.push({event:s,listeners:r}))}var Sa=null,Es=null;function Ud(t){Yv(t,0)}function Eo(t){var r=wr(t);if(Dl(r))return t}function Ts(t,r){if(t==="change")return r}var jr=!1;if(Nn){var Zt;if(Nn){var Ca="oninput"in document;if(!Ca){var qi=document.createElement("div");qi.setAttribute("oninput","return;"),Ca=typeof qi.oninput=="function"}Zt=Ca}else Zt=!1;jr=Zt&&(!document.documentMode||9<document.documentMode)}function bu(){Sa&&(Sa.detachEvent("onpropertychange",To),Es=Sa=null)}function To(t){if(t.propertyName==="value"&&Eo(Es)){var r=[];Ql(r,Es,t,lo(t)),ma(Ud,r)}}function _u(t,r,s){t==="focusin"?(bu(),Sa=r,Es=s,Sa.attachEvent("onpropertychange",To)):t==="focusout"&&bu()}function Gi(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eo(Es)}function Jl(t,r){if(t==="click")return Eo(r)}function Ea(t,r){if(t==="input"||t==="change")return Eo(r)}function wi(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Qn=typeof Object.is=="function"?Object.is:wi;function h(t,r){if(Qn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),l=Object.keys(r);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!Dt.call(r,d)||!Qn(t[d],r[d]))return!1}return!0}function p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v(t,r){var s=p(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=r&&l>=r)return{node:s,offset:r-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=p(s)}}function b(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?b(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function w(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=xt(t.document);r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=xt(t.document)}return r}function C(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var A=Nn&&"documentMode"in document&&11>=document.documentMode,k=null,U=null,G=null,M=!1;function D(t,r,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;M||k==null||k!==xt(l)||(l=k,"selectionStart"in l&&C(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),G&&h(G,l)||(G=l,l=ih(U,"onSelect"),0<l.length&&(r=new uo("onSelect","select",null,r,s),t.push({event:r,listeners:l}),r.target=k)))}function L(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var H={animationend:L("Animation","AnimationEnd"),animationiteration:L("Animation","AnimationIteration"),animationstart:L("Animation","AnimationStart"),transitionrun:L("Transition","TransitionRun"),transitionstart:L("Transition","TransitionStart"),transitioncancel:L("Transition","TransitionCancel"),transitionend:L("Transition","TransitionEnd")},P={},j={};Nn&&(j=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);function Y(t){if(P[t])return P[t];if(!H[t])return t;var r=H[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in j)return P[t]=r[s];return t}var ee=Y("animationend"),F=Y("animationiteration"),oe=Y("animationstart"),ve=Y("transitionrun"),Te=Y("transitionstart"),Ae=Y("transitioncancel"),be=Y("transitionend"),Me=new Map,Ie="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ie.push("scrollEnd");function _e(t,r){Me.set(t,r),Xr(r,[t])}var Pe=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},at=[],ft=0,Qe=0;function st(){for(var t=ft,r=Qe=ft=0;r<t;){var s=at[r];at[r++]=null;var l=at[r];at[r++]=null;var d=at[r];at[r++]=null;var g=at[r];if(at[r++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}g!==0&&Si(s,d,g)}}function zt(t,r,s,l){at[ft++]=t,at[ft++]=r,at[ft++]=s,at[ft++]=l,Qe|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Jn(t,r,s,l){return zt(t,r,s,l),Ta(t)}function Ut(t,r){return zt(t,null,null,r),Ta(t)}function Si(t,r,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var d=!1,g=t.return;g!==null;)g.childLanes|=s,l=g.alternate,l!==null&&(l.childLanes|=s),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(d=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,d&&r!==null&&(d=31-De(s),t=g.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=s|536870912),g):null}function Ta(t){if(50<vc)throw vc=0,Gf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ao={};function US(t,r,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,r,s,l){return new US(t,r,s,l)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,r){var s=t.alternate;return s===null?(s=Cr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function xm(t,r){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,r=s.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function wu(t,r,s,l,d,g){var _=0;if(l=t,typeof t=="function")Md(t)&&(_=1);else if(typeof t=="string")_=zC(t,s,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case K:return t=Cr(31,s,r,d),t.elementType=K,t.lanes=g,t;case V:return As(s.children,d,g,r);case J:_=8,d|=24;break;case ge:return t=Cr(12,s,r,d|2),t.elementType=ge,t.lanes=g,t;case Ze:return t=Cr(13,s,r,d),t.elementType=Ze,t.lanes=g,t;case xe:return t=Cr(19,s,r,d),t.elementType=xe,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:_=10;break e;case me:_=9;break e;case ke:_=11;break e;case pe:_=14;break e;case I:_=16,l=null;break e}_=29,s=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Cr(_,s,r,d),r.elementType=t,r.type=l,r.lanes=g,r}function As(t,r,s,l){return t=Cr(7,t,l,r),t.lanes=s,t}function Pd(t,r,s){return t=Cr(6,t,null,r),t.lanes=s,t}function Im(t){var r=Cr(18,null,null,0);return r.stateNode=t,r}function jd(t,r,s){return r=Cr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Nm=new WeakMap;function Lr(t,r){if(typeof t=="object"&&t!==null){var s=Nm.get(t);return s!==void 0?s:(r={value:t,source:r,stack:wt(r)},Nm.set(t,r),r)}return{value:t,source:r,stack:wt(r)}}var ko=[],Oo=0,Su=null,Xl=0,zr=[],Hr=0,Aa=null,Ci=1,Ei="";function $i(t,r){ko[Oo++]=Xl,ko[Oo++]=Su,Su=t,Xl=r}function Dm(t,r,s){zr[Hr++]=Ci,zr[Hr++]=Ei,zr[Hr++]=Aa,Aa=t;var l=Ci;t=Ei;var d=32-De(l)-1;l&=~(1<<d),s+=1;var g=32-De(r)+d;if(30<g){var _=d-d%5;g=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Ci=1<<32-De(r)+d|s<<d|l,Ei=g+t}else Ci=1<<g|s<<d|l,Ei=t}function Ld(t){t.return!==null&&($i(t,1),Dm(t,1,0))}function zd(t){for(;t===Su;)Su=ko[--Oo],ko[Oo]=null,Xl=ko[--Oo],ko[Oo]=null;for(;t===Aa;)Aa=zr[--Hr],zr[Hr]=null,Ei=zr[--Hr],zr[Hr]=null,Ci=zr[--Hr],zr[Hr]=null}function Um(t,r){zr[Hr++]=Ci,zr[Hr++]=Ei,zr[Hr++]=Aa,Ci=r.id,Ei=r.overflow,Aa=t}var Ln=null,en=null,Et=!1,ka=null,Br=!1,Hd=Error(i(519));function Oa(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(Lr(r,t)),Hd}function Mm(t){var r=t.stateNode,s=t.type,l=t.memoizedProps;switch(r[Yt]=t,r[un]=l,s){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<_c.length;s++)vt(_c[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":vt("invalid",r),oo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":vt("invalid",r);break;case"textarea":vt("invalid",r),vs(r,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||l.suppressHydrationWarning===!0||Wv(r.textContent,s)?(l.popover!=null&&(vt("beforetoggle",r),vt("toggle",r)),l.onScroll!=null&&vt("scroll",r),l.onScrollEnd!=null&&vt("scrollend",r),l.onClick!=null&&(r.onclick=or),r=!0):r=!1,r||Oa(t,!0)}function Pm(t){for(Ln=t.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Ln=Ln.return}}function Ro(t){if(t!==Ln)return!1;if(!Et)return Pm(t),Et=!0,!1;var r=t.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||ag(t.type,t.memoizedProps)),s=!s),s&&en&&Oa(t),Pm(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=ob(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=ob(t)}else r===27?(r=en,Ka(t.type)?(t=ug,ug=null,en=t):en=r):en=Ln?qr(t.stateNode.nextSibling):null;return!0}function ks(){en=Ln=null,Et=!1}function Bd(){var t=ka;return t!==null&&(hr===null?hr=t:hr.push.apply(hr,t),ka=null),t}function Wl(t){ka===null?ka=[t]:ka.push(t)}var Kd=x(null),Os=null,Vi=null;function Ra(t,r,s){ne(Kd,r._currentValue),r._currentValue=s}function Yi(t){t._currentValue=Kd.current,X(Kd)}function qd(t,r,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===s)break;t=t.return}}function Gd(t,r,s,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var g=d.dependencies;if(g!==null){var _=d.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=d;for(var N=0;N<r.length;N++)if(T.context===r[N]){g.lanes|=s,T=g.alternate,T!==null&&(T.lanes|=s),qd(g.return,s,t),l||(_=null);break e}g=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(i(341));_.lanes|=s,g=_.alternate,g!==null&&(g.lanes|=s),qd(_,s,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function xo(t,r,s,l){t=null;for(var d=r,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var T=d.type;Qn(d.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(d===je.current){if(_=d.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Tc):t=[Tc])}d=d.return}t!==null&&Gd(r,t,s,l),r.flags|=262144}function Cu(t){for(t=t.firstContext;t!==null;){if(!Qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Rs(t){Os=t,Vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function zn(t){return jm(Os,t)}function Eu(t,r){return Os===null&&Rs(t),jm(t,r)}function jm(t,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},Vi===null){if(t===null)throw Error(i(308));Vi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Vi=Vi.next=r;return s}var MS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(s){return s()})}},PS=a.unstable_scheduleCallback,jS=a.unstable_NormalPriority,vn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new MS,data:new Map,refCount:0}}function Zl(t){t.refCount--,t.refCount===0&&PS(jS,function(){t.controller.abort()})}var ec=null,$d=0,Io=0,No=null;function LS(t,r){if(ec===null){var s=ec=[];$d=0,Io=Jf(),No={status:"pending",value:void 0,then:function(l){s.push(l)}}}return $d++,r.then(Lm,Lm),r}function Lm(){if(--$d===0&&ec!==null){No!==null&&(No.status="fulfilled");var t=ec;ec=null,Io=0,No=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function zS(t,r){var s=[],l={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<s.length;d++)(0,s[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),l}var zm=$.S;$.S=function(t,r){Sv=At(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&LS(t,r),zm!==null&&zm(t,r)};var xs=x(null);function Vd(){var t=xs.current;return t!==null?t:$t.pooledCache}function Tu(t,r){r===null?ne(xs,xs.current):ne(xs,r.pool)}function Hm(){var t=Vd();return t===null?null:{parent:vn._currentValue,pool:t}}var Do=Error(i(460)),Yd=Error(i(474)),Au=Error(i(542)),ku={then:function(){}};function Bm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Km(t,r,s){switch(s=t[s],s===void 0?t.push(r):s!==r&&(r.then(or,or),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gm(t),t;default:if(typeof r.status=="string")r.then(or,or);else{if(t=$t,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gm(t),t}throw Ns=r,Do}}function Is(t){try{var r=t._init;return r(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ns=s,Do):s}}var Ns=null;function qm(){if(Ns===null)throw Error(i(459));var t=Ns;return Ns=null,t}function Gm(t){if(t===Do||t===Au)throw Error(i(483))}var Uo=null,tc=0;function Ou(t){var r=tc;return tc+=1,Uo===null&&(Uo=[]),Km(Uo,t,r)}function nc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Ru(t,r){throw r.$$typeof===O?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Fm(t){function r(q,z){if(t){var W=q.deletions;W===null?(q.deletions=[z],q.flags|=16):W.push(z)}}function s(q,z){if(!t)return null;for(;z!==null;)r(q,z),z=z.sibling;return null}function l(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function d(q,z){return q=Fi(q,z),q.index=0,q.sibling=null,q}function g(q,z,W){return q.index=W,t?(W=q.alternate,W!==null?(W=W.index,W<z?(q.flags|=67108866,z):W):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function _(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,z,W,he){return z===null||z.tag!==6?(z=Pd(W,q.mode,he),z.return=q,z):(z=d(z,W),z.return=q,z)}function N(q,z,W,he){var Xe=W.type;return Xe===V?le(q,z,W.props.children,he,W.key):z!==null&&(z.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&Is(Xe)===z.type)?(z=d(z,W.props),nc(z,W),z.return=q,z):(z=wu(W.type,W.key,W.props,null,q.mode,he),nc(z,W),z.return=q,z)}function Z(q,z,W,he){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=jd(W,q.mode,he),z.return=q,z):(z=d(z,W.children||[]),z.return=q,z)}function le(q,z,W,he,Xe){return z===null||z.tag!==7?(z=As(W,q.mode,he,Xe),z.return=q,z):(z=d(z,W),z.return=q,z)}function de(q,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Pd(""+z,q.mode,W),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return W=wu(z.type,z.key,z.props,null,q.mode,W),nc(W,z),W.return=q,W;case B:return z=jd(z,q.mode,W),z.return=q,z;case I:return z=Is(z),de(q,z,W)}if(Je(z)||ae(z))return z=As(z,q.mode,W,null),z.return=q,z;if(typeof z.then=="function")return de(q,Ou(z),W);if(z.$$typeof===ce)return de(q,Eu(q,z),W);Ru(q,z)}return null}function te(q,z,W,he){var Xe=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Xe!==null?null:T(q,z,""+W,he);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case R:return W.key===Xe?N(q,z,W,he):null;case B:return W.key===Xe?Z(q,z,W,he):null;case I:return W=Is(W),te(q,z,W,he)}if(Je(W)||ae(W))return Xe!==null?null:le(q,z,W,he,null);if(typeof W.then=="function")return te(q,z,Ou(W),he);if(W.$$typeof===ce)return te(q,z,Eu(q,W),he);Ru(q,W)}return null}function re(q,z,W,he,Xe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return q=q.get(W)||null,T(z,q,""+he,Xe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case R:return q=q.get(he.key===null?W:he.key)||null,N(z,q,he,Xe);case B:return q=q.get(he.key===null?W:he.key)||null,Z(z,q,he,Xe);case I:return he=Is(he),re(q,z,W,he,Xe)}if(Je(he)||ae(he))return q=q.get(W)||null,le(z,q,he,Xe,null);if(typeof he.then=="function")return re(q,z,W,Ou(he),Xe);if(he.$$typeof===ce)return re(q,z,W,Eu(z,he),Xe);Ru(z,he)}return null}function ze(q,z,W,he){for(var Xe=null,Ot=null,Ge=z,ut=z=0,_t=null;Ge!==null&&ut<W.length;ut++){Ge.index>ut?(_t=Ge,Ge=null):_t=Ge.sibling;var Rt=te(q,Ge,W[ut],he);if(Rt===null){Ge===null&&(Ge=_t);break}t&&Ge&&Rt.alternate===null&&r(q,Ge),z=g(Rt,z,ut),Ot===null?Xe=Rt:Ot.sibling=Rt,Ot=Rt,Ge=_t}if(ut===W.length)return s(q,Ge),Et&&$i(q,ut),Xe;if(Ge===null){for(;ut<W.length;ut++)Ge=de(q,W[ut],he),Ge!==null&&(z=g(Ge,z,ut),Ot===null?Xe=Ge:Ot.sibling=Ge,Ot=Ge);return Et&&$i(q,ut),Xe}for(Ge=l(Ge);ut<W.length;ut++)_t=re(Ge,q,ut,W[ut],he),_t!==null&&(t&&_t.alternate!==null&&Ge.delete(_t.key===null?ut:_t.key),z=g(_t,z,ut),Ot===null?Xe=_t:Ot.sibling=_t,Ot=_t);return t&&Ge.forEach(function(Va){return r(q,Va)}),Et&&$i(q,ut),Xe}function et(q,z,W,he){if(W==null)throw Error(i(151));for(var Xe=null,Ot=null,Ge=z,ut=z=0,_t=null,Rt=W.next();Ge!==null&&!Rt.done;ut++,Rt=W.next()){Ge.index>ut?(_t=Ge,Ge=null):_t=Ge.sibling;var Va=te(q,Ge,Rt.value,he);if(Va===null){Ge===null&&(Ge=_t);break}t&&Ge&&Va.alternate===null&&r(q,Ge),z=g(Va,z,ut),Ot===null?Xe=Va:Ot.sibling=Va,Ot=Va,Ge=_t}if(Rt.done)return s(q,Ge),Et&&$i(q,ut),Xe;if(Ge===null){for(;!Rt.done;ut++,Rt=W.next())Rt=de(q,Rt.value,he),Rt!==null&&(z=g(Rt,z,ut),Ot===null?Xe=Rt:Ot.sibling=Rt,Ot=Rt);return Et&&$i(q,ut),Xe}for(Ge=l(Ge);!Rt.done;ut++,Rt=W.next())Rt=re(Ge,q,ut,Rt.value,he),Rt!==null&&(t&&Rt.alternate!==null&&Ge.delete(Rt.key===null?ut:Rt.key),z=g(Rt,z,ut),Ot===null?Xe=Rt:Ot.sibling=Rt,Ot=Rt);return t&&Ge.forEach(function(JC){return r(q,JC)}),Et&&$i(q,ut),Xe}function Kt(q,z,W,he){if(typeof W=="object"&&W!==null&&W.type===V&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case R:e:{for(var Xe=W.key;z!==null;){if(z.key===Xe){if(Xe=W.type,Xe===V){if(z.tag===7){s(q,z.sibling),he=d(z,W.props.children),he.return=q,q=he;break e}}else if(z.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&Is(Xe)===z.type){s(q,z.sibling),he=d(z,W.props),nc(he,W),he.return=q,q=he;break e}s(q,z);break}else r(q,z);z=z.sibling}W.type===V?(he=As(W.props.children,q.mode,he,W.key),he.return=q,q=he):(he=wu(W.type,W.key,W.props,null,q.mode,he),nc(he,W),he.return=q,q=he)}return _(q);case B:e:{for(Xe=W.key;z!==null;){if(z.key===Xe)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){s(q,z.sibling),he=d(z,W.children||[]),he.return=q,q=he;break e}else{s(q,z);break}else r(q,z);z=z.sibling}he=jd(W,q.mode,he),he.return=q,q=he}return _(q);case I:return W=Is(W),Kt(q,z,W,he)}if(Je(W))return ze(q,z,W,he);if(ae(W)){if(Xe=ae(W),typeof Xe!="function")throw Error(i(150));return W=Xe.call(W),et(q,z,W,he)}if(typeof W.then=="function")return Kt(q,z,Ou(W),he);if(W.$$typeof===ce)return Kt(q,z,Eu(q,W),he);Ru(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(s(q,z.sibling),he=d(z,W),he.return=q,q=he):(s(q,z),he=Pd(W,q.mode,he),he.return=q,q=he),_(q)):s(q,z)}return function(q,z,W,he){try{tc=0;var Xe=Kt(q,z,W,he);return Uo=null,Xe}catch(Ge){if(Ge===Do||Ge===Au)throw Ge;var Ot=Cr(29,Ge,null,q.mode);return Ot.lanes=he,Ot.return=q,Ot}}}var Ds=Fm(!0),$m=Fm(!1),xa=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ia(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Na(t,r,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(It&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Ta(t),Si(t,null,s),r}return zt(t,l,r,s),Ta(t)}function rc(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ft(t,s)}}function Xd(t,r){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?d=g=_:g=g.next=_,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}var Wd=!1;function ic(){if(Wd){var t=No;if(t!==null)throw t}}function ac(t,r,s,l){Wd=!1;var d=t.updateQueue;xa=!1;var g=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var N=T,Z=N.next;N.next=null,_===null?g=Z:_.next=Z,_=N;var le=t.alternate;le!==null&&(le=le.updateQueue,T=le.lastBaseUpdate,T!==_&&(T===null?le.firstBaseUpdate=Z:T.next=Z,le.lastBaseUpdate=N))}if(g!==null){var de=d.baseState;_=0,le=Z=N=null,T=g;do{var te=T.lane&-536870913,re=te!==T.lane;if(re?(bt&te)===te:(l&te)===te){te!==0&&te===Io&&(Wd=!0),le!==null&&(le=le.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ze=t,et=T;te=r;var Kt=s;switch(et.tag){case 1:if(ze=et.payload,typeof ze=="function"){de=ze.call(Kt,de,te);break e}de=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=et.payload,te=typeof ze=="function"?ze.call(Kt,de,te):ze,te==null)break e;de=E({},de,te);break e;case 2:xa=!0}}te=T.callback,te!==null&&(t.flags|=64,re&&(t.flags|=8192),re=d.callbacks,re===null?d.callbacks=[te]:re.push(te))}else re={lane:te,tag:T.tag,payload:T.payload,callback:T.callback,next:null},le===null?(Z=le=re,N=de):le=le.next=re,_|=te;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;re=T,T=re.next,re.next=null,d.lastBaseUpdate=re,d.shared.pending=null}}while(!0);le===null&&(N=de),d.baseState=N,d.firstBaseUpdate=Z,d.lastBaseUpdate=le,g===null&&(d.shared.lanes=0),ja|=_,t.lanes=_,t.memoizedState=de}}function Vm(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Ym(t,r){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Vm(s[t],r)}var Mo=x(null),xu=x(0);function Qm(t,r){t=ra,ne(xu,t),ne(Mo,r),ra=t|r.baseLanes}function Zd(){ne(xu,ra),ne(Mo,Mo.current)}function ef(){ra=xu.current,X(Mo),X(xu)}var Er=x(null),Kr=null;function Da(t){var r=t.alternate;ne(dn,dn.current&1),ne(Er,t),Kr===null&&(r===null||Mo.current!==null||r.memoizedState!==null)&&(Kr=t)}function tf(t){ne(dn,dn.current),ne(Er,t),Kr===null&&(Kr=t)}function Jm(t){t.tag===22?(ne(dn,dn.current),ne(Er,t),Kr===null&&(Kr=t)):Ua()}function Ua(){ne(dn,dn.current),ne(Er,Er.current)}function Tr(t){X(Er),Kr===t&&(Kr=null),X(dn)}var dn=x(0);function Iu(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||lg(s)||cg(s)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qi=0,ct=null,Ht=null,bn=null,Nu=!1,Po=!1,Us=!1,Du=0,sc=0,jo=null,HS=0;function an(){throw Error(i(321))}function nf(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Qn(t[s],r[s]))return!1;return!0}function rf(t,r,s,l,d,g){return Qi=g,ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?Dy:bf,Us=!1,g=s(l,d),Us=!1,Po&&(g=Wm(r,s,l,d)),Xm(t),g}function Xm(t){$.H=cc;var r=Ht!==null&&Ht.next!==null;if(Qi=0,bn=Ht=ct=null,Nu=!1,sc=0,jo=null,r)throw Error(i(300));t===null||_n||(t=t.dependencies,t!==null&&Cu(t)&&(_n=!0))}function Wm(t,r,s,l){ct=t;var d=0;do{if(Po&&(jo=null),sc=0,Po=!1,25<=d)throw Error(i(301));if(d+=1,bn=Ht=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=Uy,g=r(s,l)}while(Po);return g}function BS(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?oc(r):r,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ct.flags|=1024),r}function af(){var t=Du!==0;return Du=0,t}function sf(t,r,s){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~s}function of(t){if(Nu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Nu=!1}Qi=0,bn=Ht=ct=null,Po=!1,sc=Du=0,jo=null}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?ct.memoizedState=bn=t:bn=bn.next=t,bn}function fn(){if(Ht===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var r=bn===null?ct.memoizedState:bn.next;if(r!==null)bn=r,Ht=t;else{if(t===null)throw ct.alternate===null?Error(i(467)):Error(i(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},bn===null?ct.memoizedState=bn=t:bn=bn.next=t}return bn}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oc(t){var r=sc;return sc+=1,jo===null&&(jo=[]),t=Km(jo,t,r),r=ct,(bn===null?r.memoizedState:bn.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?Dy:bf),t}function Mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return oc(t);if(t.$$typeof===ce)return zn(t)}throw Error(i(438,String(t)))}function lf(t){var r=null,s=ct.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var l=ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=Uu(),ct.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(t),l=0;l<t;l++)s[l]=fe;return r.index++,s}function Ji(t,r){return typeof r=="function"?r(t):r}function Pu(t){var r=fn();return cf(r,Ht,t)}function cf(t,r,s){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var d=t.baseQueue,g=l.pending;if(g!==null){if(d!==null){var _=d.next;d.next=g.next,g.next=_}r.baseQueue=d=g,l.pending=null}if(g=t.baseState,d===null)t.memoizedState=g;else{r=d.next;var T=_=null,N=null,Z=r,le=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(bt&de)===de:(Qi&de)===de){var te=Z.revertLane;if(te===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===Io&&(le=!0);else if((Qi&te)===te){Z=Z.next,te===Io&&(le=!0);continue}else de={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},N===null?(T=N=de,_=g):N=N.next=de,ct.lanes|=te,ja|=te;de=Z.action,Us&&s(g,de),g=Z.hasEagerState?Z.eagerState:s(g,de)}else te={lane:de,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},N===null?(T=N=te,_=g):N=N.next=te,ct.lanes|=de,ja|=de;Z=Z.next}while(Z!==null&&Z!==r);if(N===null?_=g:N.next=T,!Qn(g,t.memoizedState)&&(_n=!0,le&&(s=No,s!==null)))throw s;t.memoizedState=g,t.baseState=_,t.baseQueue=N,l.lastRenderedState=g}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function uf(t){var r=fn(),s=r.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var l=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var _=d=d.next;do g=t(g,_.action),_=_.next;while(_!==d);Qn(g,r.memoizedState)||(_n=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,l]}function Zm(t,r,s){var l=ct,d=fn(),g=Et;if(g){if(s===void 0)throw Error(i(407));s=s()}else s=r();var _=!Qn((Ht||d).memoizedState,s);if(_&&(d.memoizedState=s,_n=!0),d=d.queue,ff(ny.bind(null,l,d,t),[t]),d.getSnapshot!==r||_||bn!==null&&bn.memoizedState.tag&1){if(l.flags|=2048,Lo(9,{destroy:void 0},ty.bind(null,l,d,s,r),null),$t===null)throw Error(i(349));g||(Qi&127)!==0||ey(l,r,s)}return s}function ey(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=ct.updateQueue,r===null?(r=Uu(),ct.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function ty(t,r,s,l){r.value=s,r.getSnapshot=l,ry(r)&&iy(t)}function ny(t,r,s){return s(function(){ry(r)&&iy(t)})}function ry(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Qn(t,s)}catch{return!0}}function iy(t){var r=Ut(t,2);r!==null&&dr(r,t,2)}function hf(t){var r=rr();if(typeof t=="function"){var s=t;if(t=s(),Us){Pn(!0);try{s()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:t},r}function ay(t,r,s,l){return t.baseState=s,cf(t,Ht,typeof l=="function"?l:Ji)}function KS(t,r,s,l,d){if(zu(t))throw Error(i(485));if(t=r.action,t!==null){var g={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){g.listeners.push(_)}};$.T!==null?s(!0):g.isTransition=!1,l(g),s=r.pending,s===null?(g.next=r.pending=g,sy(r,g)):(g.next=s.next,r.pending=s.next=g)}}function sy(t,r){var s=r.action,l=r.payload,d=t.state;if(r.isTransition){var g=$.T,_={};$.T=_;try{var T=s(d,l),N=$.S;N!==null&&N(_,T),oy(t,r,T)}catch(Z){df(t,r,Z)}finally{g!==null&&_.types!==null&&(g.types=_.types),$.T=g}}else try{g=s(d,l),oy(t,r,g)}catch(Z){df(t,r,Z)}}function oy(t,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){ly(t,r,l)},function(l){return df(t,r,l)}):ly(t,r,s)}function ly(t,r,s){r.status="fulfilled",r.value=s,cy(r),t.state=s,r=t.pending,r!==null&&(s=r.next,s===r?t.pending=null:(s=s.next,r.next=s,sy(t,s)))}function df(t,r,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=s,cy(r),r=r.next;while(r!==l)}t.action=null}function cy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function uy(t,r){return r}function hy(t,r){if(Et){var s=$t.formState;if(s!==null){e:{var l=ct;if(Et){if(en){t:{for(var d=en,g=Br;d.nodeType!==8;){if(!g){d=null;break t}if(d=qr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){en=qr(d.nextSibling),l=d.data==="F!";break e}}Oa(l)}l=!1}l&&(r=s[0])}}return s=rr(),s.memoizedState=s.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:r},s.queue=l,s=xy.bind(null,ct,l),l.dispatch=s,l=hf(!1),g=vf.bind(null,ct,!1,l.queue),l=rr(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,s=KS.bind(null,ct,d,g,s),d.dispatch=s,l.memoizedState=t,[r,s,!1]}function dy(t){var r=fn();return fy(r,Ht,t)}function fy(t,r,s){if(r=cf(t,r,uy)[0],t=Pu(Ji)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=oc(r)}catch(_){throw _===Do?Au:_}else l=r;r=fn();var d=r.queue,g=d.dispatch;return s!==r.memoizedState&&(ct.flags|=2048,Lo(9,{destroy:void 0},qS.bind(null,d,s),null)),[l,g,t]}function qS(t,r){t.action=r}function gy(t){var r=fn(),s=Ht;if(s!==null)return fy(r,s,t);fn(),r=r.memoizedState,s=fn();var l=s.queue.dispatch;return s.memoizedState=t,[r,l,!1]}function Lo(t,r,s,l){return t={tag:t,create:s,deps:l,inst:r,next:null},r=ct.updateQueue,r===null&&(r=Uu(),ct.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,r.lastEffect=t),t}function py(){return fn().memoizedState}function ju(t,r,s,l){var d=rr();ct.flags|=t,d.memoizedState=Lo(1|r,{destroy:void 0},s,l===void 0?null:l)}function Lu(t,r,s,l){var d=fn();l=l===void 0?null:l;var g=d.memoizedState.inst;Ht!==null&&l!==null&&nf(l,Ht.memoizedState.deps)?d.memoizedState=Lo(r,g,s,l):(ct.flags|=t,d.memoizedState=Lo(1|r,g,s,l))}function my(t,r){ju(8390656,8,t,r)}function ff(t,r){Lu(2048,8,t,r)}function GS(t){ct.flags|=4;var r=ct.updateQueue;if(r===null)r=Uu(),ct.updateQueue=r,r.events=[t];else{var s=r.events;s===null?r.events=[t]:s.push(t)}}function yy(t){var r=fn().memoizedState;return GS({ref:r,nextImpl:t}),function(){if((It&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function vy(t,r){return Lu(4,2,t,r)}function by(t,r){return Lu(4,4,t,r)}function _y(t,r){if(typeof r=="function"){t=t();var s=r(t);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function wy(t,r,s){s=s!=null?s.concat([t]):null,Lu(4,4,_y.bind(null,r,t),s)}function gf(){}function Sy(t,r){var s=fn();r=r===void 0?null:r;var l=s.memoizedState;return r!==null&&nf(r,l[1])?l[0]:(s.memoizedState=[t,r],t)}function Cy(t,r){var s=fn();r=r===void 0?null:r;var l=s.memoizedState;if(r!==null&&nf(r,l[1]))return l[0];if(l=t(),Us){Pn(!0);try{t()}finally{Pn(!1)}}return s.memoizedState=[l,r],l}function pf(t,r,s){return s===void 0||(Qi&1073741824)!==0&&(bt&261930)===0?t.memoizedState=r:(t.memoizedState=s,t=Ev(),ct.lanes|=t,ja|=t,s)}function Ey(t,r,s,l){return Qn(s,r)?s:Mo.current!==null?(t=pf(t,s,l),Qn(t,r)||(_n=!0),t):(Qi&42)===0||(Qi&1073741824)!==0&&(bt&261930)===0?(_n=!0,t.memoizedState=s):(t=Ev(),ct.lanes|=t,ja|=t,r)}function Ty(t,r,s,l,d){var g=se.p;se.p=g!==0&&8>g?g:8;var _=$.T,T={};$.T=T,vf(t,!1,r,s);try{var N=d(),Z=$.S;if(Z!==null&&Z(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var le=zS(N,l);lc(t,r,le,Or(t))}else lc(t,r,l,Or(t))}catch(de){lc(t,r,{then:function(){},status:"rejected",reason:de},Or())}finally{se.p=g,_!==null&&T.types!==null&&(_.types=T.types),$.T=_}}function FS(){}function mf(t,r,s,l){if(t.tag!==5)throw Error(i(476));var d=Ay(t).queue;Ty(t,d,r,ie,s===null?FS:function(){return ky(t),s(l)})}function Ay(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ie},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:s},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ky(t){var r=Ay(t);r.next===null&&(r=t.alternate.memoizedState),lc(t,r.next.queue,{},Or())}function yf(){return zn(Tc)}function Oy(){return fn().memoizedState}function Ry(){return fn().memoizedState}function $S(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var s=Or();t=Ia(s);var l=Na(r,t,s);l!==null&&(dr(l,r,s),rc(l,r,s)),r={cache:Fd()},t.payload=r;return}r=r.return}}function VS(t,r,s){var l=Or();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},zu(t)?Iy(r,s):(s=Jn(t,r,s,l),s!==null&&(dr(s,t,l),Ny(s,r,l)))}function xy(t,r,s){var l=Or();lc(t,r,s,l)}function lc(t,r,s,l){var d={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(zu(t))Iy(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var _=r.lastRenderedState,T=g(_,s);if(d.hasEagerState=!0,d.eagerState=T,Qn(T,_))return zt(t,r,d,0),$t===null&&st(),!1}catch{}if(s=Jn(t,r,d,l),s!==null)return dr(s,t,l),Ny(s,r,l),!0}return!1}function vf(t,r,s,l){if(l={lane:2,revertLane:Jf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zu(t)){if(r)throw Error(i(479))}else r=Jn(t,s,l,2),r!==null&&dr(r,t,2)}function zu(t){var r=t.alternate;return t===ct||r!==null&&r===ct}function Iy(t,r){Po=Nu=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function Ny(t,r,s){if((s&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ft(t,s)}}var cc={readContext:zn,use:Mu,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};cc.useEffectEvent=an;var Dy={readContext:zn,use:Mu,useCallback:function(t,r){return rr().memoizedState=[t,r===void 0?null:r],t},useContext:zn,useEffect:my,useImperativeHandle:function(t,r,s){s=s!=null?s.concat([t]):null,ju(4194308,4,_y.bind(null,r,t),s)},useLayoutEffect:function(t,r){return ju(4194308,4,t,r)},useInsertionEffect:function(t,r){ju(4,2,t,r)},useMemo:function(t,r){var s=rr();r=r===void 0?null:r;var l=t();if(Us){Pn(!0);try{t()}finally{Pn(!1)}}return s.memoizedState=[l,r],l},useReducer:function(t,r,s){var l=rr();if(s!==void 0){var d=s(r);if(Us){Pn(!0);try{s(r)}finally{Pn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=VS.bind(null,ct,t),[l.memoizedState,t]},useRef:function(t){var r=rr();return t={current:t},r.memoizedState=t},useState:function(t){t=hf(t);var r=t.queue,s=xy.bind(null,ct,r);return r.dispatch=s,[t.memoizedState,s]},useDebugValue:gf,useDeferredValue:function(t,r){var s=rr();return pf(s,t,r)},useTransition:function(){var t=hf(!1);return t=Ty.bind(null,ct,t.queue,!0,!1),rr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,s){var l=ct,d=rr();if(Et){if(s===void 0)throw Error(i(407));s=s()}else{if(s=r(),$t===null)throw Error(i(349));(bt&127)!==0||ey(l,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,my(ny.bind(null,l,g,t),[t]),l.flags|=2048,Lo(9,{destroy:void 0},ty.bind(null,l,g,s,r),null),s},useId:function(){var t=rr(),r=$t.identifierPrefix;if(Et){var s=Ei,l=Ci;s=(l&~(1<<32-De(l)-1)).toString(32)+s,r="_"+r+"R_"+s,s=Du++,0<s&&(r+="H"+s.toString(32)),r+="_"}else s=HS++,r="_"+r+"r_"+s.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:yf,useFormState:hy,useActionState:hy,useOptimistic:function(t){var r=rr();r.memoizedState=r.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=vf.bind(null,ct,!0,s),s.dispatch=r,[t,r]},useMemoCache:lf,useCacheRefresh:function(){return rr().memoizedState=$S.bind(null,ct)},useEffectEvent:function(t){var r=rr(),s={impl:t};return r.memoizedState=s,function(){if((It&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},bf={readContext:zn,use:Mu,useCallback:Sy,useContext:zn,useEffect:ff,useImperativeHandle:wy,useInsertionEffect:vy,useLayoutEffect:by,useMemo:Cy,useReducer:Pu,useRef:py,useState:function(){return Pu(Ji)},useDebugValue:gf,useDeferredValue:function(t,r){var s=fn();return Ey(s,Ht.memoizedState,t,r)},useTransition:function(){var t=Pu(Ji)[0],r=fn().memoizedState;return[typeof t=="boolean"?t:oc(t),r]},useSyncExternalStore:Zm,useId:Oy,useHostTransitionStatus:yf,useFormState:dy,useActionState:dy,useOptimistic:function(t,r){var s=fn();return ay(s,Ht,t,r)},useMemoCache:lf,useCacheRefresh:Ry};bf.useEffectEvent=yy;var Uy={readContext:zn,use:Mu,useCallback:Sy,useContext:zn,useEffect:ff,useImperativeHandle:wy,useInsertionEffect:vy,useLayoutEffect:by,useMemo:Cy,useReducer:uf,useRef:py,useState:function(){return uf(Ji)},useDebugValue:gf,useDeferredValue:function(t,r){var s=fn();return Ht===null?pf(s,t,r):Ey(s,Ht.memoizedState,t,r)},useTransition:function(){var t=uf(Ji)[0],r=fn().memoizedState;return[typeof t=="boolean"?t:oc(t),r]},useSyncExternalStore:Zm,useId:Oy,useHostTransitionStatus:yf,useFormState:gy,useActionState:gy,useOptimistic:function(t,r){var s=fn();return Ht!==null?ay(s,Ht,t,r):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:lf,useCacheRefresh:Ry};Uy.useEffectEvent=yy;function _f(t,r,s,l){r=t.memoizedState,s=s(l,r),s=s==null?r:E({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var wf={enqueueSetState:function(t,r,s){t=t._reactInternals;var l=Or(),d=Ia(l);d.payload=r,s!=null&&(d.callback=s),r=Na(t,d,l),r!==null&&(dr(r,t,l),rc(r,t,l))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var l=Or(),d=Ia(l);d.tag=1,d.payload=r,s!=null&&(d.callback=s),r=Na(t,d,l),r!==null&&(dr(r,t,l),rc(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Or(),l=Ia(s);l.tag=2,r!=null&&(l.callback=r),r=Na(t,l,s),r!==null&&(dr(r,t,s),rc(r,t,s))}};function My(t,r,s,l,d,g,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,g,_):r.prototype&&r.prototype.isPureReactComponent?!h(s,l)||!h(d,g):!0}function Py(t,r,s,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,l),r.state!==t&&wf.enqueueReplaceState(r,r.state,null)}function Ms(t,r){var s=r;if("ref"in r){s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}if(t=t.defaultProps){s===r&&(s=E({},s));for(var d in t)s[d]===void 0&&(s[d]=t[d])}return s}function jy(t){Pe(t)}function Ly(t){console.error(t)}function zy(t){Pe(t)}function Hu(t,r){try{var s=t.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Hy(t,r,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Sf(t,r,s){return s=Ia(s),s.tag=3,s.payload={element:null},s.callback=function(){Hu(t,r)},s}function By(t){return t=Ia(t),t.tag=3,t}function Ky(t,r,s,l){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=l.value;t.payload=function(){return d(g)},t.callback=function(){Hy(r,s,l)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Hy(r,s,l),typeof d!="function"&&(La===null?La=new Set([this]):La.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function YS(t,r,s,l,d){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=s.alternate,r!==null&&xo(r,s,d,!0),s=Er.current,s!==null){switch(s.tag){case 31:case 13:return Kr===null?Wu():s.alternate===null&&sn===0&&(sn=3),s.flags&=-257,s.flags|=65536,s.lanes=d,l===ku?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([l]):r.add(l),Vf(t,l,d)),!1;case 22:return s.flags|=65536,l===ku?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([l]):s.add(l)),Vf(t,l,d)),!1}throw Error(i(435,s.tag))}return Vf(t,l,d),Wu(),!1}if(Et)return r=Er.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Hd&&(t=Error(i(422),{cause:l}),Wl(Lr(t,s)))):(l!==Hd&&(r=Error(i(423),{cause:l}),Wl(Lr(r,s))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Lr(l,s),d=Sf(t.stateNode,l,d),Xd(t,d),sn!==4&&(sn=2)),!1;var g=Error(i(520),{cause:l});if(g=Lr(g,s),yc===null?yc=[g]:yc.push(g),sn!==4&&(sn=2),r===null)return!0;l=Lr(l,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,t=d&-d,s.lanes|=t,t=Sf(s.stateNode,l,t),Xd(s,t),!1;case 1:if(r=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(La===null||!La.has(g))))return s.flags|=65536,d&=-d,s.lanes|=d,d=By(d),Ky(d,t,s,l),Xd(s,d),!1}s=s.return}while(s!==null);return!1}var Cf=Error(i(461)),_n=!1;function Hn(t,r,s,l){r.child=t===null?$m(r,null,s,l):Ds(r,t.child,s,l)}function qy(t,r,s,l,d){s=s.render;var g=r.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Rs(r),l=rf(t,r,s,_,g,d),T=af(),t!==null&&!_n?(sf(t,r,d),Xi(t,r,d)):(Et&&T&&Ld(r),r.flags|=1,Hn(t,r,l,d),r.child)}function Gy(t,r,s,l,d){if(t===null){var g=s.type;return typeof g=="function"&&!Md(g)&&g.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=g,Fy(t,r,g,l,d)):(t=wu(s.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!If(t,d)){var _=g.memoizedProps;if(s=s.compare,s=s!==null?s:h,s(_,l)&&t.ref===r.ref)return Xi(t,r,d)}return r.flags|=1,t=Fi(g,l),t.ref=r.ref,t.return=r,r.child=t}function Fy(t,r,s,l,d){if(t!==null){var g=t.memoizedProps;if(h(g,l)&&t.ref===r.ref)if(_n=!1,r.pendingProps=l=g,If(t,d))(t.flags&131072)!==0&&(_n=!0);else return r.lanes=t.lanes,Xi(t,r,d)}return Ef(t,r,s,l,d)}function $y(t,r,s,l){var d=l.children,g=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~g}else l=0,r.child=null;return Vy(t,r,g,s,l)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Tu(r,g!==null?g.cachePool:null),g!==null?Qm(r,g):Zd(),Jm(r);else return l=r.lanes=536870912,Vy(t,r,g!==null?g.baseLanes|s:s,s,l)}else g!==null?(Tu(r,g.cachePool),Qm(r,g),Ua(),r.memoizedState=null):(t!==null&&Tu(r,null),Zd(),Ua());return Hn(t,r,d,s),r.child}function uc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Vy(t,r,s,l,d){var g=Vd();return g=g===null?null:{parent:vn._currentValue,pool:g},r.memoizedState={baseLanes:s,cachePool:g},t!==null&&Tu(r,null),Zd(),Jm(r),t!==null&&xo(t,r,l,!0),r.childLanes=d,null}function Bu(t,r){return r=qu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Yy(t,r,s){return Ds(r,t.child,null,s),t=Bu(r,r.pendingProps),t.flags|=2,Tr(r),r.memoizedState=null,t}function QS(t,r,s){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Et){if(l.mode==="hidden")return t=Bu(r,l),r.lanes=536870912,uc(null,t);if(tf(r),(t=en)?(t=sb(t,Br),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Aa!==null?{id:Ci,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},s=Im(t),s.return=r,r.child=s,Ln=r,en=null)):t=null,t===null)throw Oa(r);return r.lanes=536870912,null}return Bu(r,l)}var g=t.memoizedState;if(g!==null){var _=g.dehydrated;if(tf(r),d)if(r.flags&256)r.flags&=-257,r=Yy(t,r,s);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(_n||xo(t,r,s,!1),d=(s&t.childLanes)!==0,_n||d){if(l=$t,l!==null&&(_=cn(l,s),_!==0&&_!==g.retryLane))throw g.retryLane=_,Ut(t,_),dr(l,t,_),Cf;Wu(),r=Yy(t,r,s)}else t=g.treeContext,en=qr(_.nextSibling),Ln=r,Et=!0,ka=null,Br=!1,t!==null&&Um(r,t),r=Bu(r,l),r.flags|=4096;return r}return t=Fi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Ku(t,r){var s=r.ref;if(s===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(r.flags|=4194816)}}function Ef(t,r,s,l,d){return Rs(r),s=rf(t,r,s,l,void 0,d),l=af(),t!==null&&!_n?(sf(t,r,d),Xi(t,r,d)):(Et&&l&&Ld(r),r.flags|=1,Hn(t,r,s,d),r.child)}function Qy(t,r,s,l,d,g){return Rs(r),r.updateQueue=null,s=Wm(r,l,s,d),Xm(t),l=af(),t!==null&&!_n?(sf(t,r,g),Xi(t,r,g)):(Et&&l&&Ld(r),r.flags|=1,Hn(t,r,s,g),r.child)}function Jy(t,r,s,l,d){if(Rs(r),r.stateNode===null){var g=Ao,_=s.contextType;typeof _=="object"&&_!==null&&(g=zn(_)),g=new s(l,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wf,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=l,g.state=r.memoizedState,g.refs={},Qd(r),_=s.contextType,g.context=typeof _=="object"&&_!==null?zn(_):Ao,g.state=r.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(_f(r,s,_,l),g.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(_=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),_!==g.state&&wf.enqueueReplaceState(g,g.state,null),ac(r,l,g,d),ic(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){g=r.stateNode;var T=r.memoizedProps,N=Ms(s,T);g.props=N;var Z=g.context,le=s.contextType;_=Ao,typeof le=="object"&&le!==null&&(_=zn(le));var de=s.getDerivedStateFromProps;le=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,le||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||Z!==_)&&Py(r,g,l,_),xa=!1;var te=r.memoizedState;g.state=te,ac(r,l,g,d),ic(),Z=r.memoizedState,T||te!==Z||xa?(typeof de=="function"&&(_f(r,s,de,l),Z=r.memoizedState),(N=xa||My(r,s,N,l,te,Z,_))?(le||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Z),g.props=l,g.state=Z,g.context=_,l=N):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{g=r.stateNode,Jd(t,r),_=r.memoizedProps,le=Ms(s,_),g.props=le,de=r.pendingProps,te=g.context,Z=s.contextType,N=Ao,typeof Z=="object"&&Z!==null&&(N=zn(Z)),T=s.getDerivedStateFromProps,(Z=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==de||te!==N)&&Py(r,g,l,N),xa=!1,te=r.memoizedState,g.state=te,ac(r,l,g,d),ic();var re=r.memoizedState;_!==de||te!==re||xa||t!==null&&t.dependencies!==null&&Cu(t.dependencies)?(typeof T=="function"&&(_f(r,s,T,l),re=r.memoizedState),(le=xa||My(r,s,le,l,te,re,N)||t!==null&&t.dependencies!==null&&Cu(t.dependencies))?(Z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,re,N),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,re,N)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=re),g.props=l,g.state=re,g.context=N,l=le):(typeof g.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),l=!1)}return g=l,Ku(t,r),l=(r.flags&128)!==0,g||l?(g=r.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,t!==null&&l?(r.child=Ds(r,t.child,null,d),r.child=Ds(r,null,s,d)):Hn(t,r,s,d),r.memoizedState=g.state,t=r.child):t=Xi(t,r,d),t}function Xy(t,r,s,l){return ks(),r.flags|=256,Hn(t,r,s,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Af(t){return{baseLanes:t,cachePool:Hm()}}function kf(t,r,s){return t=t!==null?t.childLanes&~s:0,r&&(t|=kr),t}function Wy(t,r,s){var l=r.pendingProps,d=!1,g=(r.flags&128)!==0,_;if((_=g)||(_=t!==null&&t.memoizedState===null?!1:(dn.current&2)!==0),_&&(d=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Et){if(d?Da(r):Ua(),(t=en)?(t=sb(t,Br),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Aa!==null?{id:Ci,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},s=Im(t),s.return=r,r.child=s,Ln=r,en=null)):t=null,t===null)throw Oa(r);return cg(t)?r.lanes=32:r.lanes=536870912,null}var T=l.children;return l=l.fallback,d?(Ua(),d=r.mode,T=qu({mode:"hidden",children:T},d),l=As(l,d,s,null),T.return=r,l.return=r,T.sibling=l,r.child=T,l=r.child,l.memoizedState=Af(s),l.childLanes=kf(t,_,s),r.memoizedState=Tf,uc(null,l)):(Da(r),Of(r,T))}var N=t.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(g)r.flags&256?(Da(r),r.flags&=-257,r=Rf(t,r,s)):r.memoizedState!==null?(Ua(),r.child=t.child,r.flags|=128,r=null):(Ua(),T=l.fallback,d=r.mode,l=qu({mode:"visible",children:l.children},d),T=As(T,d,s,null),T.flags|=2,l.return=r,T.return=r,l.sibling=T,r.child=l,Ds(r,t.child,null,s),l=r.child,l.memoizedState=Af(s),l.childLanes=kf(t,_,s),r.memoizedState=Tf,r=uc(null,l));else if(Da(r),cg(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var Z=_.dgst;_=Z,l=Error(i(419)),l.stack="",l.digest=_,Wl({value:l,source:null,stack:null}),r=Rf(t,r,s)}else if(_n||xo(t,r,s,!1),_=(s&t.childLanes)!==0,_n||_){if(_=$t,_!==null&&(l=cn(_,s),l!==0&&l!==N.retryLane))throw N.retryLane=l,Ut(t,l),dr(_,t,l),Cf;lg(T)||Wu(),r=Rf(t,r,s)}else lg(T)?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,en=qr(T.nextSibling),Ln=r,Et=!0,ka=null,Br=!1,t!==null&&Um(r,t),r=Of(r,l.children),r.flags|=4096);return r}return d?(Ua(),T=l.fallback,d=r.mode,N=t.child,Z=N.sibling,l=Fi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,Z!==null?T=Fi(Z,T):(T=As(T,d,s,null),T.flags|=2),T.return=r,l.return=r,l.sibling=T,r.child=l,uc(null,l),l=r.child,T=t.child.memoizedState,T===null?T=Af(s):(d=T.cachePool,d!==null?(N=vn._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=Hm(),T={baseLanes:T.baseLanes|s,cachePool:d}),l.memoizedState=T,l.childLanes=kf(t,_,s),r.memoizedState=Tf,uc(t.child,l)):(Da(r),s=t.child,t=s.sibling,s=Fi(s,{mode:"visible",children:l.children}),s.return=r,s.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=s,r.memoizedState=null,s)}function Of(t,r){return r=qu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function qu(t,r){return t=Cr(22,t,null,r),t.lanes=0,t}function Rf(t,r,s){return Ds(r,t.child,null,s),t=Of(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Zy(t,r,s){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),qd(t.return,r,s)}function xf(t,r,s,l,d,g){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d,treeForkCount:g}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=s,_.tailMode=d,_.treeForkCount=g)}function ev(t,r,s){var l=r.pendingProps,d=l.revealOrder,g=l.tail;l=l.children;var _=dn.current,T=(_&2)!==0;if(T?(_=_&1|2,r.flags|=128):_&=1,ne(dn,_),Hn(t,r,l,s),l=Et?Xl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,s,r);else if(t.tag===19)Zy(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&Iu(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),xf(r,!1,d,s,g,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Iu(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}xf(r,!0,s,null,g,l);break;case"together":xf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Xi(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),ja|=r.lanes,(s&r.childLanes)===0)if(t!==null){if(xo(t,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,s=Fi(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=Fi(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function If(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Cu(t)))}function JS(t,r,s){switch(r.tag){case 3:Ve(r,r.stateNode.containerInfo),Ra(r,vn,t.memoizedState.cache),ks();break;case 27:case 5:Ee(r);break;case 4:Ve(r,r.stateNode.containerInfo);break;case 10:Ra(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,tf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Da(r),r.flags|=128,null):(s&r.child.childLanes)!==0?Wy(t,r,s):(Da(r),t=Xi(t,r,s),t!==null?t.sibling:null);Da(r);break;case 19:var d=(t.flags&128)!==0;if(l=(s&r.childLanes)!==0,l||(xo(t,r,s,!1),l=(s&r.childLanes)!==0),d){if(l)return ev(t,r,s);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ne(dn,dn.current),l)break;return null;case 22:return r.lanes=0,$y(t,r,s,r.pendingProps);case 24:Ra(r,vn,t.memoizedState.cache)}return Xi(t,r,s)}function tv(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps)_n=!0;else{if(!If(t,s)&&(r.flags&128)===0)return _n=!1,JS(t,r,s);_n=(t.flags&131072)!==0}else _n=!1,Et&&(r.flags&1048576)!==0&&Dm(r,Xl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Is(r.elementType),r.type=t,typeof t=="function")Md(t)?(l=Ms(t,l),r.tag=1,r=Jy(null,r,t,l,s)):(r.tag=0,r=Ef(null,r,t,l,s));else{if(t!=null){var d=t.$$typeof;if(d===ke){r.tag=11,r=qy(null,r,t,l,s);break e}else if(d===pe){r.tag=14,r=Gy(null,r,t,l,s);break e}}throw r=Ye(t)||t,Error(i(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,s);case 1:return l=r.type,d=Ms(l,r.pendingProps),Jy(t,r,l,d,s);case 3:e:{if(Ve(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var g=r.memoizedState;d=g.element,Jd(t,r),ac(r,l,null,s);var _=r.memoizedState;if(l=_.cache,Ra(r,vn,l),l!==g.cache&&Gd(r,[vn],s,!0),ic(),l=_.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Xy(t,r,l,s);break e}else if(l!==d){d=Lr(Error(i(424)),r),Wl(d),r=Xy(t,r,l,s);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,en=qr(t.firstChild),Ln=r,Et=!0,ka=null,Br=!0,s=$m(r,null,l,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ks(),l===d){r=Xi(t,r,s);break e}Hn(t,r,l,s)}r=r.child}return r;case 26:return Ku(t,r),t===null?(s=db(r.type,null,r.pendingProps,null))?r.memoizedState=s:Et||(s=r.type,t=r.pendingProps,l=ah(Ke.current).createElement(s),l[Yt]=r,l[un]=t,Bn(l,s,t),hn(l),r.stateNode=l):r.memoizedState=db(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ee(r),t===null&&Et&&(l=r.stateNode=cb(r.type,r.pendingProps,Ke.current),Ln=r,Br=!0,d=en,Ka(r.type)?(ug=d,en=qr(l.firstChild)):en=d),Hn(t,r,r.pendingProps.children,s),Ku(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Et&&((d=l=en)&&(l=AC(l,r.type,r.pendingProps,Br),l!==null?(r.stateNode=l,Ln=r,en=qr(l.firstChild),Br=!1,d=!0):d=!1),d||Oa(r)),Ee(r),d=r.type,g=r.pendingProps,_=t!==null?t.memoizedProps:null,l=g.children,ag(d,g)?l=null:_!==null&&ag(d,_)&&(r.flags|=32),r.memoizedState!==null&&(d=rf(t,r,BS,null,null,s),Tc._currentValue=d),Ku(t,r),Hn(t,r,l,s),r.child;case 6:return t===null&&Et&&((t=s=en)&&(s=kC(s,r.pendingProps,Br),s!==null?(r.stateNode=s,Ln=r,en=null,t=!0):t=!1),t||Oa(r)),null;case 13:return Wy(t,r,s);case 4:return Ve(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ds(r,null,l,s):Hn(t,r,l,s),r.child;case 11:return qy(t,r,r.type,r.pendingProps,s);case 7:return Hn(t,r,r.pendingProps,s),r.child;case 8:return Hn(t,r,r.pendingProps.children,s),r.child;case 12:return Hn(t,r,r.pendingProps.children,s),r.child;case 10:return l=r.pendingProps,Ra(r,r.type,l.value),Hn(t,r,l.children,s),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Rs(r),d=zn(d),l=l(d),r.flags|=1,Hn(t,r,l,s),r.child;case 14:return Gy(t,r,r.type,r.pendingProps,s);case 15:return Fy(t,r,r.type,r.pendingProps,s);case 19:return ev(t,r,s);case 31:return QS(t,r,s);case 22:return $y(t,r,s,r.pendingProps);case 24:return Rs(r),l=zn(vn),t===null?(d=Vd(),d===null&&(d=$t,g=Fd(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=s),d=g),r.memoizedState={parent:l,cache:d},Qd(r),Ra(r,vn,d)):((t.lanes&s)!==0&&(Jd(t,r),ac(r,null,null,s),ic()),d=t.memoizedState,g=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Ra(r,vn,l)):(l=g.cache,Ra(r,vn,l),l!==d.cache&&Gd(r,[vn],s,!0))),Hn(t,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Wi(t){t.flags|=4}function Nf(t,r,s,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Ov())t.flags|=8192;else throw Ns=ku,Yd}else t.flags&=-16777217}function nv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yb(r))if(Ov())t.flags|=8192;else throw Ns=ku,Yd}function Gu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?su():536870912,t.lanes|=r,Ko|=r)}function hc(t,r){if(!Et)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function tn(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=s,r}function XS(t,r,s){var l=r.pendingProps;switch(zd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return tn(r),null;case 3:return s=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Yi(vn),Fe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ro(r)?Wi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Bd())),tn(r),null;case 26:var d=r.type,g=r.memoizedState;return t===null?(Wi(r),g!==null?(tn(r),nv(r,g)):(tn(r),Nf(r,d,null,l,s))):g?g!==t.memoizedState?(Wi(r),tn(r),nv(r,g)):(tn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Wi(r),tn(r),Nf(r,d,t,l,s)),null;case 27:if(rt(r),s=Ke.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Wi(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return tn(r),null}t=ye.current,Ro(r)?Mm(r):(t=cb(d,l,s),r.stateNode=t,Wi(r))}return tn(r),null;case 5:if(rt(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Wi(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return tn(r),null}if(g=ye.current,Ro(r))Mm(r);else{var _=ah(Ke.current);switch(g){case 1:g=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=_.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?g.multiple=!0:l.size&&(g.size=l.size);break;default:g=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}g[Yt]=r,g[un]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)g.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=g;e:switch(Bn(g,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Wi(r)}}return tn(r),Nf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,s),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Wi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=Ke.current,Ro(r)){if(t=r.stateNode,s=r.memoizedProps,l=null,d=Ln,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Yt]=r,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Wv(t.nodeValue,s)),t||Oa(r,!0)}else t=ah(t).createTextNode(l),t[Yt]=r,r.stateNode=t}return tn(r),null;case 31:if(s=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ro(r),s!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Yt]=r}else ks(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),t=!1}else s=Bd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return r.flags&256?(Tr(r),r):(Tr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return tn(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ro(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Yt]=r}else ks(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),d=!1}else d=Bd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Tr(r),r):(Tr(r),null)}return Tr(r),(r.flags&128)!==0?(r.lanes=s,r):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048)),s!==t&&s&&(r.child.flags|=8192),Gu(r,r.updateQueue),tn(r),null);case 4:return Fe(),t===null&&eg(r.stateNode.containerInfo),tn(r),null;case 10:return Yi(r.type),tn(r),null;case 19:if(X(dn),l=r.memoizedState,l===null)return tn(r),null;if(d=(r.flags&128)!==0,g=l.rendering,g===null)if(d)hc(l,!1);else{if(sn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(g=Iu(t),g!==null){for(r.flags|=128,hc(l,!1),t=g.updateQueue,r.updateQueue=t,Gu(r,t),r.subtreeFlags=0,t=s,s=r.child;s!==null;)xm(s,t),s=s.sibling;return ne(dn,dn.current&1|2),Et&&$i(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&At()>Qu&&(r.flags|=128,d=!0,hc(l,!1),r.lanes=4194304)}else{if(!d)if(t=Iu(g),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Gu(r,t),hc(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!Et)return tn(r),null}else 2*At()-l.renderingStartTime>Qu&&s!==536870912&&(r.flags|=128,d=!0,hc(l,!1),r.lanes=4194304);l.isBackwards?(g.sibling=r.child,r.child=g):(t=l.last,t!==null?t.sibling=g:r.child=g,l.last=g)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=At(),t.sibling=null,s=dn.current,ne(dn,d?s&1|2:s&1),Et&&$i(r,l.treeForkCount),t):(tn(r),null);case 22:case 23:return Tr(r),ef(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(s&536870912)!==0&&(r.flags&128)===0&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),s=r.updateQueue,s!==null&&Gu(r,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==s&&(r.flags|=2048),t!==null&&X(xs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),Yi(vn),tn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function WS(t,r){switch(zd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Yi(vn),Fe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return rt(r),null;case 31:if(r.memoizedState!==null){if(Tr(r),r.alternate===null)throw Error(i(340));ks()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Tr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ks()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return X(dn),null;case 4:return Fe(),null;case 10:return Yi(r.type),null;case 22:case 23:return Tr(r),ef(),t!==null&&X(xs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Yi(vn),null;case 25:return null;default:return null}}function rv(t,r){switch(zd(r),r.tag){case 3:Yi(vn),Fe();break;case 26:case 27:case 5:rt(r);break;case 4:Fe();break;case 31:r.memoizedState!==null&&Tr(r);break;case 13:Tr(r);break;case 19:X(dn);break;case 10:Yi(r.type);break;case 22:case 23:Tr(r),ef(),t!==null&&X(xs);break;case 24:Yi(vn)}}function dc(t,r){try{var s=r.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var d=l.next;s=d;do{if((s.tag&t)===t){l=void 0;var g=s.create,_=s.inst;l=g(),_.destroy=l}s=s.next}while(s!==d)}}catch(T){Pt(r,r.return,T)}}function Ma(t,r,s){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=r;var N=s,Z=T;try{Z()}catch(le){Pt(d,N,le)}}}l=l.next}while(l!==g)}}catch(le){Pt(r,r.return,le)}}function iv(t){var r=t.updateQueue;if(r!==null){var s=t.stateNode;try{Ym(r,s)}catch(l){Pt(t,t.return,l)}}}function av(t,r,s){s.props=Ms(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Pt(t,r,l)}}function fc(t,r){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(d){Pt(t,r,d)}}function Ti(t,r){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(d){Pt(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){Pt(t,r,d)}else s.current=null}function sv(t){var r=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(d){Pt(t,t.return,d)}}function Df(t,r,s){try{var l=t.stateNode;_C(l,t.type,s,r),l[un]=r}catch(d){Pt(t,t.return,d)}}function ov(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ka(t.type)||t.tag===4}function Uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ka(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(t),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=or));else if(l!==4&&(l===27&&Ka(t.type)&&(s=t.stateNode,r=null),t=t.child,t!==null))for(Mf(t,r,s),t=t.sibling;t!==null;)Mf(t,r,s),t=t.sibling}function Fu(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(l!==4&&(l===27&&Ka(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Fu(t,r,s),t=t.sibling;t!==null;)Fu(t,r,s),t=t.sibling}function lv(t){var r=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Bn(r,l,s),r[Yt]=t,r[un]=s}catch(g){Pt(t,t.return,g)}}var Zi=!1,wn=!1,Pf=!1,cv=typeof WeakSet=="function"?WeakSet:Set,Un=null;function ZS(t,r){if(t=t.containerInfo,rg=dh,t=w(t),C(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var _=0,T=-1,N=-1,Z=0,le=0,de=t,te=null;t:for(;;){for(var re;de!==s||d!==0&&de.nodeType!==3||(T=_+d),de!==g||l!==0&&de.nodeType!==3||(N=_+l),de.nodeType===3&&(_+=de.nodeValue.length),(re=de.firstChild)!==null;)te=de,de=re;for(;;){if(de===t)break t;if(te===s&&++Z===d&&(T=_),te===g&&++le===l&&(N=_),(re=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=re}s=T===-1||N===-1?null:{start:T,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(ig={focusedElem:t,selectionRange:s},dh=!1,Un=r;Un!==null;)if(r=Un,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Un=t;else for(;Un!==null;){switch(r=Un,g=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)d=t[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,s=r,d=g.memoizedProps,g=g.memoizedState,l=s.stateNode;try{var ze=Ms(s.type,d);t=l.getSnapshotBeforeUpdate(ze,g),l.__reactInternalSnapshotBeforeUpdate=t}catch(et){Pt(s,s.return,et)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,s=t.nodeType,s===9)og(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":og(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Un=t;break}Un=r.return}}function uv(t,r,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ta(t,s),l&4&&dc(5,s);break;case 1:if(ta(t,s),l&4)if(t=s.stateNode,r===null)try{t.componentDidMount()}catch(_){Pt(s,s.return,_)}else{var d=Ms(s.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Pt(s,s.return,_)}}l&64&&iv(s),l&512&&fc(s,s.return);break;case 3:if(ta(t,s),l&64&&(t=s.updateQueue,t!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{Ym(t,r)}catch(_){Pt(s,s.return,_)}}break;case 27:r===null&&l&4&&lv(s);case 26:case 5:ta(t,s),r===null&&l&4&&sv(s),l&512&&fc(s,s.return);break;case 12:ta(t,s);break;case 31:ta(t,s),l&4&&fv(t,s);break;case 13:ta(t,s),l&4&&gv(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=lC.bind(null,s),OC(t,s))));break;case 22:if(l=s.memoizedState!==null||Zi,!l){r=r!==null&&r.memoizedState!==null||wn,d=Zi;var g=wn;Zi=l,(wn=r)&&!g?na(t,s,(s.subtreeFlags&8772)!==0):ta(t,s),Zi=d,wn=g}break;case 30:break;default:ta(t,s)}}function hv(t){var r=t.alternate;r!==null&&(t.alternate=null,hv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ao(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nn=null,lr=!1;function ea(t,r,s){for(s=s.child;s!==null;)dv(t,r,s),s=s.sibling}function dv(t,r,s){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount($n,s)}catch{}switch(s.tag){case 26:wn||Ti(s,r),ea(t,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:wn||Ti(s,r);var l=nn,d=lr;Ka(s.type)&&(nn=s.stateNode,lr=!1),ea(t,r,s),Sc(s.stateNode),nn=l,lr=d;break;case 5:wn||Ti(s,r);case 6:if(l=nn,d=lr,nn=null,ea(t,r,s),nn=l,lr=d,nn!==null)if(lr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(s.stateNode)}catch(g){Pt(s,r,g)}else try{nn.removeChild(s.stateNode)}catch(g){Pt(s,r,g)}break;case 18:nn!==null&&(lr?(t=nn,ib(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Jo(t)):ib(nn,s.stateNode));break;case 4:l=nn,d=lr,nn=s.stateNode.containerInfo,lr=!0,ea(t,r,s),nn=l,lr=d;break;case 0:case 11:case 14:case 15:Ma(2,s,r),wn||Ma(4,s,r),ea(t,r,s);break;case 1:wn||(Ti(s,r),l=s.stateNode,typeof l.componentWillUnmount=="function"&&av(s,r,l)),ea(t,r,s);break;case 21:ea(t,r,s);break;case 22:wn=(l=wn)||s.memoizedState!==null,ea(t,r,s),wn=l;break;default:ea(t,r,s)}}function fv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Jo(t)}catch(s){Pt(r,r.return,s)}}}function gv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jo(t)}catch(s){Pt(r,r.return,s)}}function eC(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new cv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new cv),r;default:throw Error(i(435,t.tag))}}function $u(t,r){var s=eC(t);r.forEach(function(l){if(!s.has(l)){s.add(l);var d=cC.bind(null,t,l);l.then(d,d)}})}function cr(t,r){var s=r.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l],g=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Ka(T.type)){nn=T.stateNode,lr=!1;break e}break;case 5:nn=T.stateNode,lr=!1;break e;case 3:case 4:nn=T.stateNode.containerInfo,lr=!0;break e}T=T.return}if(nn===null)throw Error(i(160));dv(g,_,d),nn=null,lr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)pv(r,t),r=r.sibling}var ei=null;function pv(t,r){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cr(r,t),ur(t),l&4&&(Ma(3,t,t.return),dc(3,t),Ma(5,t,t.return));break;case 1:cr(r,t),ur(t),l&512&&(wn||s===null||Ti(s,s.return)),l&64&&Zi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var d=ei;if(cr(r,t),ur(t),l&512&&(wn||s===null||Ti(s,s.return)),l&4){var g=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":g=d.getElementsByTagName("title")[0],(!g||g[_r]||g[Yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(l),d.head.insertBefore(g,d.querySelector("head > title"))),Bn(g,l,s),g[Yt]=t,hn(g),l=g;break e;case"link":var _=pb("link","href",d).get(l+(s.href||""));if(_){for(var T=0;T<_.length;T++)if(g=_[T],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(T,1);break t}}g=d.createElement(l),Bn(g,l,s),d.head.appendChild(g);break;case"meta":if(_=pb("meta","content",d).get(l+(s.content||""))){for(T=0;T<_.length;T++)if(g=_[T],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(T,1);break t}}g=d.createElement(l),Bn(g,l,s),d.head.appendChild(g);break;default:throw Error(i(468,l))}g[Yt]=t,hn(g),l=g}t.stateNode=l}else mb(d,t.type,t.stateNode);else t.stateNode=gb(d,l,t.memoizedProps);else g!==l?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,l===null?mb(d,t.type,t.stateNode):gb(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Df(t,t.memoizedProps,s.memoizedProps)}break;case 27:cr(r,t),ur(t),l&512&&(wn||s===null||Ti(s,s.return)),s!==null&&l&4&&Df(t,t.memoizedProps,s.memoizedProps);break;case 5:if(cr(r,t),ur(t),l&512&&(wn||s===null||Ti(s,s.return)),t.flags&32){d=t.stateNode;try{Mi(d,"")}catch(ze){Pt(t,t.return,ze)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Df(t,d,s!==null?s.memoizedProps:d)),l&1024&&(Pf=!0);break;case 6:if(cr(r,t),ur(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(ze){Pt(t,t.return,ze)}}break;case 3:if(lh=null,d=ei,ei=sh(r.containerInfo),cr(r,t),ei=d,ur(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Jo(r.containerInfo)}catch(ze){Pt(t,t.return,ze)}Pf&&(Pf=!1,mv(t));break;case 4:l=ei,ei=sh(t.stateNode.containerInfo),cr(r,t),ur(t),ei=l;break;case 12:cr(r,t),ur(t);break;case 31:cr(r,t),ur(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 13:cr(r,t),ur(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Yu=At()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 22:d=t.memoizedState!==null;var N=s!==null&&s.memoizedState!==null,Z=Zi,le=wn;if(Zi=Z||d,wn=le||N,cr(r,t),wn=le,Zi=Z,ur(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(s===null||N||Zi||wn||Ps(t)),s=null,r=t;;){if(r.tag===5||r.tag===26){if(s===null){N=s=r;try{if(g=N.stateNode,d)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=N.stateNode;var de=N.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;T.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ze){Pt(N,N.return,ze)}}}else if(r.tag===6){if(s===null){N=r;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(ze){Pt(N,N.return,ze)}}}else if(r.tag===18){if(s===null){N=r;try{var re=N.stateNode;d?ab(re,!0):ab(N.stateNode,!1)}catch(ze){Pt(N,N.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,$u(t,s))));break;case 19:cr(r,t),ur(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$u(t,l)));break;case 30:break;case 21:break;default:cr(r,t),ur(t)}}function ur(t){var r=t.flags;if(r&2){try{for(var s,l=t.return;l!==null;){if(ov(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var d=s.stateNode,g=Uf(t);Fu(t,g,d);break;case 5:var _=s.stateNode;s.flags&32&&(Mi(_,""),s.flags&=-33);var T=Uf(t);Fu(t,T,_);break;case 3:case 4:var N=s.stateNode.containerInfo,Z=Uf(t);Mf(t,Z,N);break;default:throw Error(i(161))}}catch(le){Pt(t,t.return,le)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function mv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;mv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ta(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)uv(t,r.alternate,r),r=r.sibling}function Ps(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ma(4,r,r.return),Ps(r);break;case 1:Ti(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&av(r,r.return,s),Ps(r);break;case 27:Sc(r.stateNode);case 26:case 5:Ti(r,r.return),Ps(r);break;case 22:r.memoizedState===null&&Ps(r);break;case 30:Ps(r);break;default:Ps(r)}t=t.sibling}}function na(t,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,g=r,_=g.flags;switch(g.tag){case 0:case 11:case 15:na(d,g,s),dc(4,g);break;case 1:if(na(d,g,s),l=g,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Z){Pt(l,l.return,Z)}if(l=g,d=l.updateQueue,d!==null){var T=l.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Vm(N[d],T)}catch(Z){Pt(l,l.return,Z)}}s&&_&64&&iv(g),fc(g,g.return);break;case 27:lv(g);case 26:case 5:na(d,g,s),s&&l===null&&_&4&&sv(g),fc(g,g.return);break;case 12:na(d,g,s);break;case 31:na(d,g,s),s&&_&4&&fv(d,g);break;case 13:na(d,g,s),s&&_&4&&gv(d,g);break;case 22:g.memoizedState===null&&na(d,g,s),fc(g,g.return);break;case 30:break;default:na(d,g,s)}r=r.sibling}}function jf(t,r){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Zl(s))}function Lf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Zl(t))}function ti(t,r,s,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yv(t,r,s,l),r=r.sibling}function yv(t,r,s,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:ti(t,r,s,l),d&2048&&dc(9,r);break;case 1:ti(t,r,s,l);break;case 3:ti(t,r,s,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Zl(t)));break;case 12:if(d&2048){ti(t,r,s,l),t=r.stateNode;try{var g=r.memoizedProps,_=g.id,T=g.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Pt(r,r.return,N)}}else ti(t,r,s,l);break;case 31:ti(t,r,s,l);break;case 13:ti(t,r,s,l);break;case 23:break;case 22:g=r.stateNode,_=r.alternate,r.memoizedState!==null?g._visibility&2?ti(t,r,s,l):gc(t,r):g._visibility&2?ti(t,r,s,l):(g._visibility|=2,zo(t,r,s,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&jf(_,r);break;case 24:ti(t,r,s,l),d&2048&&Lf(r.alternate,r);break;default:ti(t,r,s,l)}}function zo(t,r,s,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=t,_=r,T=s,N=l,Z=_.flags;switch(_.tag){case 0:case 11:case 15:zo(g,_,T,N,d),dc(8,_);break;case 23:break;case 22:var le=_.stateNode;_.memoizedState!==null?le._visibility&2?zo(g,_,T,N,d):gc(g,_):(le._visibility|=2,zo(g,_,T,N,d)),d&&Z&2048&&jf(_.alternate,_);break;case 24:zo(g,_,T,N,d),d&&Z&2048&&Lf(_.alternate,_);break;default:zo(g,_,T,N,d)}r=r.sibling}}function gc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=t,l=r,d=l.flags;switch(l.tag){case 22:gc(s,l),d&2048&&jf(l.alternate,l);break;case 24:gc(s,l),d&2048&&Lf(l.alternate,l);break;default:gc(s,l)}r=r.sibling}}var pc=8192;function Ho(t,r,s){if(t.subtreeFlags&pc)for(t=t.child;t!==null;)vv(t,r,s),t=t.sibling}function vv(t,r,s){switch(t.tag){case 26:Ho(t,r,s),t.flags&pc&&t.memoizedState!==null&&HC(s,ei,t.memoizedState,t.memoizedProps);break;case 5:Ho(t,r,s);break;case 3:case 4:var l=ei;ei=sh(t.stateNode.containerInfo),Ho(t,r,s),ei=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=pc,pc=16777216,Ho(t,r,s),pc=l):Ho(t,r,s));break;default:Ho(t,r,s)}}function bv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function mc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];Un=l,wv(l,t)}bv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_v(t),t=t.sibling}function _v(t){switch(t.tag){case 0:case 11:case 15:mc(t),t.flags&2048&&Ma(9,t,t.return);break;case 3:mc(t);break;case 12:mc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Vu(t)):mc(t);break;default:mc(t)}}function Vu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];Un=l,wv(l,t)}bv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ma(8,r,r.return),Vu(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,Vu(r));break;default:Vu(r)}t=t.sibling}}function wv(t,r){for(;Un!==null;){var s=Un;switch(s.tag){case 0:case 11:case 15:Ma(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Un=l;else e:for(s=t;Un!==null;){l=Un;var d=l.sibling,g=l.return;if(hv(l),l===s){Un=null;break e}if(d!==null){d.return=g,Un=d;break e}Un=g}}}var tC={getCacheForType:function(t){var r=zn(vn),s=r.data.get(t);return s===void 0&&(s=t(),r.data.set(t,s)),s},cacheSignal:function(){return zn(vn).controller.signal}},nC=typeof WeakMap=="function"?WeakMap:Map,It=0,$t=null,yt=null,bt=0,Mt=0,Ar=null,Pa=!1,Bo=!1,zf=!1,ra=0,sn=0,ja=0,js=0,Hf=0,kr=0,Ko=0,yc=null,hr=null,Bf=!1,Yu=0,Sv=0,Qu=1/0,Ju=null,La=null,Tn=0,za=null,qo=null,ia=0,Kf=0,qf=null,Cv=null,vc=0,Gf=null;function Or(){return(It&2)!==0&&bt!==0?bt&-bt:$.T!==null?Jf():hs()}function Ev(){if(kr===0)if((bt&536870912)===0||Et){var t=da;da<<=1,(da&3932160)===0&&(da=262144),kr=t}else kr=536870912;return t=Er.current,t!==null&&(t.flags|=32),kr}function dr(t,r,s){(t===$t&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)&&(Go(t,0),Ha(t,bt,kr,!1)),Dr(t,s),((It&2)===0||t!==$t)&&(t===$t&&((It&2)===0&&(js|=s),sn===4&&Ha(t,bt,kr,!1)),Ai(t))}function Tv(t,r,s){if((It&6)!==0)throw Error(i(327));var l=!s&&(r&127)===0&&(r&t.expiredLanes)===0||Ni(t,r),d=l?aC(t,r):$f(t,r,!0),g=l;do{if(d===0){Bo&&!l&&Ha(t,r,0,!1);break}else{if(s=t.current.alternate,g&&!rC(s)){d=$f(t,r,!1),g=!1;continue}if(d===2){if(g=r,t.errorRecoveryDisabledLanes&g)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=t;d=yc;var N=T.current.memoizedState.isDehydrated;if(N&&(Go(T,_).flags|=256),_=$f(T,_,!1),_!==2){if(zf&&!N){T.errorRecoveryDisabledLanes|=g,js|=g,d=4;break e}g=hr,hr=d,g!==null&&(hr===null?hr=g:hr.push.apply(hr,g))}d=_}if(g=!1,d!==2)continue}}if(d===1){Go(t,0),Ha(t,r,0,!0);break}e:{switch(l=t,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ha(l,r,kr,!Pa);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Yu+300-At(),10<d)){if(Ha(l,r,kr,!Pa),cs(l,0,!0)!==0)break e;ia=r,l.timeoutHandle=nb(Av.bind(null,l,s,hr,Ju,Bf,r,kr,js,Ko,Pa,g,"Throttled",-0,0),d);break e}Av(l,s,hr,Ju,Bf,r,kr,js,Ko,Pa,g,null,-0,0)}}break}while(!0);Ai(t)}function Av(t,r,s,l,d,g,_,T,N,Z,le,de,te,re){if(t.timeoutHandle=-1,de=r.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:or},vv(r,g,de);var ze=(g&62914560)===g?Yu-At():(g&4194048)===g?Sv-At():0;if(ze=BC(de,ze),ze!==null){ia=g,t.cancelPendingCommit=ze(Uv.bind(null,t,r,g,s,l,d,_,T,N,le,de,null,te,re)),Ha(t,g,_,!Z);return}}Uv(t,r,g,s,l,d,_,T,N)}function rC(t){for(var r=t;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var d=s[l],g=d.getSnapshot;d=d.value;try{if(!Qn(g(),d))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ha(t,r,s,l){r&=~Hf,r&=~js,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var g=31-De(d),_=1<<g;l[g]=-1,d&=~_}s!==0&&us(t,s,r)}function Xu(){return(It&6)===0?(bc(0),!1):!0}function Ff(){if(yt!==null){if(Mt===0)var t=yt.return;else t=yt,Vi=Os=null,of(t),Uo=null,tc=0,t=yt;for(;t!==null;)rv(t.alternate,t),t=t.return;yt=null}}function Go(t,r){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,CC(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),ia=0,Ff(),$t=t,yt=s=Fi(t.current,null),bt=r,Mt=0,Ar=null,Pa=!1,Bo=Ni(t,r),zf=!1,Ko=kr=Hf=js=ja=sn=0,hr=yc=null,Bf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-De(l),g=1<<d;r|=t[d],l&=~g}return ra=r,st(),s}function kv(t,r){ct=null,$.H=cc,r===Do||r===Au?(r=qm(),Mt=3):r===Yd?(r=qm(),Mt=4):Mt=r===Cf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ar=r,yt===null&&(sn=1,Hu(t,Lr(r,t.current)))}function Ov(){var t=Er.current;return t===null?!0:(bt&4194048)===bt?Kr===null:(bt&62914560)===bt||(bt&536870912)!==0?t===Kr:!1}function Rv(){var t=$.H;return $.H=cc,t===null?cc:t}function xv(){var t=$.A;return $.A=tC,t}function Wu(){sn=4,Pa||(bt&4194048)!==bt&&Er.current!==null||(Bo=!0),(ja&134217727)===0&&(js&134217727)===0||$t===null||Ha($t,bt,kr,!1)}function $f(t,r,s){var l=It;It|=2;var d=Rv(),g=xv();($t!==t||bt!==r)&&(Ju=null,Go(t,r)),r=!1;var _=sn;e:do try{if(Mt!==0&&yt!==null){var T=yt,N=Ar;switch(Mt){case 8:Ff(),_=6;break e;case 3:case 2:case 9:case 6:Er.current===null&&(r=!0);var Z=Mt;if(Mt=0,Ar=null,Fo(t,T,N,Z),s&&Bo){_=0;break e}break;default:Z=Mt,Mt=0,Ar=null,Fo(t,T,N,Z)}}iC(),_=sn;break}catch(le){kv(t,le)}while(!0);return r&&t.shellSuspendCounter++,Vi=Os=null,It=l,$.H=d,$.A=g,yt===null&&($t=null,bt=0,st()),_}function iC(){for(;yt!==null;)Iv(yt)}function aC(t,r){var s=It;It|=2;var l=Rv(),d=xv();$t!==t||bt!==r?(Ju=null,Qu=At()+500,Go(t,r)):Bo=Ni(t,r);e:do try{if(Mt!==0&&yt!==null){r=yt;var g=Ar;t:switch(Mt){case 1:Mt=0,Ar=null,Fo(t,r,g,1);break;case 2:case 9:if(Bm(g)){Mt=0,Ar=null,Nv(r);break}r=function(){Mt!==2&&Mt!==9||$t!==t||(Mt=7),Ai(t)},g.then(r,r);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Bm(g)?(Mt=0,Ar=null,Nv(r)):(Mt=0,Ar=null,Fo(t,r,g,7));break;case 5:var _=null;switch(yt.tag){case 26:_=yt.memoizedState;case 5:case 27:var T=yt;if(_?yb(_):T.stateNode.complete){Mt=0,Ar=null;var N=T.sibling;if(N!==null)yt=N;else{var Z=T.return;Z!==null?(yt=Z,Zu(Z)):yt=null}break t}}Mt=0,Ar=null,Fo(t,r,g,5);break;case 6:Mt=0,Ar=null,Fo(t,r,g,6);break;case 8:Ff(),sn=6;break e;default:throw Error(i(462))}}sC();break}catch(le){kv(t,le)}while(!0);return Vi=Os=null,$.H=l,$.A=d,It=s,yt!==null?0:($t=null,bt=0,st(),sn)}function sC(){for(;yt!==null&&!er();)Iv(yt)}function Iv(t){var r=tv(t.alternate,t,ra);t.memoizedProps=t.pendingProps,r===null?Zu(t):yt=r}function Nv(t){var r=t,s=r.alternate;switch(r.tag){case 15:case 0:r=Qy(s,r,r.pendingProps,r.type,void 0,bt);break;case 11:r=Qy(s,r,r.pendingProps,r.type.render,r.ref,bt);break;case 5:of(r);default:rv(s,r),r=yt=xm(r,ra),r=tv(s,r,ra)}t.memoizedProps=t.pendingProps,r===null?Zu(t):yt=r}function Fo(t,r,s,l){Vi=Os=null,of(r),Uo=null,tc=0;var d=r.return;try{if(YS(t,d,r,s,bt)){sn=1,Hu(t,Lr(s,t.current)),yt=null;return}}catch(g){if(d!==null)throw yt=d,g;sn=1,Hu(t,Lr(s,t.current)),yt=null;return}r.flags&32768?(Et||l===1?t=!0:Bo||(bt&536870912)!==0?t=!1:(Pa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Er.current,l!==null&&l.tag===13&&(l.flags|=16384))),Dv(r,t)):Zu(r)}function Zu(t){var r=t;do{if((r.flags&32768)!==0){Dv(r,Pa);return}t=r.return;var s=XS(r.alternate,r,ra);if(s!==null){yt=s;return}if(r=r.sibling,r!==null){yt=r;return}yt=r=t}while(r!==null);sn===0&&(sn=5)}function Dv(t,r){do{var s=WS(t.alternate,t);if(s!==null){s.flags&=32767,yt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(t=t.sibling,t!==null)){yt=t;return}yt=t=s}while(t!==null);sn=6,yt=null}function Uv(t,r,s,l,d,g,_,T,N){t.cancelPendingCommit=null;do eh();while(Tn!==0);if((It&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=Qe,Rl(t,s,g,_,T,N),t===$t&&(yt=$t=null,bt=0),qo=r,za=t,ia=s,Kf=g,qf=d,Cv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,uC(xn,function(){return zv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,d=se.p,se.p=2,_=It,It|=4;try{ZS(t,r,s)}finally{It=_,se.p=d,$.T=l}}Tn=1,Mv(),Pv(),jv()}}function Mv(){if(Tn===1){Tn=0;var t=za,r=qo,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=$.T,$.T=null;var l=se.p;se.p=2;var d=It;It|=4;try{pv(r,t);var g=ig,_=w(t.containerInfo),T=g.focusedElem,N=g.selectionRange;if(_!==T&&T&&T.ownerDocument&&b(T.ownerDocument.documentElement,T)){if(N!==null&&C(T)){var Z=N.start,le=N.end;if(le===void 0&&(le=Z),"selectionStart"in T)T.selectionStart=Z,T.selectionEnd=Math.min(le,T.value.length);else{var de=T.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var re=te.getSelection(),ze=T.textContent.length,et=Math.min(N.start,ze),Kt=N.end===void 0?et:Math.min(N.end,ze);!re.extend&&et>Kt&&(_=Kt,Kt=et,et=_);var q=v(T,et),z=v(T,Kt);if(q&&z&&(re.rangeCount!==1||re.anchorNode!==q.node||re.anchorOffset!==q.offset||re.focusNode!==z.node||re.focusOffset!==z.offset)){var W=de.createRange();W.setStart(q.node,q.offset),re.removeAllRanges(),et>Kt?(re.addRange(W),re.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),re.addRange(W))}}}}for(de=[],re=T;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<de.length;T++){var he=de[T];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}dh=!!rg,ig=rg=null}finally{It=d,se.p=l,$.T=s}}t.current=r,Tn=2}}function Pv(){if(Tn===2){Tn=0;var t=za,r=qo,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=$.T,$.T=null;var l=se.p;se.p=2;var d=It;It|=4;try{uv(t,r.alternate,r)}finally{It=d,se.p=l,$.T=s}}Tn=3}}function jv(){if(Tn===4||Tn===3){Tn=0,vr();var t=za,r=qo,s=ia,l=Cv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Tn=5:(Tn=0,qo=za=null,Lv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(La=null),fa(s),r=r.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot($n,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=$.T,d=se.p,se.p=2,$.T=null;try{for(var g=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];g(T.value,{componentStack:T.stack})}}finally{$.T=r,se.p=d}}(ia&3)!==0&&eh(),Ai(t),d=t.pendingLanes,(s&261930)!==0&&(d&42)!==0?t===Gf?vc++:(vc=0,Gf=t):vc=0,bc(0)}}function Lv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Zl(r)))}function eh(){return Mv(),Pv(),jv(),zv()}function zv(){if(Tn!==5)return!1;var t=za,r=Kf;Kf=0;var s=fa(ia),l=$.T,d=se.p;try{se.p=32>s?32:s,$.T=null,s=qf,qf=null;var g=za,_=ia;if(Tn=0,qo=za=null,ia=0,(It&6)!==0)throw Error(i(331));var T=It;if(It|=4,_v(g.current),yv(g,g.current,_,s),It=T,bc(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot($n,g)}catch{}return!0}finally{se.p=d,$.T=l,Lv(t,r)}}function Hv(t,r,s){r=Lr(s,r),r=Sf(t.stateNode,r,2),t=Na(t,r,2),t!==null&&(Dr(t,2),Ai(t))}function Pt(t,r,s){if(t.tag===3)Hv(t,t,s);else for(;r!==null;){if(r.tag===3){Hv(r,t,s);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(La===null||!La.has(l))){t=Lr(s,t),s=By(2),l=Na(r,s,2),l!==null&&(Ky(s,l,r,t),Dr(l,2),Ai(l));break}}r=r.return}}function Vf(t,r,s){var l=t.pingCache;if(l===null){l=t.pingCache=new nC;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(s)||(zf=!0,d.add(s),t=oC.bind(null,t,r,s),r.then(t,t))}function oC(t,r,s){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,$t===t&&(bt&s)===s&&(sn===4||sn===3&&(bt&62914560)===bt&&300>At()-Yu?(It&2)===0&&Go(t,0):Hf|=s,Ko===bt&&(Ko=0)),Ai(t)}function Bv(t,r){r===0&&(r=su()),t=Ut(t,r),t!==null&&(Dr(t,r),Ai(t))}function lC(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Bv(t,s)}function cC(t,r){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Bv(t,s)}function uC(t,r){return Gt(t,r)}var th=null,$o=null,Yf=!1,nh=!1,Qf=!1,Ba=0;function Ai(t){t!==$o&&t.next===null&&($o===null?th=$o=t:$o=$o.next=t),nh=!0,Yf||(Yf=!0,dC())}function bc(t,r){if(!Qf&&nh){Qf=!0;do for(var s=!1,l=th;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var g=0;else{var _=l.suspendedLanes,T=l.pingedLanes;g=(1<<31-De(42|t)+1)-1,g&=d&~(_&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,Fv(l,g))}else g=bt,g=cs(l,l===$t?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Ni(l,g)||(s=!0,Fv(l,g));l=l.next}while(s);Qf=!1}}function hC(){Kv()}function Kv(){nh=Yf=!1;var t=0;Ba!==0&&SC()&&(t=Ba);for(var r=At(),s=null,l=th;l!==null;){var d=l.next,g=qv(l,r);g===0?(l.next=null,s===null?th=d:s.next=d,d===null&&($o=s)):(s=l,(t!==0||(g&3)!==0)&&(nh=!0)),l=d}Tn!==0&&Tn!==5||bc(t),Ba!==0&&(Ba=0)}function qv(t,r){for(var s=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var _=31-De(g),T=1<<_,N=d[_];N===-1?((T&s)===0||(T&l)!==0)&&(d[_]=Ad(T,r)):N<=r&&(t.expiredLanes|=T),g&=~T}if(r=$t,s=bt,s=cs(t,t===r?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===r&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ln(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Ni(t,s)){if(r=s&-s,r===t.callbackPriority)return r;switch(l!==null&&ln(l),fa(s)){case 2:case 8:s=Xt;break;case 32:s=xn;break;case 268435456:s=xi;break;default:s=xn}return l=Gv.bind(null,t),s=Gt(s,l),t.callbackPriority=r,t.callbackNode=s,r}return l!==null&&l!==null&&ln(l),t.callbackPriority=2,t.callbackNode=null,2}function Gv(t,r){if(Tn!==0&&Tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(eh()&&t.callbackNode!==s)return null;var l=bt;return l=cs(t,t===$t?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Tv(t,l,r),qv(t,At()),t.callbackNode!=null&&t.callbackNode===s?Gv.bind(null,t):null)}function Fv(t,r){if(eh())return null;Tv(t,r,!0)}function dC(){EC(function(){(It&6)!==0?Gt(St,hC):Kv()})}function Jf(){if(Ba===0){var t=Io;t===0&&(t=Re,Re<<=1,(Re&261888)===0&&(Re=256)),Ba=t}return Ba}function $v(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Zr(""+t)}function Vv(t,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,t.id&&s.setAttribute("form",t.id),r.parentNode.insertBefore(s,r),t=new FormData(t),s.parentNode.removeChild(s),t}function fC(t,r,s,l,d){if(r==="submit"&&s&&s.stateNode===d){var g=$v((d[un]||null).action),_=l.submitter;_&&(r=(r=_[un]||null)?$v(r.formAction):_.getAttribute("formAction"),r!==null&&(g=r,_=null));var T=new uo("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ba!==0){var N=_?Vv(d,_):new FormData(d);mf(s,{pending:!0,data:N,method:d.method,action:g},null,N)}}else typeof g=="function"&&(T.preventDefault(),N=_?Vv(d,_):new FormData(d),mf(s,{pending:!0,data:N,method:d.method,action:g},g,N))},currentTarget:d}]})}}for(var Xf=0;Xf<Ie.length;Xf++){var Wf=Ie[Xf],gC=Wf.toLowerCase(),pC=Wf[0].toUpperCase()+Wf.slice(1);_e(gC,"on"+pC)}_e(ee,"onAnimationEnd"),_e(F,"onAnimationIteration"),_e(oe,"onAnimationStart"),_e("dblclick","onDoubleClick"),_e("focusin","onFocus"),_e("focusout","onBlur"),_e(ve,"onTransitionRun"),_e(Te,"onTransitionStart"),_e(Ae,"onTransitionCancel"),_e(be,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function Yv(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],d=l.event;l=l.listeners;e:{var g=void 0;if(r)for(var _=l.length-1;0<=_;_--){var T=l[_],N=T.instance,Z=T.currentTarget;if(T=T.listener,N!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=Z;try{g(d)}catch(le){Pe(le)}d.currentTarget=null,g=N}else for(_=0;_<l.length;_++){if(T=l[_],N=T.instance,Z=T.currentTarget,T=T.listener,N!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=Z;try{g(d)}catch(le){Pe(le)}d.currentTarget=null,g=N}}}}function vt(t,r){var s=r[ga];s===void 0&&(s=r[ga]=new Set);var l=t+"__bubble";s.has(l)||(Qv(r,t,2,!1),s.add(l))}function Zf(t,r,s){var l=0;r&&(l|=4),Qv(s,t,l,r)}var rh="_reactListening"+Math.random().toString(36).slice(2);function eg(t){if(!t[rh]){t[rh]=!0,Di.forEach(function(s){s!=="selectionchange"&&(mC.has(s)||Zf(s,!1,t),Zf(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[rh]||(r[rh]=!0,Zf("selectionchange",!1,r))}}function Qv(t,r,s,l){switch(Eb(r)){case 2:var d=GC;break;case 8:d=FC;break;default:d=pg}s=d.bind(null,r,s,t),d=void 0,!jl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,s,{capture:!0,passive:d}):t.addEventListener(r,s,!0):d!==void 0?t.addEventListener(r,s,{passive:d}):t.addEventListener(r,s,!1)}function tg(t,r,s,l,d){var g=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=mi(T),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=g=_;continue e}T=T.parentNode}}l=l.return}ma(function(){var Z=g,le=lo(s),de=[];e:{var te=Me.get(t);if(te!==void 0){var re=uo,ze=t;switch(t){case"keypress":if(ba(s)===0)break e;case"keydown":case"keyup":re=vo;break;case"focusin":ze="focus",re=_a;break;case"focusout":ze="blur",re=_a;break;case"beforeblur":case"afterblur":re=_a;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Gl;break;case ee:case F:case oe:re=hu;break;case be:re=Fl;break;case"scroll":case"scrollend":re=ho;break;case"wheel":re=_o;break;case"copy":case"cut":case"paste":re=wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=ql;break;case"toggle":case"beforetoggle":re=gu}var et=(r&4)!==0,Kt=!et&&(t==="scroll"||t==="scrollend"),q=et?te!==null?te+"Capture":null:te;et=[];for(var z=Z,W;z!==null;){var he=z;if(W=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||W===null||q===null||(he=Li(z,q),he!=null&&et.push(wc(z,he,W))),Kt)break;z=z.return}0<et.length&&(te=new re(te,ze,null,s,le),de.push({event:te,listeners:et}))}}if((r&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",te&&s!==Mr&&(ze=s.relatedTarget||s.fromElement)&&(mi(ze)||ze[tr]))break e;if((re||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,re?(ze=s.relatedTarget||s.toElement,re=Z,ze=ze?mi(ze):null,ze!==null&&(Kt=c(ze),et=ze.tag,ze!==Kt||et!==5&&et!==27&&et!==6)&&(ze=null)):(re=null,ze=Z),re!==ze)){if(et=go,he="onMouseLeave",q="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(et=ql,he="onPointerLeave",q="onPointerEnter",z="pointer"),Kt=re==null?te:wr(re),W=ze==null?te:wr(ze),te=new et(he,z+"leave",re,s,le),te.target=Kt,te.relatedTarget=W,he=null,mi(le)===Z&&(et=new et(q,z+"enter",ze,s,le),et.target=W,et.relatedTarget=Kt,he=et),Kt=he,re&&ze)t:{for(et=yC,q=re,z=ze,W=0,he=q;he;he=et(he))W++;he=0;for(var Xe=z;Xe;Xe=et(Xe))he++;for(;0<W-he;)q=et(q),W--;for(;0<he-W;)z=et(z),he--;for(;W--;){if(q===z||z!==null&&q===z.alternate){et=q;break t}q=et(q),z=et(z)}et=null}else et=null;re!==null&&Jv(de,te,re,et,!1),ze!==null&&Kt!==null&&Jv(de,Kt,ze,et,!0)}}e:{if(te=Z?wr(Z):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var Ot=Ts;else if(Co(te))if(jr)Ot=Ea;else{Ot=Gi;var Ge=_u}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Pl(Z.elementType)&&(Ot=Ts):Ot=Jl;if(Ot&&(Ot=Ot(t,Z))){Ql(de,Ot,s,le);break e}Ge&&Ge(t,te,Z),t==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&ys(te,"number",te.value)}switch(Ge=Z?wr(Z):window,t){case"focusin":(Co(Ge)||Ge.contentEditable==="true")&&(k=Ge,U=Z,G=null);break;case"focusout":G=U=k=null;break;case"mousedown":M=!0;break;case"contextmenu":case"mouseup":case"dragend":M=!1,D(de,s,le);break;case"selectionchange":if(A)break;case"keydown":case"keyup":D(de,s,le)}var ut;if(Cs)e:{switch(t){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else Ki?Yl(t,s)&&(_t="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_t="onCompositionStart");_t&&(wo&&s.locale!=="ko"&&(Ki||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Ki&&(ut=va()):(Pr=le,co="value"in Pr?Pr.value:Pr.textContent,Ki=!0)),Ge=ih(Z,_t),0<Ge.length&&(_t=new yo(_t,t,null,s,le),de.push({event:_t,listeners:Ge}),ut?_t.data=ut:(ut=mu(s),ut!==null&&(_t.data=ut)))),(ut=Nd?yu(t,s):Dd(t,s))&&(_t=ih(Z,"onBeforeInput"),0<_t.length&&(Ge=new yo("onBeforeInput","beforeinput",null,s,le),de.push({event:Ge,listeners:_t}),Ge.data=ut)),fC(de,t,Z,s,le)}Yv(de,r)})}function wc(t,r,s){return{instance:t,listener:r,currentTarget:s}}function ih(t,r){for(var s=r+"Capture",l=[];t!==null;){var d=t,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Li(t,s),d!=null&&l.unshift(wc(t,d,g)),d=Li(t,r),d!=null&&l.push(wc(t,d,g))),t.tag===3)return l;t=t.return}return[]}function yC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,r,s,l,d){for(var g=r._reactName,_=[];s!==null&&s!==l;){var T=s,N=T.alternate,Z=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||Z===null||(N=Z,d?(Z=Li(s,g),Z!=null&&_.unshift(wc(s,Z,N))):d||(Z=Li(s,g),Z!=null&&_.push(wc(s,Z,N)))),s=s.return}_.length!==0&&t.push({event:r,listeners:_})}var vC=/\r\n?/g,bC=/\u0000|\uFFFD/g;function Xv(t){return(typeof t=="string"?t:""+t).replace(vC,`
`).replace(bC,"")}function Wv(t,r){return r=Xv(r),Xv(t)===r}function Bt(t,r,s,l,d,g){switch(s){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Mi(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Mi(t,""+l);break;case"className":ps(t,"class",l);break;case"tabIndex":ps(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ps(t,s,l);break;case"style":Ml(t,l,g);break;case"data":if(r!=="object"){ps(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Zr(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(r!=="input"&&Bt(t,r,"name",d.name,d,null),Bt(t,r,"formEncType",d.formEncType,d,null),Bt(t,r,"formMethod",d.formMethod,d,null),Bt(t,r,"formTarget",d.formTarget,d,null)):(Bt(t,r,"encType",d.encType,d,null),Bt(t,r,"method",d.method,d,null),Bt(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Zr(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=or);break;case"onScroll":l!=null&&vt("scroll",t);break;case"onScrollEnd":l!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Zr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":vt("beforetoggle",t),vt("toggle",t),dt(t,"popover",l);break;case"xlinkActuate":Ur(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ur(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ur(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ur(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ur(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ur(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ur(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ur(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ur(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":dt(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Rd.get(s)||s,dt(t,s,l))}}function ng(t,r,s,l,d,g){switch(s){case"style":Ml(t,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Mi(t,l):(typeof l=="number"||typeof l=="bigint")&&Mi(t,""+l);break;case"onScroll":l!=null&&vt("scroll",t);break;case"onScrollEnd":l!=null&&vt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),r=s.slice(2,d?s.length-7:void 0),g=t[un]||null,g=g!=null?g[s]:null,typeof g=="function"&&t.removeEventListener(r,g,d),typeof l=="function")){typeof g!="function"&&g!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(r,l,d);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):dt(t,s,l)}}}function Bn(t,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var l=!1,d=!1,g;for(g in s)if(s.hasOwnProperty(g)){var _=s[g];if(_!=null)switch(g){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(t,r,g,_,s,null)}}d&&Bt(t,r,"srcSet",s.srcSet,s,null),l&&Bt(t,r,"src",s.src,s,null);return;case"input":vt("invalid",t);var T=g=_=d=null,N=null,Z=null;for(l in s)if(s.hasOwnProperty(l)){var le=s[l];if(le!=null)switch(l){case"name":d=le;break;case"type":_=le;break;case"checked":N=le;break;case"defaultChecked":Z=le;break;case"value":g=le;break;case"defaultValue":T=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:Bt(t,r,l,le,s,null)}}oo(t,g,T,N,Z,_,d,!1);return;case"select":vt("invalid",t),l=_=g=null;for(d in s)if(s.hasOwnProperty(d)&&(T=s[d],T!=null))switch(d){case"value":g=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:Bt(t,r,d,T,s,null)}r=g,s=_,t.multiple=!!l,r!=null?Wr(t,!!l,r,!1):s!=null&&Wr(t,!!l,s,!0);return;case"textarea":vt("invalid",t),g=d=l=null;for(_ in s)if(s.hasOwnProperty(_)&&(T=s[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":d=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Bt(t,r,_,T,s,null)}vs(t,l,d,g);return;case"option":for(N in s)s.hasOwnProperty(N)&&(l=s[N],l!=null)&&(N==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Bt(t,r,N,l,s,null));return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(l=0;l<_c.length;l++)vt(_c[l],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in s)if(s.hasOwnProperty(Z)&&(l=s[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(t,r,Z,l,s,null)}return;default:if(Pl(r)){for(le in s)s.hasOwnProperty(le)&&(l=s[le],l!==void 0&&ng(t,r,le,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&Bt(t,r,T,l,s,null))}function _C(t,r,s,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,_=null,T=null,N=null,Z=null,le=null;for(re in s){var de=s[re];if(s.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":N=de;default:l.hasOwnProperty(re)||Bt(t,r,re,null,l,de)}}for(var te in l){var re=l[te];if(de=s[te],l.hasOwnProperty(te)&&(re!=null||de!=null))switch(te){case"type":g=re;break;case"name":d=re;break;case"checked":Z=re;break;case"defaultChecked":le=re;break;case"value":_=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:re!==de&&Bt(t,r,te,re,l,de)}}vi(t,_,T,N,Z,le,g,d);return;case"select":re=_=T=te=null;for(g in s)if(N=s[g],s.hasOwnProperty(g)&&N!=null)switch(g){case"value":break;case"multiple":re=N;default:l.hasOwnProperty(g)||Bt(t,r,g,null,l,N)}for(d in l)if(g=l[d],N=s[d],l.hasOwnProperty(d)&&(g!=null||N!=null))switch(d){case"value":te=g;break;case"defaultValue":T=g;break;case"multiple":_=g;default:g!==N&&Bt(t,r,d,g,l,N)}r=T,s=_,l=re,te!=null?Wr(t,!!s,te,!1):!!l!=!!s&&(r!=null?Wr(t,!!s,r,!0):Wr(t,!!s,s?[]:"",!1));return;case"textarea":re=te=null;for(T in s)if(d=s[T],s.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Bt(t,r,T,null,l,d)}for(_ in l)if(d=l[_],g=s[_],l.hasOwnProperty(_)&&(d!=null||g!=null))switch(_){case"value":te=d;break;case"defaultValue":re=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Bt(t,r,_,d,l,g)}Ul(t,te,re);return;case"option":for(var ze in s)te=s[ze],s.hasOwnProperty(ze)&&te!=null&&!l.hasOwnProperty(ze)&&(ze==="selected"?t.selected=!1:Bt(t,r,ze,null,l,te));for(N in l)te=l[N],re=s[N],l.hasOwnProperty(N)&&te!==re&&(te!=null||re!=null)&&(N==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":Bt(t,r,N,te,l,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in s)te=s[et],s.hasOwnProperty(et)&&te!=null&&!l.hasOwnProperty(et)&&Bt(t,r,et,null,l,te);for(Z in l)if(te=l[Z],re=s[Z],l.hasOwnProperty(Z)&&te!==re&&(te!=null||re!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:Bt(t,r,Z,te,l,re)}return;default:if(Pl(r)){for(var Kt in s)te=s[Kt],s.hasOwnProperty(Kt)&&te!==void 0&&!l.hasOwnProperty(Kt)&&ng(t,r,Kt,void 0,l,te);for(le in l)te=l[le],re=s[le],!l.hasOwnProperty(le)||te===re||te===void 0&&re===void 0||ng(t,r,le,te,l,re);return}}for(var q in s)te=s[q],s.hasOwnProperty(q)&&te!=null&&!l.hasOwnProperty(q)&&Bt(t,r,q,null,l,te);for(de in l)te=l[de],re=s[de],!l.hasOwnProperty(de)||te===re||te==null&&re==null||Bt(t,r,de,te,l,re)}function Zv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var d=s[l],g=d.transferSize,_=d.initiatorType,T=d.duration;if(g&&T&&Zv(_)){for(_=0,T=d.responseEnd,l+=1;l<s.length;l++){var N=s[l],Z=N.startTime;if(Z>T)break;var le=N.transferSize,de=N.initiatorType;le&&Zv(de)&&(N=N.responseEnd,_+=le*(N<T?1:(T-Z)/(N-Z)))}if(--l,r+=8*(g+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var rg=null,ig=null;function ah(t){return t.nodeType===9?t:t.ownerDocument}function eb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function ag(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sg=null;function SC(){var t=window.event;return t&&t.type==="popstate"?t===sg?!1:(sg=t,!0):(sg=null,!1)}var nb=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,rb=typeof Promise=="function"?Promise:void 0,EC=typeof queueMicrotask=="function"?queueMicrotask:typeof rb<"u"?function(t){return rb.resolve(null).then(t).catch(TC)}:nb;function TC(t){setTimeout(function(){throw t})}function Ka(t){return t==="head"}function ib(t,r){var s=r,l=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(d),Jo(r);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Sc(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Sc(s);for(var g=s.firstChild;g;){var _=g.nextSibling,T=g.nodeName;g[_r]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=_}}else s==="body"&&Sc(t.ownerDocument.body);s=d}while(s);Jo(r)}function ab(t,r){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?r?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(r?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function og(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":og(s),ao(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function AC(t,r,s,l){for(;t.nodeType===1;){var d=s;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_r])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=qr(t.nextSibling),t===null)break}return null}function kC(t,r,s){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=qr(t.nextSibling),t===null))return null;return t}function sb(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=qr(t.nextSibling),t===null))return null;return t}function lg(t){return t.data==="$?"||t.data==="$~"}function cg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function OC(t,r){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||s.readyState!=="loading")r();else{var l=function(){r(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var ug=null;function ob(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(r===0)return qr(t.nextSibling);r--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||r++}t=t.nextSibling}return null}function lb(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(r===0)return t;r--}else s!=="/$"&&s!=="/&"||r++}t=t.previousSibling}return null}function cb(t,r,s){switch(r=ah(s),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Sc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ao(t)}var Gr=new Map,ub=new Set;function sh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var aa=se.d;se.d={f:RC,r:xC,D:IC,C:NC,L:DC,m:UC,X:PC,S:MC,M:jC};function RC(){var t=aa.f(),r=Xu();return t||r}function xC(t){var r=Lt(t);r!==null&&r.tag===5&&r.type==="form"?ky(r):aa.r(t)}var Vo=typeof document>"u"?null:document;function hb(t,r,s){var l=Vo;if(l&&typeof r=="string"&&r){var d=In(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),ub.has(d)||(ub.add(d),t={rel:t,crossOrigin:s,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Bn(r,"link",t),hn(r),l.head.appendChild(r)))}}function IC(t){aa.D(t),hb("dns-prefetch",t,null)}function NC(t,r){aa.C(t,r),hb("preconnect",t,r)}function DC(t,r,s){aa.L(t,r,s);var l=Vo;if(l&&t&&r){var d='link[rel="preload"][as="'+In(r)+'"]';r==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+In(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+In(s.imageSizes)+'"]')):d+='[href="'+In(t)+'"]';var g=d;switch(r){case"style":g=Yo(t);break;case"script":g=Qo(t)}Gr.has(g)||(t=E({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:t,as:r},s),Gr.set(g,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Cc(g))||r==="script"&&l.querySelector(Ec(g))||(r=l.createElement("link"),Bn(r,"link",t),hn(r),l.head.appendChild(r)))}}function UC(t,r){aa.m(t,r);var s=Vo;if(s&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+In(l)+'"][href="'+In(t)+'"]',g=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Qo(t)}if(!Gr.has(g)&&(t=E({rel:"modulepreload",href:t},r),Gr.set(g,t),s.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ec(g)))return}l=s.createElement("link"),Bn(l,"link",t),hn(l),s.head.appendChild(l)}}}function MC(t,r,s){aa.S(t,r,s);var l=Vo;if(l&&t){var d=Vn(l).hoistableStyles,g=Yo(t);r=r||"default";var _=d.get(g);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Cc(g)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},s),(s=Gr.get(g))&&hg(t,s);var N=_=l.createElement("link");hn(N),Bn(N,"link",t),N._p=new Promise(function(Z,le){N.onload=Z,N.onerror=le}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,oh(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(g,_)}}}function PC(t,r){aa.X(t,r);var s=Vo;if(s&&t){var l=Vn(s).hoistableScripts,d=Qo(t),g=l.get(d);g||(g=s.querySelector(Ec(d)),g||(t=E({src:t,async:!0},r),(r=Gr.get(d))&&dg(t,r),g=s.createElement("script"),hn(g),Bn(g,"link",t),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function jC(t,r){aa.M(t,r);var s=Vo;if(s&&t){var l=Vn(s).hoistableScripts,d=Qo(t),g=l.get(d);g||(g=s.querySelector(Ec(d)),g||(t=E({src:t,async:!0,type:"module"},r),(r=Gr.get(d))&&dg(t,r),g=s.createElement("script"),hn(g),Bn(g,"link",t),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function db(t,r,s,l){var d=(d=Ke.current)?sh(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=Yo(s.href),s=Vn(d).hoistableStyles,l=s.get(r),l||(l={type:"style",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Yo(s.href);var g=Vn(d).hoistableStyles,_=g.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,_),(g=d.querySelector(Cc(t)))&&!g._p&&(_.instance=g,_.state.loading=5),Gr.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Gr.set(t,s),g||LC(d,t,s,_.state))),r&&l===null)throw Error(i(528,""));return _}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Qo(s),s=Vn(d).hoistableScripts,l=s.get(r),l||(l={type:"script",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Yo(t){return'href="'+In(t)+'"'}function Cc(t){return'link[rel="stylesheet"]['+t+"]"}function fb(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function LC(t,r,s,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Bn(r,"link",s),hn(r),t.head.appendChild(r))}function Qo(t){return'[src="'+In(t)+'"]'}function Ec(t){return"script[async]"+t}function gb(t,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+In(s.href)+'"]');if(l)return r.instance=l,hn(l),l;var d=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),hn(l),Bn(l,"style",d),oh(l,s.precedence,t),r.instance=l;case"stylesheet":d=Yo(s.href);var g=t.querySelector(Cc(d));if(g)return r.state.loading|=4,r.instance=g,hn(g),g;l=fb(s),(d=Gr.get(d))&&hg(l,d),g=(t.ownerDocument||t).createElement("link"),hn(g);var _=g;return _._p=new Promise(function(T,N){_.onload=T,_.onerror=N}),Bn(g,"link",l),r.state.loading|=4,oh(g,s.precedence,t),r.instance=g;case"script":return g=Qo(s.src),(d=t.querySelector(Ec(g)))?(r.instance=d,hn(d),d):(l=s,(d=Gr.get(g))&&(l=E({},s),dg(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),hn(d),Bn(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,oh(l,s.precedence,t));return r.instance}function oh(t,r,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,g=d,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===r)g=T;else if(g!==d)break}g?g.parentNode.insertBefore(t,g.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(t,r.firstChild))}function hg(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function dg(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var lh=null;function pb(t,r,s){if(lh===null){var l=new Map,d=lh=new Map;d.set(s,l)}else d=lh,l=d.get(s),l||(l=new Map,d.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),d=0;d<s.length;d++){var g=s[d];if(!(g[_r]||g[Yt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var _=g.getAttribute(r)||"";_=t+_;var T=l.get(_);T?T.push(g):l.set(_,[g])}}return l}function mb(t,r,s){t=t.ownerDocument||t,t.head.insertBefore(s,r==="title"?t.querySelector("head > title"):null)}function zC(t,r,s){if(s===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function yb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function HC(t,r,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Yo(l.href),g=r.querySelector(Cc(d));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=ch.bind(t),r.then(t,t)),s.state.loading|=4,s.instance=g,hn(g);return}g=r.ownerDocument||r,l=fb(l),(d=Gr.get(d))&&hg(l,d),g=g.createElement("link"),hn(g);var _=g;_._p=new Promise(function(T,N){_.onload=T,_.onerror=N}),Bn(g,"link",l),s.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=ch.bind(t),r.addEventListener("load",s),r.addEventListener("error",s))}}var fg=0;function BC(t,r){return t.stylesheets&&t.count===0&&hh(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&hh(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+r);0<t.imgBytes&&fg===0&&(fg=62500*wC());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&hh(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>fg?50:800)+r);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var uh=null;function hh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,uh=new Map,r.forEach(KC,t),uh=null,ch.call(t))}function KC(t,r){if(!(r.state.loading&4)){var s=uh.get(t);if(s)var l=s.get(null);else{s=new Map,uh.set(t,s);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var _=d[g];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),l=_)}l&&s.set(null,l)}d=r.instance,_=d.getAttribute("data-precedence"),g=s.get(_)||l,g===l&&s.set(null,d),s.set(_,d),this.count++,l=ch.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),g?g.parentNode.insertBefore(d,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Tc={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function qC(t,r,s,l,d,g,_,T,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function vb(t,r,s,l,d,g,_,T,N,Z,le,de){return t=new qC(t,r,s,_,N,Z,le,de,T),r=1,g===!0&&(r|=24),g=Cr(3,null,null,r),t.current=g,g.stateNode=t,r=Fd(),r.refCount++,t.pooledCache=r,r.refCount++,g.memoizedState={element:l,isDehydrated:s,cache:r},Qd(g),t}function bb(t){return t?(t=Ao,t):Ao}function _b(t,r,s,l,d,g){d=bb(d),l.context===null?l.context=d:l.pendingContext=d,l=Ia(r),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=Na(t,l,r),s!==null&&(dr(s,t,r),rc(s,t,r))}function wb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function gg(t,r){wb(t,r),(t=t.alternate)&&wb(t,r)}function Sb(t){if(t.tag===13||t.tag===31){var r=Ut(t,67108864);r!==null&&dr(r,t,67108864),gg(t,67108864)}}function Cb(t){if(t.tag===13||t.tag===31){var r=Or();r=xl(r);var s=Ut(t,r);s!==null&&dr(s,t,r),gg(t,r)}}var dh=!0;function GC(t,r,s,l){var d=$.T;$.T=null;var g=se.p;try{se.p=2,pg(t,r,s,l)}finally{se.p=g,$.T=d}}function FC(t,r,s,l){var d=$.T;$.T=null;var g=se.p;try{se.p=8,pg(t,r,s,l)}finally{se.p=g,$.T=d}}function pg(t,r,s,l){if(dh){var d=mg(l);if(d===null)tg(t,r,l,fh,s),Tb(t,l);else if(VC(d,t,r,s,l))l.stopPropagation();else if(Tb(t,l),r&4&&-1<$C.indexOf(t)){for(;d!==null;){var g=Lt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var _=Jr(g.pendingLanes);if(_!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var N=1<<31-De(_);T.entanglements[1]|=N,_&=~N}Ai(g),(It&6)===0&&(Qu=At()+500,bc(0))}}break;case 31:case 13:T=Ut(g,2),T!==null&&dr(T,g,2),Xu(),gg(g,2)}if(g=mg(l),g===null&&tg(t,r,l,fh,s),g===d)break;d=g}d!==null&&l.stopPropagation()}else tg(t,r,l,null,s)}}function mg(t){return t=lo(t),yg(t)}var fh=null;function yg(t){if(fh=null,t=mi(t),t!==null){var r=c(t);if(r===null)t=null;else{var s=r.tag;if(s===13){if(t=u(r),t!==null)return t;t=null}else if(s===31){if(t=f(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return fh=t,null}function Eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case St:return 2;case Xt:return 8;case xn:case Qr:return 32;case xi:return 268435456;default:return 32}default:return 32}}var vg=!1,qa=null,Ga=null,Fa=null,Ac=new Map,kc=new Map,$a=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(t,r){switch(t){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":Ac.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(r.pointerId)}}function Oc(t,r,s,l,d,g){return t===null||t.nativeEvent!==g?(t={blockedOn:r,domEventName:s,eventSystemFlags:l,nativeEvent:g,targetContainers:[d]},r!==null&&(r=Lt(r),r!==null&&Sb(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function VC(t,r,s,l,d){switch(r){case"focusin":return qa=Oc(qa,t,r,s,l,d),!0;case"dragenter":return Ga=Oc(Ga,t,r,s,l,d),!0;case"mouseover":return Fa=Oc(Fa,t,r,s,l,d),!0;case"pointerover":var g=d.pointerId;return Ac.set(g,Oc(Ac.get(g)||null,t,r,s,l,d)),!0;case"gotpointercapture":return g=d.pointerId,kc.set(g,Oc(kc.get(g)||null,t,r,s,l,d)),!0}return!1}function Ab(t){var r=mi(t.target);if(r!==null){var s=c(r);if(s!==null){if(r=s.tag,r===13){if(r=u(s),r!==null){t.blockedOn=r,ds(t.priority,function(){Cb(s)});return}}else if(r===31){if(r=f(s),r!==null){t.blockedOn=r,ds(t.priority,function(){Cb(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=mg(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Mr=l,s.target.dispatchEvent(l),Mr=null}else return r=Lt(s),r!==null&&Sb(r),t.blockedOn=s,!1;r.shift()}return!0}function kb(t,r,s){gh(t)&&s.delete(r)}function YC(){vg=!1,qa!==null&&gh(qa)&&(qa=null),Ga!==null&&gh(Ga)&&(Ga=null),Fa!==null&&gh(Fa)&&(Fa=null),Ac.forEach(kb),kc.forEach(kb)}function ph(t,r){t.blockedOn===r&&(t.blockedOn=null,vg||(vg=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,YC)))}var mh=null;function Ob(t){mh!==t&&(mh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){mh===t&&(mh=null);for(var r=0;r<t.length;r+=3){var s=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(yg(l||s)===null)continue;break}var g=Lt(s);g!==null&&(t.splice(r,3),r-=3,mf(g,{pending:!0,data:d,method:s.method,action:l},l,d))}}))}function Jo(t){function r(N){return ph(N,t)}qa!==null&&ph(qa,t),Ga!==null&&ph(Ga,t),Fa!==null&&ph(Fa,t),Ac.forEach(r),kc.forEach(r);for(var s=0;s<$a.length;s++){var l=$a[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<$a.length&&(s=$a[0],s.blockedOn===null);)Ab(s),s.blockedOn===null&&$a.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var d=s[l],g=s[l+1],_=d[un]||null;if(typeof g=="function")_||Ob(s);else if(_){var T=null;if(g&&g.hasAttribute("formAction")){if(d=g,_=g[un]||null)T=_.formAction;else if(yg(d)!==null)continue}else T=_.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),Ob(s)}}}function Rb(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function bg(t){this._internalRoot=t}yh.prototype.render=bg.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var s=r.current,l=Or();_b(s,l,t,r,null,null)},yh.prototype.unmount=bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;_b(t.current,2,null,t,null,null),Xu(),r[tr]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var r=hs();t={blockedOn:null,target:t,priority:r};for(var s=0;s<$a.length&&r!==0&&r<$a[s].priority;s++);$a.splice(s,0,t),s===0&&Ab(t)}};var xb=e.version;if(xb!=="19.2.4")throw Error(i(527,xb,"19.2.4"));se.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var QC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{$n=vh.inject(QC),mn=vh}catch{}}return xc.createRoot=function(t,r){if(!o(t))throw Error(i(299));var s=!1,l="",d=jy,g=Ly,_=zy;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=vb(t,1,!1,null,null,s,l,null,d,g,_,Rb),t[tr]=r.current,eg(t),new bg(r)},xc.hydrateRoot=function(t,r,s){if(!o(t))throw Error(i(299));var l=!1,d="",g=jy,_=Ly,T=zy,N=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.formState!==void 0&&(N=s.formState)),r=vb(t,1,!0,r,s??null,l,d,N,g,_,T,Rb),r.context=bb(null),s=r.current,l=Or(),l=xl(l),d=Ia(l),d.callback=null,Na(s,d,l),s=l,r.current.lanes=s,Dr(r,s),Ai(r),t[tr]=r.current,eg(t),new yh(r)},xc.version="19.2.4",xc}var Hb;function sE(){if(Hb)return Sg.exports;Hb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Sg.exports=aE(),Sg.exports}var oE=sE(),Uh={exports:{}},lE=Uh.exports,Bb;function cE(){return Bb||(Bb=1,(function(a,e){((n,i)=>{a.exports=i()})(lE,function(){var n=function(h,p){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(v,b){v.__proto__=b}:function(v,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(v[w]=b[w])}))(h,p)},i=function(){return(i=Object.assign||function(h){for(var p,v=1,b=arguments.length;v<b;v++)for(var w in p=arguments[v])Object.prototype.hasOwnProperty.call(p,w)&&(h[w]=p[w]);return h}).apply(this,arguments)};function o(h,p,v){for(var b,w=0,C=p.length;w<C;w++)!b&&w in p||((b=b||Array.prototype.slice.call(p,0,w))[w]=p[w]);return h.concat(b||Array.prototype.slice.call(p))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:XC,u=Object.keys,f=Array.isArray;function m(h,p){return typeof p=="object"&&u(p).forEach(function(v){h[v]=p[v]}),h}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var y=Object.getPrototypeOf,S={}.hasOwnProperty;function E(h,p){return S.call(h,p)}function O(h,p){typeof p=="function"&&(p=p(y(h))),(typeof Reflect>"u"?u:Reflect.ownKeys)(p).forEach(function(v){B(h,v,p[v])})}var R=Object.defineProperty;function B(h,p,v,b){R(h,p,m(v&&E(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},b))}function V(h){return{from:function(p){return h.prototype=Object.create(p.prototype),B(h.prototype,"constructor",h),{extend:O.bind(null,h.prototype)}}}}var J=Object.getOwnPropertyDescriptor,ge=[].slice;function me(h,p,v){return ge.call(h,p,v)}function ce(h,p){return p(h)}function ke(h){if(!h)throw new Error("Assertion Failed")}function Ze(h){c.setImmediate?setImmediate(h):setTimeout(h,0)}function xe(h,p){if(typeof p=="string"&&E(h,p))return h[p];if(!p)return h;if(typeof p!="string"){for(var v=[],b=0,w=p.length;b<w;++b){var C=xe(h,p[b]);v.push(C)}return v}var A,k=p.indexOf(".");return k===-1||(A=h[p.substr(0,k)])==null?void 0:xe(A,p.substr(k+1))}function pe(h,p,v){if(h&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof p!="string"&&"length"in p){ke(typeof v!="string"&&"length"in v);for(var b=0,w=p.length;b<w;++b)pe(h,p[b],v[b])}else{var C,A,k=p.indexOf(".");k!==-1?(C=p.substr(0,k),(k=p.substr(k+1))===""?v===void 0?f(h)&&!isNaN(parseInt(C))?h.splice(C,1):delete h[C]:h[C]=v:pe(A=(A=h[C])&&E(h,C)?A:h[C]={},k,v)):v===void 0?f(h)&&!isNaN(parseInt(p))?h.splice(p,1):delete h[p]:h[p]=v}}function I(h){var p,v={};for(p in h)E(h,p)&&(v[p]=h[p]);return v}var K=[].concat;function fe(h){return K.apply([],h)}var X="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fe([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(p){return p+h+"Array"})}))).filter(function(h){return c[h]}),Oe=new Set(X.map(function(h){return c[h]})),ae=null;function Ce(h){return ae=new WeakMap,h=(function p(v){if(!v||typeof v!="object")return v;var b=ae.get(v);if(b)return b;if(f(v)){b=[],ae.set(v,b);for(var w=0,C=v.length;w<C;++w)b.push(p(v[w]))}else if(Oe.has(v.constructor))b=v;else{var A,k=y(v);for(A in b=k===Object.prototype?{}:Object.create(k),ae.set(v,b),v)E(v,A)&&(b[A]=p(v[A]))}return b})(h),ae=null,h}var Ye={}.toString;function Je(h){return Ye.call(h).slice(8,-1)}var $=typeof Symbol<"u"?Symbol.iterator:"@@iterator",se=typeof $=="symbol"?function(h){var p;return h!=null&&(p=h[$])&&p.apply(h)}:function(){return null};function ie(h,p){p=h.indexOf(p),0<=p&&h.splice(p,1)}var we={};function Le(h){var p,v,b,w;if(arguments.length===1){if(f(h))return h.slice();if(this===we&&typeof h=="string")return[h];if(w=se(h))for(v=[];!(b=w.next()).done;)v.push(b.value);else{if(h==null)return[h];if(typeof(p=h.length)!="number")return[h];for(v=new Array(p);p--;)v[p]=h[p]}}else for(p=arguments.length,v=new Array(p);p--;)v[p]=arguments[p];return v}var x=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},X=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],St=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(X),ne={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(h,p){this.name=h,this.message=p}function Ue(h,p){return h+". Errors: "+Object.keys(p).map(function(v){return p[v].toString()}).filter(function(v,b,w){return w.indexOf(v)===b}).join(`
`)}function Ke(h,p,v,b){this.failures=p,this.failedKeys=b,this.successCount=v,this.message=Ue(h,p)}function je(h,p){this.name="BulkError",this.failures=Object.keys(p).map(function(v){return p[v]}),this.failuresByPos=p,this.message=Ue(h,this.failures)}V(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),V(Ke).from(ye),V(je).from(ye);var Ve=St.reduce(function(h,p){return h[p]=p+"Error",h},{}),Fe=ye,Ee=St.reduce(function(h,p){var v=p+"Error";function b(w,C){this.name=v,w?typeof w=="string"?(this.message="".concat(w).concat(C?`
 `+C:""),this.inner=C||null):typeof w=="object"&&(this.message="".concat(w.name," ").concat(w.message),this.inner=w):(this.message=ne[p]||v,this.inner=null)}return V(b).from(Fe),h[p]=b,h},{}),rt=(Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError,X.reduce(function(h,p){return h[p+"Error"]=Ee[p],h},{}));X=St.reduce(function(h,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(h[p+"Error"]=Ee[p]),h},{});function qe(){}function qt(h){return h}function Tt(h,p){return h==null||h===qt?p:function(v){return p(h(v))}}function ht(h,p){return function(){h.apply(this,arguments),p.apply(this,arguments)}}function lt(h,p){return h===qe?p:function(){var v=h.apply(this,arguments),b=(v!==void 0&&(arguments[0]=v),this.onsuccess),w=this.onerror,C=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return b&&(this.onsuccess=this.onsuccess?ht(b,this.onsuccess):b),w&&(this.onerror=this.onerror?ht(w,this.onerror):w),C!==void 0?C:v}}function gn(h,p){return h===qe?p:function(){h.apply(this,arguments);var v=this.onsuccess,b=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?ht(v,this.onsuccess):v),b&&(this.onerror=this.onerror?ht(b,this.onerror):b)}}function wt(h,p){return h===qe?p:function(w){var b=h.apply(this,arguments),w=(m(w,b),this.onsuccess),C=this.onerror,A=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return w&&(this.onsuccess=this.onsuccess?ht(w,this.onsuccess):w),C&&(this.onerror=this.onerror?ht(C,this.onerror):C),b===void 0?A===void 0?void 0:A:m(b,A)}}function Dt(h,p){return h===qe?p:function(){return p.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function Gt(h,p){return h===qe?p:function(){var v=h.apply(this,arguments);if(v&&typeof v.then=="function"){for(var b=this,w=arguments.length,C=new Array(w);w--;)C[w]=arguments[w];return v.then(function(){return p.apply(b,C)})}return p.apply(this,arguments)}}X.ModifyError=Ke,X.DexieError=ye,X.BulkError=je;var ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function er(h){ln=h}var vr={},At=100,Rn=typeof Promise>"u"?[]:(St=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Rn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(Rn),St]:[St,y(St),St]),St=Rn[0],qi=Rn[1],qi=qi&&qi.then,Xt=St&&St.constructor,xn=!!Rn[2],Qr=function(h,p){os.push([h,p]),br&&(queueMicrotask(su),br=!1)},xi=!0,br=!0,pn=[],$n=[],mn=qt,Pn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qe,pgp:!1,env:{},finalize:qe},De=Pn,os=[],Ii=0,io=[];function Re(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=De;if(typeof h!="function"){if(h!==vr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Jr(this,this._value)}else this._state=null,this._value=null,++p.ref,(function v(b,w){try{w(function(C){if(b._state===null){if(C===b)throw new TypeError("A promise cannot be resolved with itself.");var A=b._lib&&fi();C&&typeof C.then=="function"?v(b,function(k,U){C instanceof Re?C._then(k,U):C.then(k,U)}):(b._state=!0,b._value=C,cs(b)),A&&Dr()}},Jr.bind(null,b))}catch(C){Jr(b,C)}})(this,h)}var da={get:function(){var h=De,p=ds;function v(b,w){var C=this,A=!h.global&&(h!==De||p!==ds),k=A&&!tr(),U=new Re(function(G,M){Ni(C,new ls(ao(b,h,A,k),ao(w,h,A,k),G,M,h))});return this._consoleTask&&(U._consoleTask=this._consoleTask),U}return v.prototype=vr,v},set:function(h){B(this,"then",h&&h.prototype===vr?da:{get:function(){return h},set:da.set})}};function ls(h,p,v,b,w){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof p=="function"?p:null,this.resolve=v,this.reject=b,this.psd=w}function Jr(h,p){var v,b;$n.push(p),h._state===null&&(v=h._lib&&fi(),p=mn(p),h._state=!1,h._value=p,b=h,pn.some(function(w){return w._value===b._value})||pn.push(b),cs(h),v)&&Dr()}function cs(h){var p=h._listeners;h._listeners=[];for(var v=0,b=p.length;v<b;++v)Ni(h,p[v]);var w=h._PSD;--w.ref||w.finalize(),Ii===0&&(++Ii,Qr(function(){--Ii==0&&Rl()},[]))}function Ni(h,p){if(h._state===null)h._listeners.push(p);else{var v=h._state?p.onFulfilled:p.onRejected;if(v===null)return(h._state?p.resolve:p.reject)(h._value);++p.psd.ref,++Ii,Qr(Ad,[v,h,p])}}function Ad(h,p,v){try{var b,w=p._value;!p._state&&$n.length&&($n=[]),b=ln&&p._consoleTask?p._consoleTask.run(function(){return h(w)}):h(w),p._state||$n.indexOf(w)!==-1||(C=>{for(var A=pn.length;A;)if(pn[--A]._value===C._value)return pn.splice(A,1)})(p),v.resolve(b)}catch(C){v.reject(C)}finally{--Ii==0&&Rl(),--v.psd.ref||v.psd.finalize()}}function su(){_r(Pn,function(){fi()&&Dr()})}function fi(){var h=xi;return br=xi=!1,h}function Dr(){var h,p,v;do for(;0<os.length;)for(h=os,os=[],v=h.length,p=0;p<v;++p){var b=h[p];b[0].apply(null,b[1])}while(0<os.length);br=xi=!0}function Rl(){for(var h=pn,p=(pn=[],h.forEach(function(b){b._PSD.onunhandled.call(null,b._value,b)}),io.slice(0)),v=p.length;v;)p[--v]()}function us(h){return new Re(vr,!1,h)}function Ft(h,p){var v=De;return function(){var b=fi(),w=De;try{return pi(v,!0),h.apply(this,arguments)}catch(C){p&&p(C)}finally{pi(w,!1),b&&Dr()}}}O(Re.prototype,{then:da,_then:function(h,p){Ni(this,new ls(null,null,h,p,De))},catch:function(h){var p,v;return arguments.length===1?this.then(null,h):(p=h,v=arguments[1],typeof p=="function"?this.then(null,function(b){return(b instanceof p?v:us)(b)}):this.then(null,function(b){return(b&&b.name===p?v:us)(b)}))},finally:function(h){return this.then(function(p){return Re.resolve(h()).then(function(){return p})},function(p){return Re.resolve(h()).then(function(){return us(p)})})},timeout:function(h,p){var v=this;return h<1/0?new Re(function(b,w){var C=setTimeout(function(){return w(new Ee.Timeout(p))},h);v.then(b,w).finally(clearTimeout.bind(null,C))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),Pn.env=Il(),O(Re,{all:function(){var h=Le.apply(null,arguments).map(ga);return new Re(function(p,v){h.length===0&&p([]);var b=h.length;h.forEach(function(w,C){return Re.resolve(w).then(function(A){h[C]=A,--b||p(h)},v)})})},resolve:function(h){return h instanceof Re?h:h&&typeof h.then=="function"?new Re(function(p,v){h.then(p,v)}):new Re(vr,!0,h)},reject:us,race:function(){var h=Le.apply(null,arguments).map(ga);return new Re(function(p,v){h.map(function(b){return Re.resolve(b).then(p,v)})})},PSD:{get:function(){return De},set:function(h){return De=h}},totalEchoes:{get:function(){return ds}},newPSD:Yt,usePSD:_r,scheduler:{get:function(){return Qr},set:function(h){Qr=h}},rejectionMapper:{get:function(){return mn},set:function(h){mn=h}},follow:function(h,p){return new Re(function(v,b){return Yt(function(w,C){var A=De;A.unhandleds=[],A.onunhandled=C,A.finalize=ht(function(){var k,U=this;k=function(){U.unhandleds.length===0?w():C(U.unhandleds[0])},io.push(function G(){k(),io.splice(io.indexOf(G),1)}),++Ii,Qr(function(){--Ii==0&&Rl()},[])},A.finalize),h()},p,v,b)})}}),Xt&&(Xt.allSettled&&B(Re,"allSettled",function(){var h=Le.apply(null,arguments).map(ga);return new Re(function(p){h.length===0&&p([]);var v=h.length,b=new Array(v);h.forEach(function(w,C){return Re.resolve(w).then(function(A){return b[C]={status:"fulfilled",value:A}},function(A){return b[C]={status:"rejected",reason:A}}).then(function(){return--v||p(b)})})})}),Xt.any&&typeof AggregateError<"u"&&B(Re,"any",function(){var h=Le.apply(null,arguments).map(ga);return new Re(function(p,v){h.length===0&&v(new AggregateError([]));var b=h.length,w=new Array(b);h.forEach(function(C,A){return Re.resolve(C).then(function(k){return p(k)},function(k){w[A]=k,--b||v(new AggregateError(w))})})})}),Xt.withResolvers)&&(Re.withResolvers=Xt.withResolvers);var cn={awaits:0,echoes:0,id:0},xl=0,fa=[],hs=0,ds=0,gi=0;function Yt(h,A,v,b){var w=De,C=Object.create(w),A=(C.parent=w,C.ref=0,C.global=!1,C.id=++gi,Pn.env,C.env=xn?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},A&&m(C,A),++w.ref,C.finalize=function(){--this.parent.ref||this.parent.finalize()},_r(C,h,v,b));return C.ref===0&&C.finalize(),A}function un(){return cn.id||(cn.id=++xl),++cn.awaits,cn.echoes+=At,cn.id}function tr(){return!!cn.awaits&&(--cn.awaits==0&&(cn.id=0),cn.echoes=cn.awaits*At,!0)}function ga(h){return cn.echoes&&h&&h.constructor===Xt?(un(),h.then(function(p){return tr(),p},function(p){return tr(),Lt(p)})):h}function kd(){var h=fa[fa.length-1];fa.pop(),pi(h,!1)}function pi(h,p){var v,b,w=De;(p?!cn.echoes||hs++&&h===De:!hs||--hs&&h===De)||queueMicrotask(p?(function(C){++ds,cn.echoes&&--cn.echoes!=0||(cn.echoes=cn.awaits=cn.id=0),fa.push(De),pi(C,!0)}).bind(null,h):kd),h!==De&&(De=h,w===Pn&&(Pn.env=Il()),xn)&&(v=Pn.env.Promise,b=h.env,w.global||h.global)&&(Object.defineProperty(c,"Promise",b.PromiseProp),v.all=b.all,v.race=b.race,v.resolve=b.resolve,v.reject=b.reject,b.allSettled&&(v.allSettled=b.allSettled),b.any)&&(v.any=b.any)}function Il(){var h=c.Promise;return xn?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function _r(h,p,v,b,w){var C=De;try{return pi(h,!0),p(v,b,w)}finally{pi(C,!1)}}function ao(h,p,v,b){return typeof h!="function"?h:function(){var w=De;v&&un(),pi(p,!0);try{return h.apply(this,arguments)}finally{pi(w,!1),b&&queueMicrotask(tr)}}}function mi(h){Promise===Xt&&cn.echoes===0?hs===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+qi).indexOf("[native code]")===-1&&(un=tr=qe);var Lt=Re.reject,wr="",Vn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hn="String expected.",Di=[],fs="__dbnames",Xr="readonly",yi="readwrite";function Ui(h,p){return h?p?function(){return h.apply(this,arguments)&&p.apply(this,arguments)}:h:p}var Nl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gs(h){return typeof h!="string"||/\./.test(h)?function(p){return p}:function(p){return p[h]===void 0&&h in p&&delete(p=Ce(p))[h],p}}function ou(){throw Ee.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function dt(h,p){try{var v=ps(h),b=ps(p);if(v!==b)return v==="Array"?1:b==="Array"?-1:v==="binary"?1:b==="binary"?-1:v==="string"?1:b==="string"?-1:v==="Date"?1:b!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return p<h?1:h<p?-1:0;case"binary":for(var w=Ur(h),C=Ur(p),A=w.length,k=C.length,U=A<k?A:k,G=0;G<U;++G)if(w[G]!==C[G])return w[G]<C[G]?-1:1;return A===k?0:A<k?-1:1;case"Array":for(var M=h,D=p,L=M.length,H=D.length,P=L<H?L:H,j=0;j<P;++j){var Y=dt(M[j],D[j]);if(Y!==0)return Y}return L===H?0:L<H?-1:1}}catch{}return NaN}function ps(h){var p=typeof h;return p=="object"&&(ArrayBuffer.isView(h)||(p=Je(h))==="ArrayBuffer")?"binary":p}function Ur(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function jn(h,p,v){var b=h.schema.yProps;return b?(p&&0<v.numFailures&&(p=p.filter(function(w,C){return!v.failures[C]})),Promise.all(b.map(function(w){return w=w.updatesTable,p?h.db.table(w).where("k").anyOf(p).delete():h.db.table(w).clear()})).then(function(){return v})):v}lu.prototype.execute=function(h){var p=this["@@propmod"];if(p.add!==void 0){var v=p.add;if(f(v))return o(o([],f(h)?h:[],!0),v).sort();if(typeof v=="number")return(Number(h)||0)+v;if(typeof v=="bigint")try{return BigInt(h)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(p.remove!==void 0){var b=p.remove;if(f(b))return f(h)?h.filter(function(w){return!b.includes(w)}).sort():[];if(typeof b=="number")return Number(h)-b;if(typeof b=="bigint")try{return BigInt(h)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return v=(v=p.replacePrefix)==null?void 0:v[0],v&&typeof h=="string"&&h.startsWith(v)?p.replacePrefix[1]+h.substring(v.length):h};var pa=lu;function lu(h){this["@@propmod"]=h}function so(h,p){for(var v=u(p),b=v.length,w=!1,C=0;C<b;++C){var A=v[C],k=p[A],U=xe(h,A);k instanceof pa?(pe(h,A,k.execute(U)),w=!0):U!==k&&(pe(h,A,k),w=!0)}return w}xt.prototype._trans=function(h,p,v){var b=this._tx||De.trans,w=this.name,C=ln&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function A(G,M,D){if(D.schema[w])return p(D.idbtrans,D);throw new Ee.NotFound("Table "+w+" not part of transaction")}var k=fi();try{var U=b&&b.db._novip===this.db._novip?b===De.trans?b._promise(h,A,v):Yt(function(){return b._promise(h,A,v)},{trans:b,transless:De.transless||De}):(function G(M,D,L,H){if(M.idbdb&&(M._state.openComplete||De.letThrough||M._vip)){var P=M._createTransaction(D,L,M._dbSchema);try{P.create(),M._state.PR1398_maxLoop=3}catch(j){return j.name===Ve.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return G(M,D,L,H)})):Lt(j)}return P._promise(D,function(j,Y){return Yt(function(){return De.trans=P,H(j,Y,P)})}).then(function(j){if(D==="readwrite")try{P.idbtrans.commit()}catch{}return D==="readonly"?j:P._completion.then(function(){return j})})}if(M._state.openComplete)return Lt(new Ee.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return Lt(new Ee.DatabaseClosed);M.open().catch(qe)}return M._state.dbReadyPromise.then(function(){return G(M,D,L,H)})})(this.db,h,[this.name],A);return C&&(U._consoleTask=C,U=U.catch(function(G){return console.trace(G),Lt(G)})),U}finally{k&&Dr()}},xt.prototype.get=function(h,p){var v=this;return h&&h.constructor===Object?this.where(h).first(p):h==null?Lt(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return v.core.get({trans:b,key:h}).then(function(w){return v.hook.reading.fire(w)})}).then(p)},xt.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(f(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var p=u(h);if(p.length===1)return this.where(p[0]).equals(h[p[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&p.every(function(G){return 0<=k.keyPath.indexOf(G)})){for(var U=0;U<p.length;++U)if(p.indexOf(k.keyPath[U])===-1)return!1;return!0}return!1}).sort(function(k,U){return k.keyPath.length-U.keyPath.length})[0];if(v&&this.db._maxKey!==wr)return A=v.keyPath.slice(0,p.length),this.where(A).equals(A.map(function(k){return h[k]}));!v&&ln&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var b=this.schema.idxByName;function w(k,U){return dt(k,U)===0}var A=p.reduce(function(M,U){var G=M[0],M=M[1],D=b[U],L=h[U];return[G||D,G||!D?Ui(M,D&&D.multi?function(H){return H=xe(H,U),f(H)&&H.some(function(P){return w(L,P)})}:function(H){return w(L,xe(H,U))}):M]},[null,null]),C=A[0],A=A[1];return C?this.where(C.name).equals(h[C.keyPath]).filter(A):v?this.filter(A):this.where(p).equals("")},xt.prototype.filter=function(h){return this.toCollection().and(h)},xt.prototype.count=function(h){return this.toCollection().count(h)},xt.prototype.offset=function(h){return this.toCollection().offset(h)},xt.prototype.limit=function(h){return this.toCollection().limit(h)},xt.prototype.each=function(h){return this.toCollection().each(h)},xt.prototype.toArray=function(h){return this.toCollection().toArray(h)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,f(h)?"[".concat(h.join("+"),"]"):h))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(h){for(var p=this.db,v=this.name,b=((this.schema.mappedClass=h).prototype instanceof ou&&(h=(A=>{var k=M,U=A;if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function G(){this.constructor=k}function M(){return A!==null&&A.apply(this,arguments)||this}return n(k,U),k.prototype=U===null?Object.create(U):(G.prototype=U.prototype,new G),Object.defineProperty(M.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),M.prototype.table=function(){return v},M})(h)),new Set),w=h.prototype;w;w=y(w))Object.getOwnPropertyNames(w).forEach(function(A){return b.add(A)});function C(A){if(!A)return A;var k,U=Object.create(h.prototype);for(k in A)if(!b.has(k))try{U[k]=A[k]}catch{}return U}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),h},xt.prototype.defineClass=function(){return this.mapToClass(function(h){m(this,h)})},xt.prototype.add=function(h,p){var v=this,b=this.schema.primKey,w=b.auto,C=b.keyPath,A=h;return C&&w&&(A=gs(C)(h)),this._trans("readwrite",function(k){return v.core.mutate({trans:k,type:"add",keys:p!=null?[p]:null,values:[A]})}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):k.lastResult}).then(function(k){if(C)try{pe(h,C,k)}catch{}return k})},xt.prototype.upsert=function(h,p){var v=this,b=this.schema.primKey.keyPath;return this._trans("readwrite",function(w){return v.core.get({trans:w,key:h}).then(function(C){var A=C??{};return so(A,p),b&&pe(A,b,h),v.core.mutate({trans:w,type:"put",values:[A],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[p]}}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):!!C})})})},xt.prototype.update=function(h,p){return typeof h!="object"||f(h)?this.where(":id").equals(h).modify(p):(h=xe(h,this.schema.primKey.keyPath))===void 0?Lt(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(p)},xt.prototype.put=function(h,p){var v=this,b=this.schema.primKey,w=b.auto,C=b.keyPath,A=h;return C&&w&&(A=gs(C)(h)),this._trans("readwrite",function(k){return v.core.mutate({trans:k,type:"put",values:[A],keys:p!=null?[p]:null})}).then(function(k){return k.numFailures?Re.reject(k.failures[0]):k.lastResult}).then(function(k){if(C)try{pe(h,C,k)}catch{}return k})},xt.prototype.delete=function(h){var p=this;return this._trans("readwrite",function(v){return p.core.mutate({trans:v,type:"delete",keys:[h]}).then(function(b){return jn(p,[h],b)}).then(function(b){return b.numFailures?Re.reject(b.failures[0]):void 0})})},xt.prototype.clear=function(){var h=this;return this._trans("readwrite",function(p){return h.core.mutate({trans:p,type:"deleteRange",range:Nl}).then(function(v){return jn(h,null,v)})}).then(function(p){return p.numFailures?Re.reject(p.failures[0]):void 0})},xt.prototype.bulkGet=function(h){var p=this;return this._trans("readonly",function(v){return p.core.getMany({keys:h,trans:v}).then(function(b){return b.map(function(w){return p.hook.reading.fire(w)})})})},xt.prototype.bulkAdd=function(h,p,v){var b=this,w=Array.isArray(p)?p:void 0,C=(v=v||(w?void 0:p))?v.allKeys:void 0;return this._trans("readwrite",function(A){var k=b.schema.primKey,G=k.auto,k=k.keyPath;if(k&&w)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(w&&w.length!==h.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var U=h.length,G=k&&G?h.map(gs(k)):h;return b.core.mutate({trans:A,type:"add",keys:w,values:G,wantResults:C}).then(function(M){var D=M.numFailures,L=M.failures;if(D===0)return C?M.results:M.lastResult;throw new je("".concat(b.name,".bulkAdd(): ").concat(D," of ").concat(U," operations failed"),L)})})},xt.prototype.bulkPut=function(h,p,v){var b=this,w=Array.isArray(p)?p:void 0,C=(v=v||(w?void 0:p))?v.allKeys:void 0;return this._trans("readwrite",function(A){var k=b.schema.primKey,G=k.auto,k=k.keyPath;if(k&&w)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(w&&w.length!==h.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var U=h.length,G=k&&G?h.map(gs(k)):h;return b.core.mutate({trans:A,type:"put",keys:w,values:G,wantResults:C}).then(function(M){var D=M.numFailures,L=M.failures;if(D===0)return C?M.results:M.lastResult;throw new je("".concat(b.name,".bulkPut(): ").concat(D," of ").concat(U," operations failed"),L)})})},xt.prototype.bulkUpdate=function(h){var p=this,v=this.core,b=h.map(function(A){return A.key}),w=h.map(function(A){return A.changes}),C=[];return this._trans("readwrite",function(A){return v.getMany({trans:A,keys:b,cache:"clone"}).then(function(k){var U=[],G=[],M=(h.forEach(function(D,L){var H=D.key,P=D.changes,j=k[L];if(j){for(var Y=0,ee=Object.keys(P);Y<ee.length;Y++){var F=ee[Y],oe=P[F];if(F===p.schema.primKey.keyPath){if(dt(oe,H)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else pe(j,F,oe)}C.push(L),U.push(H),G.push(j)}}),U.length);return v.mutate({trans:A,type:"put",keys:U,values:G,updates:{keys:b,changeSpecs:w}}).then(function(D){var L=D.numFailures,H=D.failures;if(L===0)return M;for(var P=0,j=Object.keys(H);P<j.length;P++){var Y,ee=j[P],F=C[Number(ee)];F!=null&&(Y=H[ee],delete H[ee],H[F]=Y)}throw new je("".concat(p.name,".bulkUpdate(): ").concat(L," of ").concat(M," operations failed"),H)})})})},xt.prototype.bulkDelete=function(h){var p=this,v=h.length;return this._trans("readwrite",function(b){return p.core.mutate({trans:b,type:"delete",keys:h}).then(function(w){return jn(p,h,w)})}).then(function(b){var w=b.numFailures,C=b.failures;if(w===0)return b.lastResult;throw new je("".concat(p.name,".bulkDelete(): ").concat(w," of ").concat(v," operations failed"),C)})};var Dl=xt;function xt(){}function ms(h){function p(A,k){if(k){for(var U=arguments.length,G=new Array(U-1);--U;)G[U-1]=arguments[U];return v[A].subscribe.apply(null,G),h}if(typeof A=="string")return v[A]}var v={};p.addEventType=C;for(var b=1,w=arguments.length;b<w;++b)C(arguments[b]);return p;function C(A,k,U){var G,M;if(typeof A!="object")return k=k||Dt,M={subscribers:[],fire:U=U||qe,subscribe:function(D){M.subscribers.indexOf(D)===-1&&(M.subscribers.push(D),M.fire=k(M.fire,D))},unsubscribe:function(D){M.subscribers=M.subscribers.filter(function(L){return L!==D}),M.fire=M.subscribers.reduce(k,U)}},v[A]=p[A]=M;u(G=A).forEach(function(D){var L=G[D];if(f(L))C(D,G[D][0],G[D][1]);else{if(L!=="asap")throw new Ee.InvalidArgument("Invalid event config");var H=C(D,qt,function(){for(var P=arguments.length,j=new Array(P);P--;)j[P]=arguments[P];H.subscribers.forEach(function(Y){Ze(function(){Y.apply(null,j)})})})}})}}function In(h,p){return V(p).from({prototype:h}),p}function vi(h,p){return!(h.filter||h.algorithm||h.or)&&(p?h.justLimit:!h.replayFilter)}function oo(h,p){h.filter=Ui(h.filter,p)}function ys(h,p,v){var b=h.replayFilter;h.replayFilter=b?function(){return Ui(b(),p())}:p,h.justLimit=v&&!b}function Wr(h,p){if(h.isPrimKey)return p.primaryKey;var v=p.getIndexByKeyPath(h.index);if(v)return v;throw new Ee.Schema("KeyPath "+h.index+" on object store "+p.name+" is not indexed")}function Ul(h,p,v){var b=Wr(h,p.schema);return p.openCursor({trans:v,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:b,range:h.range}})}function vs(h,p,v,b){var w,C,A=h.replayFilter?Ui(h.filter,h.replayFilter()):h.filter;return h.or?(w={},C=function(k,U,G){var M,D;A&&!A(U,G,function(L){return U.stop(L)},function(L){return U.fail(L)})||((D=""+(M=U.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(M)),E(w,D))||(w[D]=!0,p(k,U,G))},Promise.all([h.or._iterate(C,v),Mi(Ul(h,b,v),h.algorithm,C,!h.keysOnly&&h.valueMapper)])):Mi(Ul(h,b,v),Ui(h.algorithm,A),p,!h.keysOnly&&h.valueMapper)}function Mi(h,p,v,b){var w=Ft(b?function(C,A,k){return v(b(C),A,k)}:v);return h.then(function(C){if(C)return C.start(function(){var A=function(){return C.continue()};p&&!p(C,function(k){return A=k},function(k){C.stop(k),A=qe},function(k){C.fail(k),A=qe})||w(C.value,C,function(k){return A=k}),A()})})}Ct.prototype._read=function(h,p){var v=this._ctx;return v.error?v.table._trans(null,Lt.bind(null,v.error)):v.table._trans("readonly",h).then(p)},Ct.prototype._write=function(h){var p=this._ctx;return p.error?p.table._trans(null,Lt.bind(null,p.error)):p.table._trans("readwrite",h,"locked")},Ct.prototype._addAlgorithm=function(h){var p=this._ctx;p.algorithm=Ui(p.algorithm,h)},Ct.prototype._iterate=function(h,p){return vs(this._ctx,h,p,this._ctx.table.core)},Ct.prototype.clone=function(h){var p=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return h&&m(v,h),p._ctx=v,p},Ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ct.prototype.each=function(h){var p=this._ctx;return this._read(function(v){return vs(p,h,v,p.table.core)})},Ct.prototype.count=function(h){var p=this;return this._read(function(v){var b,w=p._ctx,C=w.table.core;return vi(w,!0)?C.count({trans:v,query:{index:Wr(w,C.schema),range:w.range}}).then(function(A){return Math.min(A,w.limit)}):(b=0,vs(w,function(){return++b,!1},v,C).then(function(){return b}))}).then(h)},Ct.prototype.sortBy=function(h,p){var v=h.split(".").reverse(),b=v[0],w=v.length-1;function C(U,G){return G?C(U[v[G]],G-1):U[b]}var A=this._ctx.dir==="next"?1:-1;function k(U,G){return dt(C(U,w),C(G,w))*A}return this.toArray(function(U){return U.sort(k)}).then(p)},Ct.prototype.toArray=function(h){var p=this;return this._read(function(v){var b,w,C,A=p._ctx;return A.dir==="next"&&vi(A,!0)&&0<A.limit?(b=A.valueMapper,w=Wr(A,A.table.core.schema),A.table.core.query({trans:v,limit:A.limit,values:!0,query:{index:w,range:A.range}}).then(function(k){return k=k.result,b?k.map(b):k})):(C=[],vs(A,function(k){return C.push(k)},v,A.table.core).then(function(){return C}))},h)},Ct.prototype.offset=function(h){var p=this._ctx;return h<=0||(p.offset+=h,vi(p)?ys(p,function(){var v=h;return function(b,w){return v===0||(v===1?--v:w(function(){b.advance(v),v=0}),!1)}}):ys(p,function(){var v=h;return function(){return--v<0}})),this},Ct.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),ys(this._ctx,function(){var p=h;return function(v,b,w){return--p<=0&&b(w),0<=p}},!0),this},Ct.prototype.until=function(h,p){return oo(this._ctx,function(v,b,w){return!h(v.value)||(b(w),p)}),this},Ct.prototype.first=function(h){return this.limit(1).toArray(function(p){return p[0]}).then(h)},Ct.prototype.last=function(h){return this.reverse().first(h)},Ct.prototype.filter=function(h){var p;return oo(this._ctx,function(v){return h(v.value)}),(p=this._ctx).isMatch=Ui(p.isMatch,h),this},Ct.prototype.and=function(h){return this.filter(h)},Ct.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},Ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ct.prototype.desc=function(){return this.reverse()},Ct.prototype.eachKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(v,b){h(b.key,b)})},Ct.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},Ct.prototype.eachPrimaryKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(v,b){h(b.primaryKey,b)})},Ct.prototype.keys=function(h){var p=this._ctx,v=(p.keysOnly=!p.isMatch,[]);return this.each(function(b,w){v.push(w.key)}).then(function(){return v}).then(h)},Ct.prototype.primaryKeys=function(h){var p=this._ctx;if(p.dir==="next"&&vi(p,!0)&&0<p.limit)return this._read(function(b){var w=Wr(p,p.table.core.schema);return p.table.core.query({trans:b,values:!1,limit:p.limit,query:{index:w,range:p.range}})}).then(function(b){return b.result}).then(h);p.keysOnly=!p.isMatch;var v=[];return this.each(function(b,w){v.push(w.primaryKey)}).then(function(){return v}).then(h)},Ct.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},Ct.prototype.firstKey=function(h){return this.limit(1).keys(function(p){return p[0]}).then(h)},Ct.prototype.lastKey=function(h){return this.reverse().firstKey(h)},Ct.prototype.distinct=function(){var h,p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];return p&&p.multi&&(h={},oo(this._ctx,function(b){var b=b.primaryKey.toString(),w=E(h,b);return h[b]=!0,!w})),this},Ct.prototype.modify=function(h){var p=this,v=this._ctx;return this._write(function(b){function w(j,Y){var ee=Y.failures;L+=j-Y.numFailures;for(var F=0,oe=u(ee);F<oe.length;F++){var ve=oe[F];D.push(ee[ve])}}var C=typeof h=="function"?h:function(j){return so(j,h)},A=v.table.core,M=A.schema.primaryKey,k=M.outbound,U=M.extractKey,G=200,M=p.db._options.modifyChunkSize,D=(M&&(G=typeof M=="object"?M[A.name]||M["*"]||200:M),[]),L=0,H=[],P=h===Ml;return p.clone().primaryKeys().then(function(j){function Y(F){var oe=Math.min(G,j.length-F),ve=j.slice(F,F+oe);return(P?Promise.resolve([]):A.getMany({trans:b,keys:ve,cache:"immutable"})).then(function(Te){var Ae=[],be=[],Me=k?[]:null,Ie=P?ve:[];if(!P)for(var _e=0;_e<oe;++_e){var Pe=Te[_e],at={value:Ce(Pe),primKey:j[F+_e]};C.call(at,at.value,at)!==!1&&(at.value==null?Ie.push(j[F+_e]):k||dt(U(Pe),U(at.value))===0?(be.push(at.value),k&&Me.push(j[F+_e])):(Ie.push(j[F+_e]),Ae.push(at.value)))}return Promise.resolve(0<Ae.length&&A.mutate({trans:b,type:"add",values:Ae}).then(function(ft){for(var Qe in ft.failures)Ie.splice(parseInt(Qe),1);w(Ae.length,ft)})).then(function(){return(0<be.length||ee&&typeof h=="object")&&A.mutate({trans:b,type:"put",keys:Me,values:be,criteria:ee,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<F}).then(function(ft){return w(be.length,ft)})}).then(function(){return(0<Ie.length||ee&&P)&&A.mutate({trans:b,type:"delete",keys:Ie,criteria:ee,isAdditionalChunk:0<F}).then(function(ft){return jn(v.table,Ie,ft)}).then(function(ft){return w(Ie.length,ft)})}).then(function(){return j.length>F+oe&&Y(F+G)})})}var ee=vi(v)&&v.limit===1/0&&(typeof h!="function"||P)&&{index:v.index,range:v.range};return Y(0).then(function(){if(0<D.length)throw new Ke("Error modifying one or more objects",D,L,H);return j.length})})})},Ct.prototype.delete=function(){var h=this._ctx,p=h.range;return!vi(h)||h.table.schema.yProps||!h.isPrimKey&&p.type!==3?this.modify(Ml):this._write(function(v){var b=h.table.core.schema.primaryKey,w=p;return h.table.core.count({trans:v,query:{index:b,range:w}}).then(function(C){return h.table.core.mutate({trans:v,type:"deleteRange",range:w}).then(function(U){var k=U.failures,U=U.numFailures;if(U)throw new Ke("Could not delete some values",Object.keys(k).map(function(G){return k[G]}),C-U);return C-U})})})};var Od=Ct;function Ct(){}var Ml=function(h,p){return p.value=null};function Pl(h,p){return h<p?-1:h===p?0:1}function Rd(h,p){return p<h?-1:h===p?0:1}function nr(h,p,v){return h=h instanceof Pi?new h.Collection(h):h,h._ctx.error=new(v||TypeError)(p),h}function Zr(h){return new h.Collection(h,function(){return lo("")}).limit(0)}function or(H,p,v,b){var w,C,A,k,U,G,M,D=v.length;if(!v.every(function(j){return typeof j=="string"}))return nr(H,hn);function L(j){w=j==="next"?function(ee){return ee.toUpperCase()}:function(ee){return ee.toLowerCase()},C=j==="next"?function(ee){return ee.toLowerCase()}:function(ee){return ee.toUpperCase()},A=j==="next"?Pl:Rd;var Y=v.map(function(ee){return{lower:C(ee),upper:w(ee)}}).sort(function(ee,F){return A(ee.lower,F.lower)});k=Y.map(function(ee){return ee.upper}),U=Y.map(function(ee){return ee.lower}),M=(G=j)==="next"?"":b}L("next");var H=new H.Collection(H,function(){return Mr(k[0],U[D-1]+b)}),P=(H._ondirectionchange=function(j){L(j)},0);return H._addAlgorithm(function(j,Y,ee){var F=j.key;if(typeof F=="string"){var oe=C(F);if(p(oe,U,P))return!0;for(var ve=null,Te=P;Te<D;++Te){var Ae=((be,Me,Ie,_e,Pe,at)=>{for(var ft=Math.min(be.length,_e.length),Qe=-1,st=0;st<ft;++st){var zt=Me[st];if(zt!==_e[st])return Pe(be[st],Ie[st])<0?be.substr(0,st)+Ie[st]+Ie.substr(st+1):Pe(be[st],_e[st])<0?be.substr(0,st)+_e[st]+Ie.substr(st+1):0<=Qe?be.substr(0,Qe)+Me[Qe]+Ie.substr(Qe+1):null;Pe(be[st],zt)<0&&(Qe=st)}return ft<_e.length&&at==="next"?be+Ie.substr(be.length):ft<be.length&&at==="prev"?be.substr(0,Ie.length):Qe<0?null:be.substr(0,Qe)+_e[Qe]+Ie.substr(Qe+1)})(F,oe,k[Te],U[Te],A,G);Ae===null&&ve===null?P=Te+1:(ve===null||0<A(ve,Ae))&&(ve=Ae)}Y(ve!==null?function(){j.continue(ve+M)}:ee)}return!1}),H}function Mr(h,p,v,b){return{type:2,lower:h,upper:p,lowerOpen:v,upperOpen:b}}function lo(h){return{type:1,lower:h,upper:h}}Object.defineProperty(Wt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Wt.prototype.between=function(h,p,v,b){v=v!==!1,b=b===!0;try{return 0<this._cmp(h,p)||this._cmp(h,p)===0&&(v||b)&&(!v||!b)?Zr(this):new this.Collection(this,function(){return Mr(h,p,!v,!b)})}catch{return nr(this,Vn)}},Wt.prototype.equals=function(h){return h==null?nr(this,Vn):new this.Collection(this,function(){return lo(h)})},Wt.prototype.above=function(h){return h==null?nr(this,Vn):new this.Collection(this,function(){return Mr(h,void 0,!0)})},Wt.prototype.aboveOrEqual=function(h){return h==null?nr(this,Vn):new this.Collection(this,function(){return Mr(h,void 0,!1)})},Wt.prototype.below=function(h){return h==null?nr(this,Vn):new this.Collection(this,function(){return Mr(void 0,h,!1,!0)})},Wt.prototype.belowOrEqual=function(h){return h==null?nr(this,Vn):new this.Collection(this,function(){return Mr(void 0,h)})},Wt.prototype.startsWith=function(h){return typeof h!="string"?nr(this,hn):this.between(h,h+wr,!0,!0)},Wt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):or(this,function(p,v){return p.indexOf(v[0])===0},[h],wr)},Wt.prototype.equalsIgnoreCase=function(h){return or(this,function(p,v){return p===v[0]},[h],"")},Wt.prototype.anyOfIgnoreCase=function(){var h=Le.apply(we,arguments);return h.length===0?Zr(this):or(this,function(p,v){return v.indexOf(p)!==-1},h,"")},Wt.prototype.startsWithAnyOfIgnoreCase=function(){var h=Le.apply(we,arguments);return h.length===0?Zr(this):or(this,function(p,v){return v.some(function(b){return p.indexOf(b)===0})},h,wr)},Wt.prototype.anyOf=function(){var h,p,v=this,b=Le.apply(we,arguments),w=this._cmp;try{b.sort(w)}catch{return nr(this,Vn)}return b.length===0?Zr(this):((h=new this.Collection(this,function(){return Mr(b[0],b[b.length-1])}))._ondirectionchange=function(C){w=C==="next"?v._ascending:v._descending,b.sort(w)},p=0,h._addAlgorithm(function(C,A,k){for(var U=C.key;0<w(U,b[p]);)if(++p===b.length)return A(k),!1;return w(U,b[p])===0||(A(function(){C.continue(b[p])}),!1)}),h)},Wt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Wt.prototype.noneOf=function(){var h=Le.apply(we,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return nr(this,Vn)}var p=h.reduce(function(v,b){return v?v.concat([[v[v.length-1][1],b]]):[[-1/0,b]]},null);return p.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Wt.prototype.inAnyRange=function(h,ee){var v=this,b=this._cmp,w=this._ascending,C=this._descending,A=this._min,k=this._max;if(h.length===0)return Zr(this);if(!h.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&w(F[0],F[1])<=0}))return nr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var U=!ee||ee.includeLowers!==!1,G=ee&&ee.includeUppers===!0,M,D=w;function L(F,oe){return D(F[0],oe[0])}try{(M=h.reduce(function(F,oe){for(var ve=0,Te=F.length;ve<Te;++ve){var Ae=F[ve];if(b(oe[0],Ae[1])<0&&0<b(oe[1],Ae[0])){Ae[0]=A(Ae[0],oe[0]),Ae[1]=k(Ae[1],oe[1]);break}}return ve===Te&&F.push(oe),F},[])).sort(L)}catch{return nr(this,Vn)}var H=0,P=G?function(F){return 0<w(F,M[H][1])}:function(F){return 0<=w(F,M[H][1])},j=U?function(F){return 0<C(F,M[H][0])}:function(F){return 0<=C(F,M[H][0])},Y=P,ee=new this.Collection(this,function(){return Mr(M[0][0],M[M.length-1][1],!U,!G)});return ee._ondirectionchange=function(F){D=F==="next"?(Y=P,w):(Y=j,C),M.sort(L)},ee._addAlgorithm(function(F,oe,ve){for(var Te,Ae=F.key;Y(Ae);)if(++H===M.length)return oe(ve),!1;return!P(Te=Ae)&&!j(Te)||(v._cmp(Ae,M[H][1])===0||v._cmp(Ae,M[H][0])===0||oe(function(){D===w?F.continue(M[H][0]):F.continue(M[H][1])}),!1)}),ee},Wt.prototype.startsWithAnyOf=function(){var h=Le.apply(we,arguments);return h.every(function(p){return typeof p=="string"})?h.length===0?Zr(this):this.inAnyRange(h.map(function(p){return[p,p+wr]})):nr(this,"startsWithAnyOf() only works with strings")};var Pi=Wt;function Wt(){}function Sr(h){return Ft(function(p){return ji(p),h(p.target.error),!1})}function ji(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var ma="storagemutated",Li="x-storagemutated-1",Nn=ms(null,ma),jl=(Yn.prototype._lock=function(){return ke(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this},Yn.prototype._unlock=function(){if(ke(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{_r(h[1],h[0])}catch{}}return this},Yn.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},Yn.prototype.create=function(h){var p=this;if(this.mode){var v=this.db.idbdb,b=this.db._state.dbOpenError;if(ke(!this.idbtrans),!h&&!v)switch(b&&b.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(b);case"MissingAPIError":throw new Ee.MissingAPI(b.message,b);default:throw new Ee.OpenFailed(b)}if(!this.active)throw new Ee.TransactionInactive;ke(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ft(function(w){ji(w),p._reject(h.error)}),h.onabort=Ft(function(w){ji(w),p.active&&p._reject(new Ee.Abort(h.error)),p.active=!1,p.on("abort").fire(w)}),h.oncomplete=Ft(function(){p.active=!1,p._resolve(),"mutatedParts"in h&&Nn.storagemutated.fire(h.mutatedParts)})}return this},Yn.prototype._promise=function(h,p,v){var b,w=this;return h==="readwrite"&&this.mode!=="readwrite"?Lt(new Ee.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Re(function(C,A){w._blockedFuncs.push([function(){w._promise(h,p,v).then(C,A)},De])}):v?Yt(function(){var C=new Re(function(A,k){w._lock();var U=p(A,k,w);U&&U.then&&U.then(A,k)});return C.finally(function(){return w._unlock()}),C._lib=!0,C}):((b=new Re(function(C,A){var k=p(C,A,w);k&&k.then&&k.then(C,A)}))._lib=!0,b):Lt(new Ee.TransactionInactive)},Yn.prototype._root=function(){return this.parent?this.parent._root():this},Yn.prototype.waitFor=function(h){var p,v=this._root(),b=Re.resolve(h),w=(v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return b}):(v._waitingFor=b,v._waitingQueue=[],p=v.idbtrans.objectStore(v.storeNames[0]),(function C(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(p.get(-1/0).onsuccess=C)})()),v._waitingFor);return new Re(function(C,A){b.then(function(k){return v._waitingQueue.push(Ft(C.bind(null,k)))},function(k){return v._waitingQueue.push(Ft(A.bind(null,k)))}).finally(function(){v._waitingFor===w&&(v._waitingFor=null)})})},Yn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},Yn.prototype.table=function(h){var p=this._memoizedTables||(this._memoizedTables={});if(E(p,h))return p[h];var v=this.schema[h];if(v)return(v=new this.db.Table(h,v,this)).core=this.db.core.table(h),p[h]=v;throw new Ee.NotFound("Table "+h+" not part of transaction")},Yn);function Yn(){}function Pr(h,p,v,b,w,C,A,k){return{name:h,keyPath:p,unique:v,multi:b,auto:w,compound:C,src:(v&&!A?"&":"")+(b?"*":"")+(w?"++":"")+co(p),type:k}}function co(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function ya(h,p,v){return{name:h,primKey:p,indexes:v,mappedClass:null,idxByName:(b=function(w){return[w.name,w]},v.reduce(function(w,C,A){return C=b(C,A),C&&(w[C[0]]=C[1]),w},{}))};var b}var va=function(h){try{return h.only([[]]),va=function(){return[[]]},[[]]}catch{return va=function(){return wr},wr}};function ba(h){return h==null?function(){}:typeof h=="string"?(p=h).split(".").length===1?function(v){return v[p]}:function(v){return xe(v,p)}:function(v){return xe(v,h)};var p}function bs(h){return[].slice.call(h)}var cu=0;function yn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function zi(h,p,U){function b(P){if(P.type===3)return null;if(P.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=P.lower,L=P.upper,H=P.lowerOpen,P=P.upperOpen;return D===void 0?L===void 0?null:p.upperBound(L,!!P):L===void 0?p.lowerBound(D,!!H):p.bound(D,L,!!H,!!P)}function w(M){var D,L=M.name;return{name:L,schema:M,mutate:function(H){var P=H.trans,j=H.type,Y=H.keys,ee=H.values,F=H.range;return new Promise(function(oe,ve){oe=Ft(oe);var Te=P.objectStore(L),Ae=Te.keyPath==null,be=j==="put"||j==="add";if(!be&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var Me,Ie=(Y||ee||{length:1}).length;if(Y&&ee&&Y.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(Ie===0)return oe({numFailures:0,failures:{},results:[],lastResult:void 0});function _e(Ut){++ft,ji(Ut)}var Pe=[],at=[],ft=0;if(j==="deleteRange"){if(F.type===4)return oe({numFailures:ft,failures:at,results:[],lastResult:void 0});F.type===3?Pe.push(Me=Te.clear()):Pe.push(Me=Te.delete(b(F)))}else{var Ae=be?Ae?[ee,Y]:[ee,null]:[Y,null],Qe=Ae[0],st=Ae[1];if(be)for(var zt=0;zt<Ie;++zt)Pe.push(Me=st&&st[zt]!==void 0?Te[j](Qe[zt],st[zt]):Te[j](Qe[zt])),Me.onerror=_e;else for(zt=0;zt<Ie;++zt)Pe.push(Me=Te[j](Qe[zt])),Me.onerror=_e}function Jn(Ut){Ut=Ut.target.result,Pe.forEach(function(Si,Ta){return Si.error!=null&&(at[Ta]=Si.error)}),oe({numFailures:ft,failures:at,results:j==="delete"?Y:Pe.map(function(Si){return Si.result}),lastResult:Ut})}Me.onerror=function(Ut){_e(Ut),Jn(Ut)},Me.onsuccess=Jn})},getMany:function(H){var P=H.trans,j=H.keys;return new Promise(function(Y,ee){Y=Ft(Y);for(var F,oe=P.objectStore(L),ve=j.length,Te=new Array(ve),Ae=0,be=0,Me=function(Pe){Pe=Pe.target,Te[Pe._pos]=Pe.result,++be===Ae&&Y(Te)},Ie=Sr(ee),_e=0;_e<ve;++_e)j[_e]!=null&&((F=oe.get(j[_e]))._pos=_e,F.onsuccess=Me,F.onerror=Ie,++Ae);Ae===0&&Y(Te)})},get:function(H){var P=H.trans,j=H.key;return new Promise(function(Y,ee){Y=Ft(Y);var F=P.objectStore(L).get(j);F.onsuccess=function(oe){return Y(oe.target.result)},F.onerror=Sr(ee)})},query:(D=k,function(H){return new Promise(function(P,j){P=Ft(P);var Y,ee,F,be=H.trans,oe=H.values,ve=H.limit,Ae=H.query,Te=ve===1/0?void 0:ve,Me=Ae.index,Ae=Ae.range,be=be.objectStore(L),be=Me.isPrimaryKey?be:be.index(Me.name),Me=b(Ae);if(ve===0)return P({result:[]});D?((Ae=oe?be.getAll(Me,Te):be.getAllKeys(Me,Te)).onsuccess=function(Ie){return P({result:Ie.target.result})},Ae.onerror=Sr(j)):(Y=0,ee=!oe&&"openKeyCursor"in be?be.openKeyCursor(Me):be.openCursor(Me),F=[],ee.onsuccess=function(Ie){var _e=ee.result;return!_e||(F.push(oe?_e.value:_e.primaryKey),++Y===ve)?P({result:F}):void _e.continue()},ee.onerror=Sr(j))})}),openCursor:function(H){var P=H.trans,j=H.values,Y=H.query,ee=H.reverse,F=H.unique;return new Promise(function(oe,ve){oe=Ft(oe);var be=Y.index,Te=Y.range,Ae=P.objectStore(L),Ae=be.isPrimaryKey?Ae:Ae.index(be.name),be=ee?F?"prevunique":"prev":F?"nextunique":"next",Me=!j&&"openKeyCursor"in Ae?Ae.openKeyCursor(b(Te),be):Ae.openCursor(b(Te),be);Me.onerror=Sr(ve),Me.onsuccess=Ft(function(Ie){var _e,Pe,at,ft,Qe=Me.result;Qe?(Qe.___id=++cu,Qe.done=!1,_e=Qe.continue.bind(Qe),Pe=(Pe=Qe.continuePrimaryKey)&&Pe.bind(Qe),at=Qe.advance.bind(Qe),ft=function(){throw new Error("Cursor not stopped")},Qe.trans=P,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=Ft(ve),Qe.next=function(){var st=this,zt=1;return this.start(function(){return zt--?st.continue():st.stop()}).then(function(){return st})},Qe.start=function(st){function zt(){if(Me.result)try{st()}catch(Ut){Qe.fail(Ut)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var Jn=new Promise(function(Ut,Si){Ut=Ft(Ut),Me.onerror=Sr(Si),Qe.fail=Si,Qe.stop=function(Ta){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=ft,Ut(Ta)}});return Me.onsuccess=Ft(function(Ut){Me.onsuccess=zt,zt()}),Qe.continue=_e,Qe.continuePrimaryKey=Pe,Qe.advance=at,zt(),Jn},oe(Qe)):oe(null)},ve)})},count:function(H){var P=H.query,j=H.trans,Y=P.index,ee=P.range;return new Promise(function(F,oe){var ve=j.objectStore(L),ve=Y.isPrimaryKey?ve:ve.index(Y.name),Te=b(ee),Te=Te?ve.count(Te):ve.count();Te.onsuccess=Ft(function(Ae){return F(Ae.target.result)}),Te.onerror=Sr(oe)})}}}C=U,A=bs((U=h).objectStoreNames);var C,U={schema:{name:U.name,tables:A.map(function(M){return C.objectStore(M)}).map(function(M){var D=M.keyPath,L=M.autoIncrement,P=f(D),H={},P={name:M.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:P,keyPath:D,autoIncrement:L,unique:!0,extractKey:ba(D)},indexes:bs(M.indexNames).map(function(j){return M.index(j)}).map(function(F){var oe=F.name,Y=F.unique,ee=F.multiEntry,F=F.keyPath,oe={name:oe,compound:f(F),keyPath:F,unique:Y,multiEntry:ee,extractKey:ba(F)};return H[yn(F)]=oe}),getIndexByKeyPath:function(j){return H[yn(j)]}};return H[":id"]=P.primaryKey,D!=null&&(H[yn(D)]=P.primaryKey),P})},hasGetAll:0<A.length&&"getAll"in C.objectStore(A[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},A=U.schema,k=U.hasGetAll,U=A.tables.map(w),G={};return U.forEach(function(M){return G[M.name]=M}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(M){if(G[M])return G[M];throw new Error("Table '".concat(M,"' not found"))},MIN_KEY:-1/0,MAX_KEY:va(p),schema:A}}function uo(h,p,v,b){return v=v.IDBKeyRange,p=zi(p,v,b),{dbcore:h.dbcore.reduce(function(w,C){return C=C.create,i(i({},w),C(w))},p)}}function bi(h,p){var v=p.db,v=uo(h._middlewares,v,h._deps,p);h.core=v.dbcore,h.tables.forEach(function(b){var w=b.name;h.core.schema.tables.some(function(C){return C.name===w})&&(b.core=h.core.table(w),h[w]instanceof h.Table)&&(h[w].core=b.core)})}function ho(h,p,v,b){v.forEach(function(w){var C=b[w];p.forEach(function(A){var k=(function U(G,M){return J(G,M)||(G=y(G))&&U(G,M)})(A,w);(!k||"value"in k&&k.value===void 0)&&(A===h.Transaction.prototype||A instanceof h.Transaction?B(A,w,{get:function(){return this.table(w)},set:function(U){R(this,w,{value:U,writable:!0,configurable:!0,enumerable:!0})}}):A[w]=new h.Table(w,C))})})}function _s(h,p){p.forEach(function(v){for(var b in v)v[b]instanceof h.Table&&delete v[b]})}function Ll(h,p){return h._cfg.version-p._cfg.version}function ws(h,p,v,b){var w=h._dbSchema,C=(v.objectStoreNames.contains("$meta")&&!w.$meta&&(w.$meta=ya("$meta",hu("")[0],[]),h._storeNames.push("$meta")),h._createTransaction("readwrite",h._storeNames,w)),A=(C.create(v),C._completion.catch(b),C._reject.bind(C)),k=De.transless||De;Yt(function(){if(De.trans=C,De.transless=k,p!==0)return bi(h,v),G=p,((U=C).storeNames.includes("$meta")?U.table("$meta").get("version").then(function(M){return M??G}):Re.resolve(G)).then(function(Y){var D=h,L=Y,H=C,P=v,j=[],Y=D._versions,ee=D._dbSchema=_a(0,D.idbdb,P);return(Y=Y.filter(function(F){return F._cfg.version>=L})).length===0?Re.resolve():(Y.forEach(function(F){j.push(function(){var oe,ve,Te,Ae=ee,be=F._cfg.dbschema,Me=(mo(D,Ae,P),mo(D,be,P),ee=D._dbSchema=be,go(Ae,be)),Ie=(Me.add.forEach(function(_e){zl(P,_e[0],_e[1].primKey,_e[1].indexes)}),Me.change.forEach(function(_e){if(_e.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var Pe=P.objectStore(_e.name);_e.add.forEach(function(at){return po(Pe,at)}),_e.change.forEach(function(at){Pe.deleteIndex(at.name),po(Pe,at)}),_e.del.forEach(function(at){return Pe.deleteIndex(at)})}),F._cfg.contentUpgrade);if(Ie&&F._cfg.version>L)return bi(D,P),H._memoizedTables={},oe=I(be),Me.del.forEach(function(_e){oe[_e]=Ae[_e]}),_s(D,[D.Transaction.prototype]),ho(D,[D.Transaction.prototype],u(oe),oe),H.schema=oe,(ve=x(Ie))&&un(),be=Re.follow(function(){var _e;(Te=Ie(H))&&ve&&(_e=tr.bind(null,null),Te.then(_e,_e))}),Te&&typeof Te.then=="function"?Re.resolve(Te):be.then(function(){return Te})}),j.push(function(oe){var ve,Te,Ae=F._cfg.dbschema;ve=Ae,Te=oe,[].slice.call(Te.db.objectStoreNames).forEach(function(be){return ve[be]==null&&Te.db.deleteObjectStore(be)}),_s(D,[D.Transaction.prototype]),ho(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),H.schema=D._dbSchema}),j.push(function(oe){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===F._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(ve){return ve!=="$meta"})):oe.objectStore("$meta").put(F._cfg.version,"version"))})}),(function F(){return j.length?Re.resolve(j.shift()(H.idbtrans)).then(F):Re.resolve()})().then(function(){uu(ee,P)}))}).catch(A);var U,G;u(w).forEach(function(M){zl(v,M,w[M].primKey,w[M].indexes)}),bi(h,v),Re.follow(function(){return h.on.populate.fire(C)}).catch(A)})}function fo(h,p){uu(h._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var v=_a(0,h.idbdb,p);mo(h,h._dbSchema,p);for(var b=0,w=go(v,h._dbSchema).change;b<w.length;b++){var C=(A=>{if(A.change.length||A.recreate)return console.warn("Unable to patch indexes of table ".concat(A.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=p.objectStore(A.name);A.add.forEach(function(U){ln&&console.debug("Dexie upgrade patch: Creating missing index ".concat(A.name,".").concat(U.src)),po(k,U)})})(w[b]);if(typeof C=="object")return C.value}}function go(h,p){var v,b={del:[],add:[],change:[]};for(v in h)p[v]||b.del.push(v);for(v in p){var w=h[v],C=p[v];if(w){var A={name:v,def:C,recreate:!1,del:[],add:[],change:[]};if(""+(w.primKey.keyPath||"")!=""+(C.primKey.keyPath||"")||w.primKey.auto!==C.primKey.auto)A.recreate=!0,b.change.push(A);else{var k=w.idxByName,U=C.idxByName,G=void 0;for(G in k)U[G]||A.del.push(G);for(G in U){var M=k[G],D=U[G];M?M.src!==D.src&&A.change.push(D):A.add.push(D)}(0<A.del.length||0<A.add.length||0<A.change.length)&&b.change.push(A)}}else b.add.push([v,C])}return b}function zl(h,p,v,b){var w=h.db.createObjectStore(p,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});b.forEach(function(C){return po(w,C)})}function uu(h,p){u(h).forEach(function(v){p.db.objectStoreNames.contains(v)||(ln&&console.debug("Dexie: Creating missing table",v),zl(p,v,h[v].primKey,h[v].indexes))})}function po(h,p){h.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function _a(h,p,v){var b={};return me(p.objectStoreNames,0).forEach(function(w){for(var C=v.objectStore(w),A=Pr(co(G=C.keyPath),G||"",!0,!1,!!C.autoIncrement,G&&typeof G!="string",!0),k=[],U=0;U<C.indexNames.length;++U){var M=C.index(C.indexNames[U]),G=M.keyPath,M=Pr(M.name,G,!!M.unique,!!M.multiEntry,!1,G&&typeof G!="string",!1);k.push(M)}b[w]=ya(w,A,k)}),b}function mo(h,p,v){for(var b=v.db.objectStoreNames,w=0;w<b.length;++w){var C=b[w],A=v.objectStore(C);h._hasGetAll="getAll"in A;for(var k=0;k<A.indexNames.length;++k){var U,G=A.indexNames[k],M=A.index(G).keyPath,M=typeof M=="string"?M:"["+me(M).join("+")+"]";p[C]&&(U=p[C].idxByName[M])&&(U.name=G,delete p[C].idxByName[M],p[C].idxByName[G]=U)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function hu(h){return h.split(",").map(function(p,v){var w=p.split(":"),b=(b=w[1])==null?void 0:b.trim(),w=(p=w[0].trim()).replace(/([&*]|\+\+)/g,""),C=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return Pr(w,C||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),f(C),v===0,b)})}wa.prototype._createTableSchema=ya,wa.prototype._parseIndexSyntax=hu,wa.prototype._parseStoresSpec=function(h,p){var v=this;u(h).forEach(function(b){if(h[b]!==null){var w=v._parseIndexSyntax(h[b]),C=w.shift();if(!C)throw new Ee.Schema("Invalid schema for table "+b+": "+h[b]);if(C.unique=!0,C.multi)throw new Ee.Schema("Primary key cannot be multiEntry*");w.forEach(function(A){if(A.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")}),C=v._createTableSchema(b,C,w),p[b]=C}})},wa.prototype.stores=function(v){var p=this.db,v=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,v):v,p._versions),b={},w={};return v.forEach(function(C){m(b,C._cfg.storesSource),w=C._cfg.dbschema={},C._parseStoresSpec(b,w)}),p._dbSchema=w,_s(p,[p._allTables,p,p.Transaction.prototype]),ho(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],u(w),w),p._storeNames=u(w),this},wa.prototype.upgrade=function(h){return this._cfg.contentUpgrade=Gt(this._cfg.contentUpgrade||qe,h),this};var xd=wa;function wa(){}function Hl(h,p){var v=h._dbNamesDB;return v||(v=h._dbNamesDB=new jr(fs,{addons:[],indexedDB:h,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function yo(h){return h&&typeof h.databases=="function"}function Bl(h){return Yt(function(){return De.letThrough=!0,h()})}function Kl(h){return!("from"in h)}var Dn=function(h,p){var v;if(!this)return v=new Dn,h&&"d"in h&&m(v,h),v;m(this,arguments.length?{d:1,from:h,to:1<arguments.length?p:h}:{d:0})};function Ss(h,p,v){var b=dt(p,v);if(!isNaN(b)){if(0<b)throw RangeError();if(Kl(h))return m(h,{from:p,to:v,d:1});var b=h.l,w=h.r;if(dt(v,h.from)<0)return b?Ss(b,p,v):h.l={from:p,to:v,d:1,l:null,r:null},fu(h);if(0<dt(p,h.to))return w?Ss(w,p,v):h.r={from:p,to:v,d:1,l:null,r:null},fu(h);dt(p,h.from)<0&&(h.from=p,h.l=null,h.d=w?w.d+1:1),0<dt(v,h.to)&&(h.to=v,h.r=null,h.d=h.l?h.l.d+1:1),p=!h.r,b&&!h.l&&Hi(h,b),w&&p&&Hi(h,w)}}function Hi(h,p){Kl(p)||(function v(b,w){var C=w.from,A=w.l,k=w.r;Ss(b,C,w.to),A&&v(b,A),k&&v(b,k)})(h,p)}function du(h,p){var v=vo(p),b=v.next();if(!b.done)for(var w=b.value,C=vo(h),A=C.next(w.from),k=A.value;!b.done&&!A.done;){if(dt(k.from,w.to)<=0&&0<=dt(k.to,w.from))return!0;dt(w.from,k.from)<0?w=(b=v.next(k.from)).value:k=(A=C.next(w.from)).value}return!1}function vo(h){var p=Kl(h)?null:{s:0,n:h};return{next:function(v){for(var b=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,b)for(;p.n.l&&dt(v,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!b||dt(v,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function fu(h){var p,v,b,w=(((w=h.r)==null?void 0:w.d)||0)-(((w=h.l)==null?void 0:w.d)||0),w=1<w?"r":w<-1?"l":"";w&&(p=w=="r"?"l":"r",v=i({},h),b=h[w],h.from=b.from,h.to=b.to,h[w]=b[w],v[w]=b[p],(h[p]=v).d=ql(v)),h.d=ql(h)}function ql(v){var p=v.r,v=v.l;return(p?v?Math.max(p.d,v.d):p.d:v?v.d:0)+1}function bo(h,p){return u(p).forEach(function(v){h[v]?Hi(h[v],p[v]):h[v]=(function b(w){var C,A,k={};for(C in w)E(w,C)&&(A=w[C],k[C]=!A||typeof A!="object"||Oe.has(A.constructor)?A:b(A));return k})(p[v])}),h}function Gl(h,p){return h.all||p.all||Object.keys(h).some(function(v){return p[v]&&du(p[v],h[v])})}O(Dn.prototype,((St={add:function(h){return Hi(this,h),this},addKey:function(h){return Ss(this,h,h),this},addKeys:function(h){var p=this;return h.forEach(function(v){return Ss(p,v,v)}),this},hasKey:function(h){var p=vo(this).next(h).value;return p&&dt(p.from,h)<=0&&0<=dt(p.to,h)}})[$]=function(){return vo(this)},St));var Bi={},Fl={},$l=!1;function _o(h){bo(Fl,h),$l||($l=!0,setTimeout(function(){$l=!1,Vl(Fl,!(Fl={}))},0))}function Vl(h,p){p===void 0&&(p=!1);var v=new Set;if(h.all)for(var b=0,w=Object.values(Bi);b<w.length;b++)gu(k=w[b],h,v,p);else for(var C in h){var A,k,C=/^idb\:\/\/(.*)\/(.*)\//.exec(C);C&&(A=C[1],C=C[2],k=Bi["idb://".concat(A,"/").concat(C)])&&gu(k,h,v,p)}v.forEach(function(U){return U()})}function gu(h,p,v,b){for(var w=[],C=0,A=Object.entries(h.queries.query);C<A.length;C++){for(var k=A[C],U=k[0],G=[],M=0,D=k[1];M<D.length;M++){var L=D[M];Gl(p,L.obsSet)?L.subscribers.forEach(function(Y){return v.add(Y)}):b&&G.push(L)}b&&w.push([U,G])}if(b)for(var H=0,P=w;H<P.length;H++){var j=P[H],U=j[0],G=j[1];h.queries.query[U]=G}}function Id(h){var p=h._state,v=h._deps.indexedDB;if(p.isBeingOpened||h.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Lt(p.dbOpenError):h});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var b=p.openCanceller,w=Math.round(10*h.verno),C=!1;function A(){if(p.openCanceller!==b)throw new Ee.DatabaseClosed("db.open() was cancelled")}function k(){return new Re(function(L,H){if(A(),!v)throw new Ee.MissingAPI;var P=h.name,j=p.autoSchema||!w?v.open(P):v.open(P,w);if(!j)throw new Ee.MissingAPI;j.onerror=Sr(H),j.onblocked=Ft(h._fireOnBlocked),j.onupgradeneeded=Ft(function(Y){var ee;M=j.transaction,p.autoSchema&&!h._options.allowEmptyDB?(j.onerror=ji,M.abort(),j.result.close(),(ee=v.deleteDatabase(P)).onsuccess=ee.onerror=Ft(function(){H(new Ee.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(M.onerror=Sr(H),ee=Y.oldVersion>Math.pow(2,62)?0:Y.oldVersion,D=ee<1,h.idbdb=j.result,C&&fo(h,M),ws(h,ee/10,M,H))},H),j.onsuccess=Ft(function(){M=null;var Y,ee,F,oe,ve,Te,Ae=h.idbdb=j.result,be=me(Ae.objectStoreNames);if(0<be.length)try{var Me=Ae.transaction((ve=be).length===1?ve[0]:ve,"readonly");if(p.autoSchema)Te=Ae,oe=Me,(F=h).verno=Te.version/10,oe=F._dbSchema=_a(0,Te,oe),F._storeNames=me(Te.objectStoreNames,0),ho(F,[F._allTables],u(oe),oe);else if(mo(h,h._dbSchema,Me),ee=Me,((ee=go(_a(0,(Y=h).idbdb,ee),Y._dbSchema)).add.length||ee.change.some(function(Ie){return Ie.add.length||Ie.change.length}))&&!C)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),w=Ae.version+1,C=!0,L(k());bi(h,Me)}catch{}Di.push(h),Ae.onversionchange=Ft(function(Ie){p.vcFired=!0,h.on("versionchange").fire(Ie)}),Ae.onclose=Ft(function(){h.close({disableAutoOpen:!1})}),D&&(be=h._deps,ve=P,yo(Te=be.indexedDB)||ve===fs||Hl(Te,be.IDBKeyRange).put({name:ve}).catch(qe)),L()},H)}).catch(function(L){switch(L?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<w)return w=0,k()}return Re.reject(L)})}var U,G=p.dbReadyResolve,M=null,D=!1;return Re.race([b,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(L){function H(){return indexedDB.databases().finally(L)}U=setInterval(H,100),H()}).finally(function(){return clearInterval(U)}):Promise.resolve()).then(k)]).then(function(){return A(),p.onReadyBeingFired=[],Re.resolve(Bl(function(){return h.on.ready.fire(h.vip)})).then(function L(){var H;if(0<p.onReadyBeingFired.length)return H=p.onReadyBeingFired.reduce(Gt,qe),p.onReadyBeingFired=[],Re.resolve(Bl(function(){return H(h.vip)})).then(L)})}).finally(function(){p.openCanceller===b&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(L){p.dbOpenError=L;try{M&&M.abort()}catch{}return b===p.openCanceller&&h._close(),Lt(L)}).finally(function(){p.openComplete=!0,G()}).then(function(){var L;return D&&(L={},h.tables.forEach(function(H){H.schema.indexes.forEach(function(P){P.name&&(L["idb://".concat(h.name,"/").concat(H.name,"/").concat(P.name)]=new Dn(-1/0,[[[]]]))}),L["idb://".concat(h.name,"/").concat(H.name,"/")]=L["idb://".concat(h.name,"/").concat(H.name,"/:dels")]=new Dn(-1/0,[[[]]])}),Nn(ma).fire(L),Vl(L,!0)),h})}function Cs(h){function p(C){return h.next(C)}var v=w(p),b=w(function(C){return h.throw(C)});function w(C){return function(k){var k=C(k),U=k.value;return k.done?U:U&&typeof U.then=="function"?U.then(v,b):f(U)?Promise.all(U).then(v,b):v(U)}}return w(p)()}function _i(h,p,v){for(var b=f(h)?h.slice():[h],w=0;w<v;++w)b.push(p);return b}var Nd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return i(i({},h),{table:function(b){var v=h.table(b),b=v.schema,w={},C=[];function A(L,H,P){var F=yn(L),j=w[F]=w[F]||[],Y=L==null?0:typeof L=="string"?1:L.length,ee=0<H,F=i(i({},P),{name:ee?"".concat(F,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:ee,keyTail:H,keyLength:Y,extractKey:ba(L),unique:!ee&&P.unique});return j.push(F),F.isPrimaryKey||C.push(F),1<Y&&A(Y===2?L[0]:L.slice(0,Y-1),H+1,P),j.sort(function(oe,ve){return oe.keyTail-ve.keyTail}),F}var k=A(b.primaryKey.keyPath,0,b.primaryKey);w[":id"]=[k];for(var U=0,G=b.indexes;U<G.length;U++){var M=G[U];A(M.keyPath,0,M)}function D(L){var H,P=L.query.index;return P.isVirtual?i(i({},L),{query:{index:P.lowLevelIndex,range:(H=L.query.range,P=P.keyTail,{type:H.type===1?2:H.type,lower:_i(H.lower,H.lowerOpen?h.MAX_KEY:h.MIN_KEY,P),lowerOpen:!0,upper:_i(H.upper,H.upperOpen?h.MIN_KEY:h.MAX_KEY,P),upperOpen:!0})}}):L}return i(i({},v),{schema:i(i({},b),{primaryKey:k,indexes:C,getIndexByKeyPath:function(L){return(L=w[yn(L)])&&L[0]}}),count:function(L){return v.count(D(L))},query:function(L){return v.query(D(L))},openCursor:function(L){var H=L.query.index,P=H.keyTail,j=H.keyLength;return H.isVirtual?v.openCursor(D(L)).then(function(ee){return ee&&Y(ee)}):v.openCursor(L);function Y(ee){return Object.create(ee,{continue:{value:function(F){F!=null?ee.continue(_i(F,L.reverse?h.MAX_KEY:h.MIN_KEY,P)):L.unique?ee.continue(ee.key.slice(0,j).concat(L.reverse?h.MIN_KEY:h.MAX_KEY,P)):ee.continue()}},continuePrimaryKey:{value:function(F,oe){ee.continuePrimaryKey(_i(F,h.MAX_KEY,P),oe)}},primaryKey:{get:function(){return ee.primaryKey}},key:{get:function(){var F=ee.key;return j===1?F[0]:F.slice(0,j)}},value:{get:function(){return ee.value}}})}}})}})}};function wo(h,p,v,b){return v=v||{},b=b||"",u(h).forEach(function(w){var C,A,k;E(p,w)?(C=h[w],A=p[w],typeof C=="object"&&typeof A=="object"&&C&&A?(k=Je(C))!==Je(A)?v[b+w]=p[w]:k==="Object"?wo(C,A,v,b+w+"."):C!==A&&(v[b+w]=p[w]):C!==A&&(v[b+w]=p[w])):v[b+w]=void 0}),u(p).forEach(function(w){E(h,w)||(v[b+w]=p[w])}),v}function So(h,p){return p.type==="delete"?p.keys:p.keys||p.values.map(h.extractKey)}var pu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return i(i({},h),{table:function(p){var v=h.table(p),b=v.schema.primaryKey;return i(i({},v),{mutate:function(w){var C=De.trans,A=C.table(p).hook,k=A.deleting,U=A.creating,G=A.updating;switch(w.type){case"add":if(U.fire===qe)break;return C._promise("readwrite",function(){return M(w)},!0);case"put":if(U.fire===qe&&G.fire===qe)break;return C._promise("readwrite",function(){return M(w)},!0);case"delete":if(k.fire===qe)break;return C._promise("readwrite",function(){return M(w)},!0);case"deleteRange":if(k.fire===qe)break;return C._promise("readwrite",function(){return(function D(L,H,P){return v.query({trans:L,values:!1,query:{index:b,range:H},limit:P}).then(function(j){var Y=j.result;return M({type:"delete",keys:Y,trans:L}).then(function(ee){return 0<ee.numFailures?Promise.reject(ee.failures[0]):Y.length<P?{failures:[],numFailures:0,lastResult:void 0}:D(L,i(i({},H),{lower:Y[Y.length-1],lowerOpen:!0}),P)})})})(w.trans,w.range,1e4)},!0)}return v.mutate(w);function M(D){var L,H,P,j=De.trans,Y=D.keys||So(b,D);if(Y)return(D=D.type==="add"||D.type==="put"?i(i({},D),{keys:Y}):i({},D)).type!=="delete"&&(D.values=o([],D.values)),D.keys&&(D.keys=o([],D.keys)),L=v,P=Y,((H=D).type==="add"?Promise.resolve([]):L.getMany({trans:H.trans,keys:P,cache:"immutable"})).then(function(ee){var F=Y.map(function(oe,ve){var Te,Ae,be,Me=ee[ve],Ie={onerror:null,onsuccess:null};return D.type==="delete"?k.fire.call(Ie,oe,Me,j):D.type==="add"||Me===void 0?(Te=U.fire.call(Ie,oe,D.values[ve],j),oe==null&&Te!=null&&(D.keys[ve]=oe=Te,b.outbound||pe(D.values[ve],b.keyPath,oe))):(Te=wo(Me,D.values[ve]),(Ae=G.fire.call(Ie,Te,oe,Me,j))&&(be=D.values[ve],Object.keys(Ae).forEach(function(_e){E(be,_e)?be[_e]=Ae[_e]:pe(be,_e,Ae[_e])}))),Ie});return v.mutate(D).then(function(oe){for(var ve=oe.failures,Te=oe.results,Ae=oe.numFailures,oe=oe.lastResult,be=0;be<Y.length;++be){var Me=(Te||Y)[be],Ie=F[be];Me==null?Ie.onerror&&Ie.onerror(ve[be]):Ie.onsuccess&&Ie.onsuccess(D.type==="put"&&ee[be]?D.values[be]:Me)}return{failures:ve,results:Te,numFailures:Ae,lastResult:oe}}).catch(function(oe){return F.forEach(function(ve){return ve.onerror&&ve.onerror(oe)}),Promise.reject(oe)})});throw new Error("Keys missing")}}})}})}};function Yl(h,p,v){try{if(!p||p.keys.length<h.length)return null;for(var b=[],w=0,C=0;w<p.keys.length&&C<h.length;++w)dt(p.keys[w],h[C])===0&&(b.push(v?Ce(p.values[w]):p.values[w]),++C);return b.length===h.length?b:null}catch{return null}}var mu={stack:"dbcore",level:-1,create:function(h){return{table:function(p){var v=h.table(p);return i(i({},v),{getMany:function(b){var w;return b.cache?(w=Yl(b.keys,b.trans._cache,b.cache==="clone"))?Re.resolve(w):v.getMany(b).then(function(C){return b.trans._cache={keys:b.keys,values:b.cache==="clone"?Ce(C):C},C}):v.getMany(b)},mutate:function(b){return b.type!=="add"&&(b.trans._cache=null),v.mutate(b)}})}}}};function Ki(h,p){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function yu(h,p){switch(h){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Dd={stack:"dbcore",level:0,name:"Observability",create:function(h){var p=h.schema.name,v=new Dn(h.MIN_KEY,h.MAX_KEY);return i(i({},h),{transaction:function(b,w,C){if(De.subscr&&w!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier));return h.transaction(b,w,C)},table:function(b){function w(Y){var j,Y=Y.query;return[j=Y.index,new Dn((j=(Y=Y.range).lower)!=null?j:h.MIN_KEY,(j=Y.upper)!=null?j:h.MAX_KEY)]}var C=h.table(b),A=C.schema,k=A.primaryKey,U=A.indexes,G=k.extractKey,M=k.outbound,D=k.autoIncrement&&U.filter(function(P){return P.compound&&P.keyPath.includes(k.keyPath)}),L=i(i({},C),{mutate:function(P){function j(Pe){return Pe="idb://".concat(p,"/").concat(b,"/").concat(Pe),ve[Pe]||(ve[Pe]=new Dn)}var Y,ee,F,oe=P.trans,ve=P.mutatedParts||(P.mutatedParts={}),Te=j(""),Ae=j(":dels"),be=P.type,Ie=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[So(k,P).filter(function(Pe){return Pe}),P.values]:[],Me=Ie[0],Ie=Ie[1],_e=P.trans._cache;return f(Me)?(Te.addKeys(Me),(be=be==="delete"||Me.length===Ie.length?Yl(Me,_e):null)||Ae.addKeys(Me),(be||Ie)&&(Y=j,ee=be,F=Ie,A.indexes.forEach(function(Pe){var at=Y(Pe.name||"");function ft(st){return st!=null?Pe.extractKey(st):null}function Qe(st){Pe.multiEntry&&f(st)?st.forEach(function(zt){return at.addKey(zt)}):at.addKey(st)}(ee||F).forEach(function(st,Ut){var Jn=ee&&ft(ee[Ut]),Ut=F&&ft(F[Ut]);dt(Jn,Ut)!==0&&(Jn!=null&&Qe(Jn),Ut!=null)&&Qe(Ut)})}))):Me?(Ie={from:(_e=Me.lower)!=null?_e:h.MIN_KEY,to:(be=Me.upper)!=null?be:h.MAX_KEY},Ae.add(Ie),Te.add(Ie)):(Te.add(v),Ae.add(v),A.indexes.forEach(function(Pe){return j(Pe.name).add(v)})),C.mutate(P).then(function(Pe){return!Me||P.type!=="add"&&P.type!=="put"||(Te.addKeys(Pe.results),D&&D.forEach(function(at){for(var ft=P.values.map(function(Jn){return at.extractKey(Jn)}),Qe=at.keyPath.findIndex(function(Jn){return Jn===k.keyPath}),st=0,zt=Pe.results.length;st<zt;++st)ft[st][Qe]=Pe.results[st];j(at.name).addKeys(ft)})),oe.mutatedParts=bo(oe.mutatedParts||{},ve),Pe})}}),H={get:function(P){return[k,new Dn(P.key)]},getMany:function(P){return[k,new Dn().addKeys(P.keys)]},count:w,query:w,openCursor:w};return u(H).forEach(function(P){L[P]=function(j){var Y=De.subscr,ee=!!Y,F=Ki(De,C)&&yu(P,j)?j.obsSet={}:Y;if(ee){var oe,Y=function(Ie){return Ie="idb://".concat(p,"/").concat(b,"/").concat(Ie),F[Ie]||(F[Ie]=new Dn)},ve=Y(""),Te=Y(":dels"),ee=H[P](j),Ae=ee[0],ee=ee[1];if((P==="query"&&Ae.isPrimaryKey&&!j.values?Te:Y(Ae.name||"")).add(ee),!Ae.isPrimaryKey){if(P!=="count")return oe=P==="query"&&M&&j.values&&C.query(i(i({},j),{values:!1})),C[P].apply(this,arguments).then(function(Ie){if(P==="query"){if(M&&j.values)return oe.then(function(ft){return ft=ft.result,ve.addKeys(ft),Ie});var _e=j.values?Ie.result.map(G):Ie.result;(j.values?ve:Te).addKeys(_e)}else{var Pe,at;if(P==="openCursor")return at=j.values,(Pe=Ie)&&Object.create(Pe,{key:{get:function(){return Te.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var ft=Pe.primaryKey;return Te.addKey(ft),ft}},value:{get:function(){return at&&ve.addKey(Pe.primaryKey),Pe.value}}})}return Ie});Te.add(v)}}return C[P].apply(this,arguments)}}),L}})}};function vu(h,p,v){var b;return v.numFailures===0?p:p.type==="deleteRange"||(b=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1,v.numFailures===b)?null:(b=i({},p),f(b.keys)&&(b.keys=b.keys.filter(function(w,C){return!(C in v.failures)})),"values"in b&&f(b.values)&&(b.values=b.values.filter(function(w,C){return!(C in v.failures)})),b)}function Co(h,p){return v=h,((b=p).lower===void 0||(b.lowerOpen?0<dt(v,b.lower):0<=dt(v,b.lower)))&&(v=h,(b=p).upper===void 0||(b.upperOpen?dt(v,b.upper)<0:dt(v,b.upper)<=0));var v,b}function Ql(h,p,v,b,w,C){var A,k,U,G,M,D;return!v||v.length===0||(A=p.query.index,k=A.multiEntry,U=p.query.range,G=b.schema.primaryKey.extractKey,M=A.extractKey,D=(A.lowLevelIndex||A).extractKey,(b=v.reduce(function(L,H){var P=L,j=[];if(H.type==="add"||H.type==="put")for(var Y=new Dn,ee=H.values.length-1;0<=ee;--ee){var F,oe=H.values[ee],ve=G(oe);!Y.hasKey(ve)&&(F=M(oe),k&&f(F)?F.some(function(Ie){return Co(Ie,U)}):Co(F,U))&&(Y.addKey(ve),j.push(oe))}switch(H.type){case"add":var Te=new Dn().addKeys(p.values?L.map(function(_e){return G(_e)}):L),P=L.concat(p.values?j.filter(function(_e){return _e=G(_e),!Te.hasKey(_e)&&(Te.addKey(_e),!0)}):j.map(function(_e){return G(_e)}).filter(function(_e){return!Te.hasKey(_e)&&(Te.addKey(_e),!0)}));break;case"put":var Ae=new Dn().addKeys(H.values.map(function(_e){return G(_e)}));P=L.filter(function(_e){return!Ae.hasKey(p.values?G(_e):_e)}).concat(p.values?j:j.map(function(_e){return G(_e)}));break;case"delete":var be=new Dn().addKeys(H.keys);P=L.filter(function(_e){return!be.hasKey(p.values?G(_e):_e)});break;case"deleteRange":var Me=H.range;P=L.filter(function(_e){return!Co(G(_e),Me)})}return P},h))===h)?h:(b.sort(function(L,H){return dt(D(L),D(H))||dt(G(L),G(H))}),p.limit&&p.limit<1/0&&(b.length>p.limit?b.length=p.limit:h.length===p.limit&&b.length<p.limit&&(w.dirty=!0)),C?Object.freeze(b):b)}function Sa(h,p){return dt(h.lower,p.lower)===0&&dt(h.upper,p.upper)===0&&!!h.lowerOpen==!!p.lowerOpen&&!!h.upperOpen==!!p.upperOpen}function Es(h,p){return((v,b,w,C)=>{if(v===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;if((v=dt(v,b))===0){if(w&&C)return 0;if(w)return 1;if(C)return-1}return v})(h.lower,p.lower,h.lowerOpen,p.lowerOpen)<=0&&0<=((v,b,w,C)=>{if(v===void 0)return b!==void 0?1:0;if(b===void 0)return-1;if((v=dt(v,b))===0){if(w&&C)return 0;if(w)return-1;if(C)return 1}return v})(h.upper,p.upper,h.upperOpen,p.upperOpen)}function Ud(h,p,v,b){h.subscribers.add(v),b.addEventListener("abort",function(){var w,C;h.subscribers.delete(v),h.subscribers.size===0&&(w=h,C=p,setTimeout(function(){w.subscribers.size===0&&ie(C,w)},3e3))})}var Eo={stack:"dbcore",level:0,name:"Cache",create:function(h){var p=h.schema.name;return i(i({},h),{transaction:function(v,b,w){var C,A,k=h.transaction(v,b,w);return b==="readwrite"&&(w=(C=new AbortController).signal,k.addEventListener("abort",(A=function(U){return function(){if(C.abort(),b==="readwrite"){for(var G=new Set,M=0,D=v;M<D.length;M++){var L=D[M],H=Bi["idb://".concat(p,"/").concat(L)];if(H){var P=h.table(L),j=H.optimisticOps.filter(function(Pe){return Pe.trans===k});if(k._explicit&&U&&k.mutatedParts)for(var Y=0,ee=Object.values(H.queries.query);Y<ee.length;Y++)for(var F=0,oe=(Ae=ee[Y]).slice();F<oe.length;F++)Gl((be=oe[F]).obsSet,k.mutatedParts)&&(ie(Ae,be),be.subscribers.forEach(function(Pe){return G.add(Pe)}));else if(0<j.length){H.optimisticOps=H.optimisticOps.filter(function(Pe){return Pe.trans!==k});for(var ve=0,Te=Object.values(H.queries.query);ve<Te.length;ve++)for(var Ae,be,Me,Ie=0,_e=(Ae=Te[ve]).slice();Ie<_e.length;Ie++)(be=_e[Ie]).res!=null&&k.mutatedParts&&(U&&!be.dirty?(Me=Object.isFrozen(be.res),Me=Ql(be.res,be.req,j,P,be,Me),be.dirty?(ie(Ae,be),be.subscribers.forEach(function(Pe){return G.add(Pe)})):Me!==be.res&&(be.res=Me,be.promise=Re.resolve({result:Me}))):(be.dirty&&ie(Ae,be),be.subscribers.forEach(function(Pe){return G.add(Pe)})))}}}G.forEach(function(Pe){return Pe()})}}})(!1),{signal:w}),k.addEventListener("error",A(!1),{signal:w}),k.addEventListener("complete",A(!0),{signal:w})),k},table:function(v){var b=h.table(v),w=b.schema.primaryKey;return i(i({},b),{mutate:function(C){var A,k=De.trans;return!w.outbound&&k.db._options.cache!=="disabled"&&!k.explicit&&k.idbtrans.mode==="readwrite"&&(A=Bi["idb://".concat(p,"/").concat(v)])?(k=b.mutate(C),C.type!=="add"&&C.type!=="put"||!(50<=C.values.length||So(w,C).some(function(U){return U==null}))?(A.optimisticOps.push(C),C.mutatedParts&&_o(C.mutatedParts),k.then(function(U){0<U.numFailures&&(ie(A.optimisticOps,C),(U=vu(0,C,U))&&A.optimisticOps.push(U),C.mutatedParts)&&_o(C.mutatedParts)}),k.catch(function(){ie(A.optimisticOps,C),C.mutatedParts&&_o(C.mutatedParts)})):k.then(function(U){var G=vu(0,i(i({},C),{values:C.values.map(function(M,D){var L;return U.failures[D]?M:(pe(L=(L=w.keyPath)!=null&&L.includes(".")?Ce(M):i({},M),w.keyPath,U.results[D]),L)})}),U);A.optimisticOps.push(G),queueMicrotask(function(){return C.mutatedParts&&_o(C.mutatedParts)})}),k):b.mutate(C)},query:function(C){var A,k,U,G,M,D,L;return Ki(De,b)&&yu("query",C)?(A=((U=De.trans)==null?void 0:U.db._options.cache)==="immutable",k=(U=De).requery,U=U.signal,D=((H,P,j,Y)=>{var ee=Bi["idb://".concat(H,"/").concat(P)];if(!ee)return[];if(!(H=ee.queries[j]))return[null,!1,ee,null];var F=H[(Y.query?Y.query.index.name:null)||""];if(!F)return[null,!1,ee,null];switch(j){case"query":var oe=F.find(function(ve){return ve.req.limit===Y.limit&&ve.req.values===Y.values&&Sa(ve.req.query.range,Y.query.range)});return oe?[oe,!0,ee,F]:[F.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=Y.limit&&(!Y.values||ve.req.values)&&Es(ve.req.query.range,Y.query.range)}),!1,ee,F];case"count":return oe=F.find(function(ve){return Sa(ve.req.query.range,Y.query.range)}),[oe,!!oe,ee,F]}})(p,v,"query",C),L=D[0],G=D[2],M=D[3],L&&D[1]?L.obsSet=C.obsSet:(D=b.query(C).then(function(H){var P=H.result;if(L&&(L.res=P),A){for(var j=0,Y=P.length;j<Y;++j)Object.freeze(P[j]);Object.freeze(P)}else H.result=Ce(P);return H}).catch(function(H){return M&&L&&ie(M,L),Promise.reject(H)}),L={obsSet:C.obsSet,promise:D,subscribers:new Set,type:"query",req:C,dirty:!1},M?M.push(L):(M=[L],(G=G||(Bi["idb://".concat(p,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[C.query.index.name||""]=M)),Ud(L,M,k,U),L.promise.then(function(H){return{result:Ql(H.result,C,G?.optimisticOps,b,L,A)}})):b.query(C)}})}})}};function Ts(h,p){return new Proxy(h,{get:function(v,b,w){return b==="db"?p:Reflect.get(v,b,w)}})}Zt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Ee.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var p=this._versions,v=p.filter(function(b){return b._cfg.version===h})[0];return v||(v=new this.Version(h),p.push(v),p.sort(Ll),v.stores({}),this._state.autoSchema=!1),v},Zt.prototype._whenReady=function(h){var p=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?h():new Re(function(v,b){if(p._state.openComplete)return b(new Ee.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void b(new Ee.DatabaseClosed);p.open().catch(qe)}p._state.dbReadyPromise.then(v,b)}).then(h)},Zt.prototype.use=function(w){var p=w.stack,v=w.create,b=w.level,w=w.name,C=(w&&this.unuse({stack:p,name:w}),this._middlewares[p]||(this._middlewares[p]=[]));return C.push({stack:p,create:v,level:b??10,name:w}),C.sort(function(A,k){return A.level-k.level}),this},Zt.prototype.unuse=function(h){var p=h.stack,v=h.name,b=h.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(w){return b?w.create!==b:!!v&&w.name!==v})),this},Zt.prototype.open=function(){var h=this;return _r(Pn,function(){return Id(h)})},Zt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,p=Di.indexOf(this);if(0<=p&&Di.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new Re(function(v){h.dbReadyResolve=v}),h.openCanceller=new Re(function(v,b){h.cancelOpen=b}))},Zt.prototype.close=function(p){var p=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,v=this._state;p?(v.isBeingOpened&&v.cancelOpen(new Ee.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Ee.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Zt.prototype.delete=function(h){var p=this,v=(h===void 0&&(h={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),b=this._state;return new Re(function(w,C){function A(){p.close(h);var k=p._deps.indexedDB.deleteDatabase(p.name);k.onsuccess=Ft(function(){var U,G,M;U=p._deps,G=p.name,yo(M=U.indexedDB)||G===fs||Hl(M,U.IDBKeyRange).delete(G).catch(qe),w()}),k.onerror=Sr(C),k.onblocked=p._fireOnBlocked}if(v)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");b.isBeingOpened?b.dbReadyPromise.then(A):A()})},Zt.prototype.backendDB=function(){return this.idbdb},Zt.prototype.isOpen=function(){return this.idbdb!==null},Zt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Zt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Zt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Zt.prototype,"tables",{get:function(){var h=this;return u(this._allTables).map(function(p){return h._allTables[p]})},enumerable:!1,configurable:!0}),Zt.prototype.transaction=function(){var h=(function(p,v,b){var w=arguments.length;if(w<2)throw new Ee.InvalidArgument("Too few arguments");for(var C=new Array(w-1);--w;)C[w-1]=arguments[w];return b=C.pop(),[p,fe(C),b]}).apply(this,arguments);return this._transaction.apply(this,h)},Zt.prototype._transaction=function(h,p,v){var b,w,C=this,A=De.trans,k=(A&&A.db===this&&h.indexOf("!")===-1||(A=null),h.indexOf("?")!==-1);h=h.replace("!","").replace("?","");try{if(w=p.map(function(G){if(G=G instanceof C.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),h=="r"||h===Xr)b=Xr;else{if(h!="rw"&&h!=yi)throw new Ee.InvalidArgument("Invalid transaction mode: "+h);b=yi}if(A){if(A.mode===Xr&&b===yi){if(!k)throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&w.forEach(function(G){if(A&&A.storeNames.indexOf(G)===-1){if(!k)throw new Ee.SubTransaction("Table "+G+" not included in parent transaction.");A=null}}),k&&A&&!A.active&&(A=null)}}catch(G){return A?A._promise(null,function(M,D){D(G)}):Lt(G)}var U=(function G(M,D,L,H,P){return Re.resolve().then(function(){var F=De.transless||De,j=M._createTransaction(D,L,M._dbSchema,H),F=(j.explicit=!0,{trans:j,transless:F});if(H)j.idbtrans=H.idbtrans;else try{j.create(),j.idbtrans._explicit=!0,M._state.PR1398_maxLoop=3}catch(oe){return oe.name===Ve.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return G(M,D,L,null,P)})):Lt(oe)}var Y,ee=x(P),F=(ee&&un(),Re.follow(function(){var oe;(Y=P.call(j,j))&&(ee?(oe=tr.bind(null,null),Y.then(oe,oe)):typeof Y.next=="function"&&typeof Y.throw=="function"&&(Y=Cs(Y)))},F));return(Y&&typeof Y.then=="function"?Re.resolve(Y).then(function(oe){return j.active?oe:Lt(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):F.then(function(){return Y})).then(function(oe){return H&&j._resolve(),j._completion.then(function(){return oe})}).catch(function(oe){return j._reject(oe),Lt(oe)})})}).bind(null,this,b,w,A,v);return A?A._promise(b,U,"lock"):De.trans?_r(De.transless,function(){return C._whenReady(U)}):this._whenReady(U)},Zt.prototype.table=function(h){if(E(this._allTables,h))return this._allTables[h];throw new Ee.InvalidTable("Table ".concat(h," does not exist"))};var jr=Zt;function Zt(h,p){var v,b,w,C,A,k=this,U=(this._middlewares={},this.verno=0,Zt.dependencies),U=(this._options=p=i({addons:Zt.addons,autoOpen:!0,indexedDB:U.indexedDB,IDBKeyRange:U.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},p.addons),G=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:qe,dbReadyPromise:null,cancelOpen:qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen}),M=(G.dbReadyPromise=new Re(function(D){G.dbReadyResolve=D}),G.openCanceller=new Re(function(D,L){G.cancelOpen=L}),this._state=G,this.name=h,this.on=ms(this,"populate","blocked","versionchange","close",{ready:[Gt,qe]}),this.once=function(D,L){var H=function(){for(var P=[],j=0;j<arguments.length;j++)P[j]=arguments[j];k.on(D).unsubscribe(H),L.apply(k,P)};return k.on(D,H)},this.on.ready.subscribe=ce(this.on.ready.subscribe,function(D){return function(L,H){Zt.vip(function(){var P,j=k._state;j.openComplete?(j.dbOpenError||Re.resolve().then(L),H&&D(L)):j.onReadyBeingFired?(j.onReadyBeingFired.push(L),H&&D(L)):(D(L),P=k,H||D(function Y(){P.on.ready.unsubscribe(L),P.on.ready.unsubscribe(Y)}))})}}),this.Collection=(v=this,In(Od.prototype,function(Y,j){this.db=v;var H=Nl,P=null;if(j)try{H=j()}catch(F){P=F}var j=Y._ctx,Y=j.table,ee=Y.hook.reading.fire;this._ctx={table:Y,index:j.index,isPrimKey:!j.index||Y.schema.primKey.keyPath&&j.index===Y.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:j.or,valueMapper:ee!==qt?ee:null}})),this.Table=(b=this,In(Dl.prototype,function(D,L,H){this.db=b,this._tx=H,this.name=D,this.schema=L,this.hook=b._allTables[D]?b._allTables[D].hook:ms(null,{creating:[lt,qe],reading:[Tt,qt],updating:[wt,qe],deleting:[gn,qe]})})),this.Transaction=(w=this,In(jl.prototype,function(D,L,H,P,j){var Y=this;D!=="readonly"&&L.forEach(function(ee){ee=(ee=H[ee])==null?void 0:ee.yProps,ee&&(L=L.concat(ee.map(function(F){return F.updatesTable})))}),this.db=w,this.mode=D,this.storeNames=L,this.schema=H,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=ms(this,"complete","error","abort"),this.parent=j||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(ee,F){Y._resolve=ee,Y._reject=F}),this._completion.then(function(){Y.active=!1,Y.on.complete.fire()},function(ee){var F=Y.active;return Y.active=!1,Y.on.error.fire(ee),Y.parent?Y.parent._reject(ee):F&&Y.idbtrans&&Y.idbtrans.abort(),Lt(ee)})})),this.Version=(C=this,In(xd.prototype,function(D){this.db=C,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,In(Pi.prototype,function(D,L,H){if(this.db=A,this._ctx={table:D,index:L===":id"?null:L,or:H},this._cmp=this._ascending=dt,this._descending=function(P,j){return dt(j,P)},this._max=function(P,j){return 0<dt(P,j)?P:j},this._min=function(P,j){return dt(P,j)<0?P:j},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=va(p.IDBKeyRange),this._createTransaction=function(D,L,H,P){return new k.Transaction(D,L,H,k._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(D){k.on("blocked").fire(D),Di.filter(function(L){return L.name===k.name&&L!==k&&!L._state.vcFired}).map(function(L){return L.on("versionchange").fire(D)})},this.use(mu),this.use(Eo),this.use(Dd),this.use(Nd),this.use(pu),new Proxy(this,{get:function(D,L,H){var P;return L==="_vip"||(L==="table"?function(j){return Ts(k.table(j),M)}:(P=Reflect.get(D,L,H))instanceof Dl?Ts(P,M):L==="tables"?P.map(function(j){return Ts(j,M)}):L==="_createTransaction"?function(){return Ts(P.apply(this,arguments),M)}:P)}}));this.vip=M,U.forEach(function(D){return D(k)})}var Ca,qi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",bu=(To.prototype.subscribe=function(h,p,v){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:p,complete:v})},To.prototype[qi]=function(){return this},To);function To(h){this._subscribe=h}try{Ca={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Ca={indexedDB:null,IDBKeyRange:null}}function _u(h){var p,v=!1,b=new bu(function(w){var C=x(h),A,k=!1,U={},G={},M={get closed(){return k},unsubscribe:function(){k||(k=!0,A&&A.abort(),D&&Nn.storagemutated.unsubscribe(H))}},D=(w.start&&w.start(M),!1),L=function(){return mi(P)},H=function(j){bo(U,j),Gl(G,U)&&L()},P=function(){var j,Y,ee;!k&&Ca.indexedDB&&(U={},j={},A&&A.abort(),A=new AbortController,ee=(F=>{var oe=fi();try{C&&un();var ve=Yt(h,F);return ve=C?ve.finally(tr):ve}finally{oe&&Dr()}})(Y={subscr:j,signal:A.signal,requery:L,querier:h,trans:null}),Promise.resolve(ee).then(function(F){v=!0,p=F,k||Y.signal.aborted||(U={},(oe=>{for(var ve in oe)if(E(oe,ve))return;return 1})(G=j)||D||(Nn(ma,H),D=!0),mi(function(){return!k&&w.next&&w.next(F)}))},function(F){v=!1,["DatabaseClosedError","AbortError"].includes(F?.name)||k||mi(function(){k||w.error&&w.error(F)})}))};return setTimeout(L,0),M});return b.hasValue=function(){return v},b.getValue=function(){return p},b}var Gi=jr;function Jl(h){var p=wi;try{wi=!0,Nn.storagemutated.fire(h),Vl(h,!0)}finally{wi=p}}O(Gi,i(i({},X),{delete:function(h){return new Gi(h,{addons:[]}).delete()},exists:function(h){return new Gi(h,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return p=Gi.dependencies,v=p.indexedDB,p=p.IDBKeyRange,(yo(v)?Promise.resolve(v.databases()).then(function(b){return b.map(function(w){return w.name}).filter(function(w){return w!==fs})}):Hl(v,p).toCollection().primaryKeys()).then(h)}catch{return Lt(new Ee.MissingAPI)}var p,v},defineClass:function(){return function(h){m(this,h)}},ignoreTransaction:function(h){return De.trans?_r(De.transless,h):h()},vip:Bl,async:function(h){return function(){try{var p=Cs(h.apply(this,arguments));return p&&typeof p.then=="function"?p:Re.resolve(p)}catch(v){return Lt(v)}}},spawn:function(h,p,v){try{var b=Cs(h.apply(v,p||[]));return b&&typeof b.then=="function"?b:Re.resolve(b)}catch(w){return Lt(w)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(h,p){return h=Re.resolve(typeof h=="function"?Gi.ignoreTransaction(h):h).timeout(p||6e4),De.trans?De.trans.waitFor(h):h},Promise:Re,debug:{get:function(){return ln},set:function(h){er(h)}},derive:V,extend:m,props:O,override:ce,Events:ms,on:Nn,liveQuery:_u,extendObservabilitySet:bo,getByKeyPath:xe,setByKeyPath:pe,delByKeyPath:function(h,p){typeof p=="string"?pe(h,p,void 0):"length"in p&&[].map.call(p,function(v){pe(h,v,void 0)})},shallowClone:I,deepClone:Ce,getObjectDiff:wo,cmp:dt,asap:Ze,minKey:-1/0,addons:[],connections:Di,errnames:Ve,dependencies:Ca,cache:Bi,semVer:"4.3.0",version:"4.3.0".split(".").map(function(h){return parseInt(h)}).reduce(function(h,p,v){return h+p/Math.pow(10,2*v)})})),Gi.maxKey=va(Gi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(ma,function(h){wi||(h=new CustomEvent(Li,{detail:h}),wi=!0,dispatchEvent(h),wi=!1)}),addEventListener(Li,function(h){h=h.detail,wi||Jl(h)}));var Ea,wi=!1,Qn=function(){};return typeof BroadcastChannel<"u"&&((Qn=function(){(Ea=new BroadcastChannel(Li)).onmessage=function(h){return h.data&&Jl(h.data)}})(),typeof Ea.unref=="function"&&Ea.unref(),Nn(ma,function(h){wi||Ea.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!jr.disableBfCache&&h.persisted){ln&&console.debug("Dexie: handling persisted pagehide"),Ea?.close();for(var p=0,v=Di;p<v.length;p++)v[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!jr.disableBfCache&&h.persisted&&(ln&&console.debug("Dexie: handling persisted pageshow"),Qn(),Jl({all:new Dn(-1/0,[[]])}))})),Re.rejectionMapper=function(h,p){return!h||h instanceof ye||h instanceof TypeError||h instanceof SyntaxError||!h.name||!rt[h.name]?h:(p=new rt[h.name](p||h.message,h),"stack"in h&&B(p,"stack",{get:function(){return this.inner.stack}}),p)},er(ln),i(jr,Object.freeze({__proto__:null,Dexie:jr,Entity:ou,PropModification:pa,RangeSet:Dn,add:function(h){return new pa({add:h})},cmp:dt,default:jr,liveQuery:_u,mergeRanges:Hi,rangesOverlap:du,remove:function(h){return new pa({remove:h})},replacePrefix:function(h,p){return new pa({replacePrefix:[h,p]})}}),{default:jr}),jr})})(Uh)),Uh.exports}var uE=cE();const Fg=wp(uE),Kb=Symbol.for("Dexie"),Bh=globalThis[Kb]||(globalThis[Kb]=Fg);if(Fg.semVer!==Bh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fg.semVer} and ${Bh.semVer}`);const{liveQuery:nU,mergeRanges:rU,rangesOverlap:iU,RangeSet:aU,cmp:sU,Entity:oU,PropModification:lU,replacePrefix:cU,add:uU,remove:hU,DexieYProvider:dU}=Bh;class hE extends Bh{columns;employees;constructor(){super("DepartmentDirectoryDB_v2"),this.version(1).stores({columns:"++id, &key, order, isVisible",employees:"++id"})}}const Pc=new hE,dE=[{key:"No.",label:"No.",type:"text"},{key:"Name",label:"",type:"text"},{key:"Employee Identification",label:"",type:"text"},{key:"Mail",label:"",type:"text"},{key:"Telephone",label:"",type:"text"},{key:"Group",label:"",type:"text"},{key:"Leader",label:"",type:"text"},{key:"New year holiday season",label:"",type:"text"},{key:"check2",label:"check2",type:"text"},{key:"Agreement",label:"",type:"text"},{key:"Vaccine",label:"",type:"text"},{key:"Reason for not Receiving",label:"",type:"text"},{key:"Meeting Schedule(2021/12)",label:"(2021/12)",type:"text"},{key:"Meeting Implement",label:"",type:"text"},{key:"joining date",label:"",type:"text"},{key:"Length of service",label:"",type:"text"},{key:"retirement date",label:"",type:"text"},{key:"Training Time(join)",label:"()",type:"text"},{key:"Training Time(out)",label:"()",type:"text"},{key:"Find of iPhone",label:"iPhone",type:"text"},{key:"Google Account",label:"Google",type:"text"},{key:"FS040U USB",label:"FS040U USB",type:"text"},{key:"FS040U IMEI(15)",label:"FS040U IMEI(15)",type:"text"},{key:"",label:"",type:"text"},{key:"Surface",label:"Surface",type:"text"},{key:"After update",label:"",type:"text"},{key:"alcohol check",label:"",type:"text"},{key:"Special publication",label:"",type:"text"},{key:"FAP",label:"FAP",type:"text"}];let Ag=!1;async function fE(){if(!Ag){Ag=!0;try{await Pc.transaction("rw",Pc.columns,async()=>{await Pc.columns.count()===0&&await Pc.columns.bulkAdd(dE.map((e,n)=>({...e,order:n,isVisible:!0})))})}finally{Ag=!1}}}function T0(a){var e,n,i="";if(typeof a=="string"||typeof a=="number")i+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(e=0;e<o;e++)a[e]&&(n=T0(a[e]))&&(i&&(i+=" "),i+=n)}else for(n in a)a[n]&&(i&&(i+=" "),i+=n);return i}function gE(){for(var a,e,n=0,i="",o=arguments.length;n<o;n++)(a=arguments[n])&&(e=T0(a))&&(i&&(i+=" "),i+=e);return i}const pE=(a,e)=>{const n=new Array(a.length+e.length);for(let i=0;i<a.length;i++)n[i]=a[i];for(let i=0;i<e.length;i++)n[a.length+i]=e[i];return n},mE=(a,e)=>({classGroupId:a,validator:e}),A0=(a=new Map,e=null,n)=>({nextPart:a,validators:e,classGroupId:n}),Kh="-",qb=[],yE="arbitrary..",vE=a=>{const e=_E(a),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=a;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return bE(u);const f=u.split(Kh),m=f[0]===""&&f.length>1?1:0;return k0(f,m,e)},getConflictingClassGroupIds:(u,f)=>{if(f){const m=i[u],y=n[u];return m?y?pE(y,m):m:y||qb}return n[u]||qb}}},k0=(a,e,n)=>{if(a.length-e===0)return n.classGroupId;const o=a[e],c=n.nextPart.get(o);if(c){const y=k0(a,e+1,c);if(y)return y}const u=n.validators;if(u===null)return;const f=e===0?a.join(Kh):a.slice(e).join(Kh),m=u.length;for(let y=0;y<m;y++){const S=u[y];if(S.validator(f))return S.classGroupId}},bE=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=a.slice(1,-1),n=e.indexOf(":"),i=e.slice(0,n);return i?yE+i:void 0})(),_E=a=>{const{theme:e,classGroups:n}=a;return wE(n,e)},wE=(a,e)=>{const n=A0();for(const i in a){const o=a[i];Cp(o,n,i,e)}return n},Cp=(a,e,n,i)=>{const o=a.length;for(let c=0;c<o;c++){const u=a[c];SE(u,e,n,i)}},SE=(a,e,n,i)=>{if(typeof a=="string"){CE(a,e,n);return}if(typeof a=="function"){EE(a,e,n,i);return}TE(a,e,n,i)},CE=(a,e,n)=>{const i=a===""?e:O0(e,a);i.classGroupId=n},EE=(a,e,n,i)=>{if(AE(a)){Cp(a(i),e,n,i);return}e.validators===null&&(e.validators=[]),e.validators.push(mE(n,a))},TE=(a,e,n,i)=>{const o=Object.entries(a),c=o.length;for(let u=0;u<c;u++){const[f,m]=o[u];Cp(m,O0(e,f),n,i)}},O0=(a,e)=>{let n=a;const i=e.split(Kh),o=i.length;for(let c=0;c<o;c++){const u=i[c];let f=n.nextPart.get(u);f||(f=A0(),n.nextPart.set(u,f)),n=f}return n},AE=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,kE=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),i=Object.create(null);const o=(c,u)=>{n[c]=u,e++,e>a&&(e=0,i=n,n=Object.create(null))};return{get(c){let u=n[c];if(u!==void 0)return u;if((u=i[c])!==void 0)return o(c,u),u},set(c,u){c in n?n[c]=u:o(c,u)}}},$g="!",Gb=":",OE=[],Fb=(a,e,n,i,o)=>({modifiers:a,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:i,isExternal:o}),RE=a=>{const{prefix:e,experimentalParseClassName:n}=a;let i=o=>{const c=[];let u=0,f=0,m=0,y;const S=o.length;for(let V=0;V<S;V++){const J=o[V];if(u===0&&f===0){if(J===Gb){c.push(o.slice(m,V)),m=V+1;continue}if(J==="/"){y=V;continue}}J==="["?u++:J==="]"?u--:J==="("?f++:J===")"&&f--}const E=c.length===0?o:o.slice(m);let O=E,R=!1;E.endsWith($g)?(O=E.slice(0,-1),R=!0):E.startsWith($g)&&(O=E.slice(1),R=!0);const B=y&&y>m?y-m:void 0;return Fb(c,R,O,B)};if(e){const o=e+Gb,c=i;i=u=>u.startsWith(o)?c(u.slice(o.length)):Fb(OE,!1,u,void 0,!0)}if(n){const o=i;i=c=>n({className:c,parseClassName:o})}return i},xE=a=>{const e=new Map;return a.orderSensitiveModifiers.forEach((n,i)=>{e.set(n,1e6+i)}),n=>{const i=[];let o=[];for(let c=0;c<n.length;c++){const u=n[c],f=u[0]==="[",m=e.has(u);f||m?(o.length>0&&(o.sort(),i.push(...o),o=[]),i.push(u)):o.push(u)}return o.length>0&&(o.sort(),i.push(...o)),i}},IE=a=>({cache:kE(a.cacheSize),parseClassName:RE(a),sortModifiers:xE(a),...vE(a)}),NE=/\s+/,DE=(a,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:c}=e,u=[],f=a.trim().split(NE);let m="";for(let y=f.length-1;y>=0;y-=1){const S=f[y],{isExternal:E,modifiers:O,hasImportantModifier:R,baseClassName:B,maybePostfixModifierPosition:V}=n(S);if(E){m=S+(m.length>0?" "+m:m);continue}let J=!!V,ge=i(J?B.substring(0,V):B);if(!ge){if(!J){m=S+(m.length>0?" "+m:m);continue}if(ge=i(B),!ge){m=S+(m.length>0?" "+m:m);continue}J=!1}const me=O.length===0?"":O.length===1?O[0]:c(O).join(":"),ce=R?me+$g:me,ke=ce+ge;if(u.indexOf(ke)>-1)continue;u.push(ke);const Ze=o(ge,J);for(let xe=0;xe<Ze.length;++xe){const pe=Ze[xe];u.push(ce+pe)}m=S+(m.length>0?" "+m:m)}return m},UE=(...a)=>{let e=0,n,i,o="";for(;e<a.length;)(n=a[e++])&&(i=R0(n))&&(o&&(o+=" "),o+=i);return o},R0=a=>{if(typeof a=="string")return a;let e,n="";for(let i=0;i<a.length;i++)a[i]&&(e=R0(a[i]))&&(n&&(n+=" "),n+=e);return n},ME=(a,...e)=>{let n,i,o,c;const u=m=>{const y=e.reduce((S,E)=>E(S),a());return n=IE(y),i=n.cache.get,o=n.cache.set,c=f,f(m)},f=m=>{const y=i(m);if(y)return y;const S=DE(m,n);return o(m,S),S};return c=u,(...m)=>c(UE(...m))},PE=[],An=a=>{const e=n=>n[a]||PE;return e.isThemeGetter=!0,e},x0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,I0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jE=/^\d+\/\d+$/,LE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,BE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xo=a=>jE.test(a),gt=a=>!!a&&!Number.isNaN(Number(a)),Ya=a=>!!a&&Number.isInteger(Number(a)),kg=a=>a.endsWith("%")&&gt(a.slice(0,-1)),sa=a=>LE.test(a),qE=()=>!0,GE=a=>zE.test(a)&&!HE.test(a),N0=()=>!1,FE=a=>BE.test(a),$E=a=>KE.test(a),VE=a=>!He(a)&&!Be(a),YE=a=>Sl(a,M0,N0),He=a=>x0.test(a),Ls=a=>Sl(a,P0,GE),Og=a=>Sl(a,ZE,gt),$b=a=>Sl(a,D0,N0),QE=a=>Sl(a,U0,$E),bh=a=>Sl(a,j0,FE),Be=a=>I0.test(a),Ic=a=>Cl(a,P0),JE=a=>Cl(a,eT),Vb=a=>Cl(a,D0),XE=a=>Cl(a,M0),WE=a=>Cl(a,U0),_h=a=>Cl(a,j0,!0),Sl=(a,e,n)=>{const i=x0.exec(a);return i?i[1]?e(i[1]):n(i[2]):!1},Cl=(a,e,n=!1)=>{const i=I0.exec(a);return i?i[1]?e(i[1]):n:!1},D0=a=>a==="position"||a==="percentage",U0=a=>a==="image"||a==="url",M0=a=>a==="length"||a==="size"||a==="bg-size",P0=a=>a==="length",ZE=a=>a==="number",eT=a=>a==="family-name",j0=a=>a==="shadow",tT=()=>{const a=An("color"),e=An("font"),n=An("text"),i=An("font-weight"),o=An("tracking"),c=An("leading"),u=An("breakpoint"),f=An("container"),m=An("spacing"),y=An("radius"),S=An("shadow"),E=An("inset-shadow"),O=An("text-shadow"),R=An("drop-shadow"),B=An("blur"),V=An("perspective"),J=An("aspect"),ge=An("ease"),me=An("animate"),ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ke=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Ze=()=>[...ke(),Be,He],xe=()=>["auto","hidden","clip","visible","scroll"],pe=()=>["auto","contain","none"],I=()=>[Be,He,m],K=()=>[Xo,"full","auto",...I()],fe=()=>[Ya,"none","subgrid",Be,He],Oe=()=>["auto",{span:["full",Ya,Be,He]},Ya,Be,He],ae=()=>[Ya,"auto",Be,He],Ce=()=>["auto","min","max","fr",Be,He],Ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Je=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...I()],se=()=>[Xo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],ie=()=>[a,Be,He],we=()=>[...ke(),Vb,$b,{position:[Be,He]}],Le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],x=()=>["auto","cover","contain",XE,YE,{size:[Be,He]}],X=()=>[kg,Ic,Ls],ne=()=>["","none","full",y,Be,He],ye=()=>["",gt,Ic,Ls],Ue=()=>["solid","dashed","dotted","double"],Ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[gt,kg,Vb,$b],Ve=()=>["","none",B,Be,He],Fe=()=>["none",gt,Be,He],Ee=()=>["none",gt,Be,He],rt=()=>[gt,Be,He],qe=()=>[Xo,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[sa],breakpoint:[sa],color:[qE],container:[sa],"drop-shadow":[sa],ease:["in","out","in-out"],font:[VE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[sa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[sa],shadow:[sa],spacing:["px",gt],text:[sa],"text-shadow":[sa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xo,He,Be,J]}],container:["container"],columns:[{columns:[gt,He,Be,f]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Ze()}],overflow:[{overflow:xe()}],"overflow-x":[{"overflow-x":xe()}],"overflow-y":[{"overflow-y":xe()}],overscroll:[{overscroll:pe()}],"overscroll-x":[{"overscroll-x":pe()}],"overscroll-y":[{"overscroll-y":pe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:K()}],"inset-x":[{"inset-x":K()}],"inset-y":[{"inset-y":K()}],start:[{start:K()}],end:[{end:K()}],top:[{top:K()}],right:[{right:K()}],bottom:[{bottom:K()}],left:[{left:K()}],visibility:["visible","invisible","collapse"],z:[{z:[Ya,"auto",Be,He]}],basis:[{basis:[Xo,"full","auto",f,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gt,Xo,"auto","initial","none",He]}],grow:[{grow:["",gt,Be,He]}],shrink:[{shrink:["",gt,Be,He]}],order:[{order:[Ya,"first","last","none",Be,He]}],"grid-cols":[{"grid-cols":fe()}],"col-start-end":[{col:Oe()}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":fe()}],"row-start-end":[{row:Oe()}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ce()}],"auto-rows":[{"auto-rows":Ce()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...Ye(),"normal"]}],"justify-items":[{"justify-items":[...Je(),"normal"]}],"justify-self":[{"justify-self":["auto",...Je()]}],"align-content":[{content:["normal",...Ye()]}],"align-items":[{items:[...Je(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Je(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ye()}],"place-items":[{"place-items":[...Je(),"baseline"]}],"place-self":[{"place-self":["auto",...Je()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[f,"screen",...se()]}],"min-w":[{"min-w":[f,"screen","none",...se()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,Ic,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Be,Og]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",kg,He]}],"font-family":[{font:[JE,He,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Be,He]}],"line-clamp":[{"line-clamp":[gt,"none",Be,Og]}],leading:[{leading:[c,...I()]}],"list-image":[{"list-image":["none",Be,He]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Be,He]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ie()}],"text-color":[{text:ie()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[gt,"from-font","auto",Be,Ls]}],"text-decoration-color":[{decoration:ie()}],"underline-offset":[{"underline-offset":[gt,"auto",Be,He]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Be,He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be,He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:we()}],"bg-repeat":[{bg:Le()}],"bg-size":[{bg:x()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ya,Be,He],radial:["",Be,He],conic:[Ya,Be,He]},WE,QE]}],"bg-color":[{bg:ie()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:ie()}],"gradient-via":[{via:ie()}],"gradient-to":[{to:ie()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ue(),"hidden","none"]}],"divide-style":[{divide:[...Ue(),"hidden","none"]}],"border-color":[{border:ie()}],"border-color-x":[{"border-x":ie()}],"border-color-y":[{"border-y":ie()}],"border-color-s":[{"border-s":ie()}],"border-color-e":[{"border-e":ie()}],"border-color-t":[{"border-t":ie()}],"border-color-r":[{"border-r":ie()}],"border-color-b":[{"border-b":ie()}],"border-color-l":[{"border-l":ie()}],"divide-color":[{divide:ie()}],"outline-style":[{outline:[...Ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gt,Be,He]}],"outline-w":[{outline:["",gt,Ic,Ls]}],"outline-color":[{outline:ie()}],shadow:[{shadow:["","none",S,_h,bh]}],"shadow-color":[{shadow:ie()}],"inset-shadow":[{"inset-shadow":["none",E,_h,bh]}],"inset-shadow-color":[{"inset-shadow":ie()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ie()}],"ring-offset-w":[{"ring-offset":[gt,Ls]}],"ring-offset-color":[{"ring-offset":ie()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":ie()}],"text-shadow":[{"text-shadow":["none",O,_h,bh]}],"text-shadow-color":[{"text-shadow":ie()}],opacity:[{opacity:[gt,Be,He]}],"mix-blend":[{"mix-blend":[...Ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":ie()}],"mask-image-linear-to-color":[{"mask-linear-to":ie()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":ie()}],"mask-image-t-to-color":[{"mask-t-to":ie()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":ie()}],"mask-image-r-to-color":[{"mask-r-to":ie()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":ie()}],"mask-image-b-to-color":[{"mask-b-to":ie()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":ie()}],"mask-image-l-to-color":[{"mask-l-to":ie()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":ie()}],"mask-image-x-to-color":[{"mask-x-to":ie()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":ie()}],"mask-image-y-to-color":[{"mask-y-to":ie()}],"mask-image-radial":[{"mask-radial":[Be,He]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":ie()}],"mask-image-radial-to-color":[{"mask-radial-to":ie()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ke()}],"mask-image-conic-pos":[{"mask-conic":[gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":ie()}],"mask-image-conic-to-color":[{"mask-conic-to":ie()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:we()}],"mask-repeat":[{mask:Le()}],"mask-size":[{mask:x()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Be,He]}],filter:[{filter:["","none",Be,He]}],blur:[{blur:Ve()}],brightness:[{brightness:[gt,Be,He]}],contrast:[{contrast:[gt,Be,He]}],"drop-shadow":[{"drop-shadow":["","none",R,_h,bh]}],"drop-shadow-color":[{"drop-shadow":ie()}],grayscale:[{grayscale:["",gt,Be,He]}],"hue-rotate":[{"hue-rotate":[gt,Be,He]}],invert:[{invert:["",gt,Be,He]}],saturate:[{saturate:[gt,Be,He]}],sepia:[{sepia:["",gt,Be,He]}],"backdrop-filter":[{"backdrop-filter":["","none",Be,He]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[gt,Be,He]}],"backdrop-contrast":[{"backdrop-contrast":[gt,Be,He]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gt,Be,He]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gt,Be,He]}],"backdrop-invert":[{"backdrop-invert":["",gt,Be,He]}],"backdrop-opacity":[{"backdrop-opacity":[gt,Be,He]}],"backdrop-saturate":[{"backdrop-saturate":[gt,Be,He]}],"backdrop-sepia":[{"backdrop-sepia":["",gt,Be,He]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Be,He]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gt,"initial",Be,He]}],ease:[{ease:["linear","initial",ge,Be,He]}],delay:[{delay:[gt,Be,He]}],animate:[{animate:["none",me,Be,He]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[V,Be,He]}],"perspective-origin":[{"perspective-origin":Ze()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:Ee()}],"scale-x":[{"scale-x":Ee()}],"scale-y":[{"scale-y":Ee()}],"scale-z":[{"scale-z":Ee()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[Be,He,"","none","gpu","cpu"]}],"transform-origin":[{origin:Ze()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:ie()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ie()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be,He]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be,He]}],fill:[{fill:["none",...ie()]}],"stroke-w":[{stroke:[gt,Ic,Ls,Og]}],stroke:[{stroke:["none",...ie()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},nT=ME(tT);function xr(...a){return nT(gE(a))}function rT({items:a,activeItemId:e,onItemClick:n,leftOffset:i=0,width:o=280,showLabels:c="always",logo:u,footer:f,onAddClick:m,addButtonLabel:y=""}){const S=c==="hover",E=S?72:o,[O,R]=mt.useState(!1),B=O||!S;return Q.jsxs("aside",{className:xr("fixed top-0 bottom-0 bg-[#1E1F22] border-r border-slate-800 flex flex-col z-50 transition-all duration-300",S&&"group"),style:{left:`${i}px`,width:S&&O?"260px":`${E}px`},onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:[u&&Q.jsxs("div",{className:xr("flex items-center transition-all duration-300",B?"px-6 py-6 gap-3":"justify-center py-6"),children:[Q.jsx("div",{className:"bg-slate-900 text-white p-2.5 rounded-2xl flex-shrink-0",children:Q.jsx(u.icon,{className:"w-6 h-6"})}),B&&Q.jsxs("div",{className:"transition-opacity duration-300",children:[Q.jsx("h1",{className:"font-black text-xl tracking-tighter text-slate-200",children:u.title}),Q.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 -mt-1",children:u.subtitle})]})]}),Q.jsxs("nav",{className:xr("flex-1 px-3 space-y-2 overflow-y-auto no-scrollbar",u?"mt-4":"mt-8"),children:[a.map(V=>{const J=e===V.id,ge=typeof V.icon=="string"?null:V.icon,me=typeof V.icon=="string"?V.icon:null;return Q.jsxs("div",{className:"space-y-1",children:[Q.jsxs("button",{onClick:()=>n(V.id),className:xr("w-full flex items-center rounded-xl transition-all duration-200 group/item",B?"gap-3 px-3 py-2":"justify-center p-2",J?"bg-indigo-600 text-white":"text-slate-400 hover:bg-[#2B2D31] hover:text-indigo-400"),children:[Q.jsx("div",{className:xr("flex items-center justify-center transition-colors flex-shrink-0",B?"w-6 h-6":"w-10 h-10 rounded-full bg-[#2B2D31]"),children:ge?Q.jsx(ge,{className:"w-5 h-5"}):Q.jsx("span",{className:"text-xl",children:me})}),B&&Q.jsx("span",{className:"font-bold tracking-tight text-sm whitespace-nowrap overflow-hidden text-ellipsis flex-1 text-left",children:V.label})]}),J&&B&&V.subItems&&Q.jsx("div",{className:"pl-4 space-y-1 animate-fadeIn",children:V.subItems.map(ce=>Q.jsxs("button",{onClick:ke=>{ke.stopPropagation(),ce.onClick?.()},className:"w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-slate-400 hover:text-white hover:bg-[#2B2D31] transition-colors group/sub",children:[Q.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[Q.jsx("span",{className:"text-slate-500 group-hover/sub:text-indigo-400",children:typeof ce.icon=="string"?ce.icon:ce.icon&&Q.jsx(ce.icon,{className:"w-4 h-4"})||"#"}),Q.jsx("span",{className:"text-sm font-medium truncate",children:ce.label})]}),ce.badge!==void 0&&Q.jsx("span",{className:"text-[10px] font-bold bg-indigo-600 text-white px-1.5 py-0.5 rounded-full",children:ce.badge})]},ce.id))})]},V.id)}),m&&Q.jsxs("button",{onClick:m,className:xr("w-full flex items-center rounded-xl text-slate-400 hover:bg-[#2B2D31] hover:text-indigo-400 transition-all duration-200 mt-4",B?"gap-3 px-3 py-2":"justify-center p-2"),children:[Q.jsx("div",{className:xr("flex items-center justify-center flex-shrink-0 border-2 border-dashed border-slate-600 rounded-full transition-colors",B?"w-6 h-6 border-none":"w-10 h-10"),children:Q.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),B&&Q.jsx("span",{className:"font-bold tracking-tight text-sm whitespace-nowrap",children:y})]})]}),f&&Q.jsx("div",{className:xr("border-t border-slate-800 transition-all duration-300",B?"p-4":"p-2"),children:f})]})}function cd(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n}function iT(a,e,n,i){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function f(S){try{y(i.next(S))}catch(E){u(E)}}function m(S){try{y(i.throw(S))}catch(E){u(E)}}function y(S){S.done?c(S.value):o(S.value).then(f,m)}y((i=i.apply(a,e||[])).next())})}const aT=a=>a?(...e)=>a(...e):(...e)=>fetch(...e);class Ep extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class sT extends Ep{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yb extends Ep{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qb extends Ep{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vg;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Vg||(Vg={}));class oT{constructor(e,{headers:n={},customFetch:i,region:o=Vg.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=aT(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return iT(this,arguments,void 0,function*(n,i={}){var o;let c,u;try{const{headers:f,method:m,body:y,signal:S,timeout:E}=i;let O={},{region:R}=i;R||(R=this.region);const B=new URL(`${this.url}/${n}`);R&&R!=="any"&&(O["x-region"]=R,B.searchParams.set("forceFunctionRegion",R));let V;y&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(O["Content-Type"]="application/octet-stream",V=y):typeof y=="string"?(O["Content-Type"]="text/plain",V=y):typeof FormData<"u"&&y instanceof FormData?V=y:(O["Content-Type"]="application/json",V=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?V=JSON.stringify(y):V=y;let J=S;E&&(u=new AbortController,c=setTimeout(()=>u.abort(),E),S?(J=u.signal,S.addEventListener("abort",()=>u.abort())):J=u.signal);const ge=yield this.fetch(B.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},O),this.headers),f),body:V,signal:J}).catch(Ze=>{throw new sT(Ze)}),me=ge.headers.get("x-relay-error");if(me&&me==="true")throw new Yb(ge);if(!ge.ok)throw new Qb(ge);let ce=((o=ge.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),ke;return ce==="application/json"?ke=yield ge.json():ce==="application/octet-stream"||ce==="application/pdf"?ke=yield ge.blob():ce==="text/event-stream"?ke=ge:ce==="multipart/form-data"?ke=yield ge.formData():ke=yield ge.text(),{data:ke,error:null,response:ge}}catch(f){return{data:null,error:f,response:f instanceof Qb||f instanceof Yb?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var lT=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},cT=class{constructor(a){var e,n;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(e=a.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=a.signal,this.isMaybeSingle=(n=a.isMaybeSingle)!==null&&n!==void 0?n:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,e){return this.headers=new Headers(this.headers),this.headers.set(a,e),this}then(a,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,f=null,m=null,y=c.status,S=c.statusText;if(c.ok){var E,O;if(n.method!=="HEAD"){var R;const ge=await c.text();ge===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((R=n.headers.get("Accept"))===null||R===void 0)&&R.includes("application/vnd.pgrst.plan+text"))?f=ge:f=JSON.parse(ge))}const V=(E=n.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),J=(O=c.headers.get("content-range"))===null||O===void 0?void 0:O.split("/");V&&J&&J.length>1&&(m=parseInt(J[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,y=406,S="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var B;const V=await c.text();try{u=JSON.parse(V),Array.isArray(u)&&c.status===404&&(f=[],u=null,y=200,S="OK")}catch{c.status===404&&V===""?(y=204,S="No Content"):u={message:V}}if(u&&n.isMaybeSingle&&(!(u==null||(B=u.details)===null||B===void 0)&&B.includes("0 rows"))&&(u=null,y=200,S="OK"),u&&n.shouldThrowOnError)throw new lT(u)}return{error:u,data:f,count:m,status:y,statusText:S}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let f="";const m=c?.cause;if(m){var y,S,E,O;const B=(y=m?.message)!==null&&y!==void 0?y:"",V=(S=m?.code)!==null&&S!==void 0?S:"";f=`${(E=c?.name)!==null&&E!==void 0?E:"FetchError"}: ${c?.message}`,f+=`

Caused by: ${(O=m?.name)!==null&&O!==void 0?O:"Error"}: ${B}`,V&&(f+=` (${V})`),m?.stack&&(f+=`
${m.stack}`)}else{var R;f=(R=c?.stack)!==null&&R!==void 0?R:""}return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,e)}returns(){return this}overrideTypes(){return this}},uT=class extends cT{select(a){let e=!1;const n=(a??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${a}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${a}`),this}range(a,e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(c,`${e-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:c="text"}={}){var u;const f=[a?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const Jb=new RegExp("[,()]");var sl=class extends uT{eq(a,e){return this.url.searchParams.append(a,`eq.${e}`),this}neq(a,e){return this.url.searchParams.append(a,`neq.${e}`),this}gt(a,e){return this.url.searchParams.append(a,`gt.${e}`),this}gte(a,e){return this.url.searchParams.append(a,`gte.${e}`),this}lt(a,e){return this.url.searchParams.append(a,`lt.${e}`),this}lte(a,e){return this.url.searchParams.append(a,`lte.${e}`),this}like(a,e){return this.url.searchParams.append(a,`like.${e}`),this}likeAllOf(a,e){return this.url.searchParams.append(a,`like(all).{${e.join(",")}}`),this}likeAnyOf(a,e){return this.url.searchParams.append(a,`like(any).{${e.join(",")}}`),this}ilike(a,e){return this.url.searchParams.append(a,`ilike.${e}`),this}ilikeAllOf(a,e){return this.url.searchParams.append(a,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(a,e){return this.url.searchParams.append(a,`ilike(any).{${e.join(",")}}`),this}regexMatch(a,e){return this.url.searchParams.append(a,`match.${e}`),this}regexIMatch(a,e){return this.url.searchParams.append(a,`imatch.${e}`),this}is(a,e){return this.url.searchParams.append(a,`is.${e}`),this}isDistinct(a,e){return this.url.searchParams.append(a,`isdistinct.${e}`),this}in(a,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Jb.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(a,`in.(${n})`),this}notIn(a,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Jb.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(a,`not.in.(${n})`),this}contains(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cs.{${e.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(e)}`),this}containedBy(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cd.{${e.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(e)}`),this}rangeGt(a,e){return this.url.searchParams.append(a,`sr.${e}`),this}rangeGte(a,e){return this.url.searchParams.append(a,`nxl.${e}`),this}rangeLt(a,e){return this.url.searchParams.append(a,`sl.${e}`),this}rangeLte(a,e){return this.url.searchParams.append(a,`nxr.${e}`),this}rangeAdjacent(a,e){return this.url.searchParams.append(a,`adj.${e}`),this}overlaps(a,e){return typeof e=="string"?this.url.searchParams.append(a,`ov.${e}`):this.url.searchParams.append(a,`ov.{${e.join(",")}}`),this}textSearch(a,e,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const c=n===void 0?"":`(${n})`;return this.url.searchParams.append(a,`${o}fts${c}.${e}`),this}match(a){return Object.entries(a).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(a,e,n){return this.url.searchParams.append(a,`not.${e}.${n}`),this}or(a,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${a})`),this}filter(a,e,n){return this.url.searchParams.append(a,`${e}.${n}`),this}},hT=class{constructor(a,{headers:e={},schema:n,fetch:i}){this.url=a,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,e){const{head:n=!1,count:i}=e??{},o=n?"HEAD":"GET";let c=!1;const u=(a??"*").split("").map(y=>/\s/.test(y)&&!c?"":(y==='"'&&(c=!c),y)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",u),i&&m.append("Prefer",`count=${i}`),new sl({method:o,url:f,headers:m,schema:this.schema,fetch:this.fetch})}insert(a,{count:e,defaultToNull:n=!0}={}){var i;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),n||u.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(f.length>0){const m=[...new Set(f)].map(y=>`"${y}"`);c.searchParams.set("columns",m.join(","))}}return new sl({method:o,url:c,headers:u,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(a,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var c;const u="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&f.searchParams.set("on_conflict",e),i&&m.append("Prefer",`count=${i}`),o||m.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((S,E)=>S.concat(Object.keys(E)),[]);if(y.length>0){const S=[...new Set(y)].map(E=>`"${E}"`);f.searchParams.set("columns",S.join(","))}}return new sl({method:u,url:f,headers:m,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(a,{count:e}={}){var n;const i="PATCH",{url:o,headers:c}=this.cloneRequestState();return e&&c.append("Prefer",`count=${e}`),new sl({method:i,url:o,headers:c,schema:this.schema,body:a,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:a}={}){var e;const n="DELETE",{url:i,headers:o}=this.cloneRequestState();return a&&o.append("Prefer",`count=${a}`),new sl({method:n,url:i,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},dT=class L0{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new hT(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new L0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:c}={}){var u;let f;const m=new URL(`${this.url}/rpc/${e}`);let y;const S=R=>R!==null&&typeof R=="object"&&(!Array.isArray(R)||R.some(S)),E=i&&Object.values(n).some(S);E?(f="POST",y=n):i||o?(f=i?"HEAD":"GET",Object.entries(n).filter(([R,B])=>B!==void 0).map(([R,B])=>[R,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([R,B])=>{m.searchParams.append(R,B)})):(f="POST",y=n);const O=new Headers(this.headers);return E?O.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&O.set("Prefer",`count=${c}`),new sl({method:f,url:m,headers:O,schema:this.schemaName,body:y,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class fT{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gT="2.93.3",pT=`realtime-js/${gT}`,mT="1.0.0",z0="2.0.0",Xb=z0,Yg=1e4,yT=1e3,vT=100;var Xa;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Xa||(Xa={}));var kn;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(kn||(kn={}));var si;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(si||(si={}));var Qg;(function(a){a.websocket="websocket"})(Qg||(Qg={}));var qs;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(qs||(qs={}));class bT{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,i){var o,c;const u=e.topic,f=(o=e.ref)!==null&&o!==void 0?o:"",m=(c=e.join_ref)!==null&&c!==void 0?c:"",y=e.payload.event,S=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(S).length===0?"":JSON.stringify(S);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const O=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+y.length+E.length,R=new ArrayBuffer(this.HEADER_LENGTH+O);let B=new DataView(R),V=0;B.setUint8(V++,this.KINDS.userBroadcastPush),B.setUint8(V++,m.length),B.setUint8(V++,f.length),B.setUint8(V++,u.length),B.setUint8(V++,y.length),B.setUint8(V++,E.length),B.setUint8(V++,n),Array.from(m,ge=>B.setUint8(V++,ge.charCodeAt(0))),Array.from(f,ge=>B.setUint8(V++,ge.charCodeAt(0))),Array.from(u,ge=>B.setUint8(V++,ge.charCodeAt(0))),Array.from(y,ge=>B.setUint8(V++,ge.charCodeAt(0))),Array.from(E,ge=>B.setUint8(V++,ge.charCodeAt(0)));var J=new Uint8Array(R.byteLength+i.byteLength);return J.set(new Uint8Array(R),0),J.set(new Uint8Array(i),R.byteLength),J.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,c,u,f,m]=i;return n({join_ref:o,ref:c,topic:u,event:f,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),o=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,o)}_decodeUserBroadcast(e,n,i){const o=n.getUint8(1),c=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const y=i.decode(e.slice(m,m+o));m=m+o;const S=i.decode(e.slice(m,m+c));m=m+c;const E=i.decode(e.slice(m,m+u));m=m+u;const O=e.slice(m,e.byteLength),R=f===this.JSON_ENCODING?JSON.parse(i.decode(O)):O,B={type:this.BROADCAST_EVENT,event:S,payload:R};return u>0&&(B.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:B}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class H0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Qt||(Qt={}));const Wb=(a,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((c,u)=>(c[u]=_T(u,a,e,o),c),{}):{}},_T=(a,e,n,i)=>{const o=e.find(f=>f.name===a),c=o?.type,u=n[a];return c&&!i.includes(c)?B0(c,u):Jg(u)},B0=(a,e)=>{if(a.charAt(0)==="_"){const n=a.slice(1,a.length);return ET(e,n)}switch(a){case Qt.bool:return wT(e);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return ST(e);case Qt.json:case Qt.jsonb:return CT(e);case Qt.timestamp:return TT(e);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return Jg(e);default:return Jg(e)}},Jg=a=>a,wT=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},ST=a=>{if(typeof a=="string"){const e=parseFloat(a);if(!Number.isNaN(e))return e}return a},CT=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},ET=(a,e)=>{if(typeof a!="string")return a;const n=a.length-1,i=a[n];if(a[0]==="{"&&i==="}"){let c;const u=a.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>B0(e,f))}return a},TT=a=>typeof a=="string"?a.replace(" ","T"):a,K0=a=>{const e=new URL(a);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Rg{constructor(e,n,i={},o=Yg){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zb;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Zb||(Zb={}));class zc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zc.syncState(this.state,o,c,u),this.pendingDiffs.forEach(m=>{this.state=zc.syncDiff(this.state,m,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=zc.syncDiff(this.state,o,c,u),f())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const c=this.cloneDeep(e),u=this.transformState(n),f={},m={};return this.map(c,(y,S)=>{u[y]||(m[y]=S)}),this.map(u,(y,S)=>{const E=c[y];if(E){const O=S.map(J=>J.presence_ref),R=E.map(J=>J.presence_ref),B=S.filter(J=>R.indexOf(J.presence_ref)<0),V=E.filter(J=>O.indexOf(J.presence_ref)<0);B.length>0&&(f[y]=B),V.length>0&&(m[y]=V)}else f[y]=S}),this.syncDiff(c,{joins:f,leaves:m},i,o)}static syncDiff(e,n,i,o){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(f,m)=>{var y;const S=(y=e[f])!==null&&y!==void 0?y:[];if(e[f]=this.cloneDeep(m),S.length>0){const E=e[f].map(R=>R.presence_ref),O=S.filter(R=>E.indexOf(R.presence_ref)<0);e[f].unshift(...O)}i(f,S,m)}),this.map(u,(f,m)=>{let y=e[f];if(!y)return;const S=m.map(E=>E.presence_ref);y=y.filter(E=>S.indexOf(E.presence_ref)<0),e[f]=y,o(f,y,m),y.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var e_;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(e_||(e_={}));var Hc;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Hc||(Hc={}));var oa;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(oa||(oa={}));class ul{constructor(e,n={config:{}},i){var o,c;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Rg(this,si.join,this.params,this.timeout),this.rejoinTimer=new H0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(si.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new zc(this),this.broadcastEndpointURL=K0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,y=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(R=>R.filter))!==null&&o!==void 0?o:[],S=!!this.bindings[Hc.PRESENCE]&&this.bindings[Hc.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,E={},O={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:S}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(R=>e?.(oa.CHANNEL_ERROR,R)),this._onClose(()=>e?.(oa.CLOSED)),this.updateJoinPayload(Object.assign({config:O},E)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:R})=>{var B;if(this.socket._isManualToken()||this.socket.setAuth(),R===void 0){e?.(oa.SUBSCRIBED);return}else{const V=this.bindings.postgres_changes,J=(B=V?.length)!==null&&B!==void 0?B:0,ge=[];for(let me=0;me<J;me++){const ce=V[me],{filter:{event:ke,schema:Ze,table:xe,filter:pe}}=ce,I=R&&R[me];if(I&&I.event===ke&&ul.isFilterValueEqual(I.schema,Ze)&&ul.isFilterValueEqual(I.table,xe)&&ul.isFilterValueEqual(I.filter,pe))ge.push(Object.assign(Object.assign({},ce),{id:I.id}));else{this.unsubscribe(),this.state=kn.errored,e?.(oa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ge,e&&e(oa.SUBSCRIBED);return}}).receive("error",R=>{this.state=kn.errored,e?.(oa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e?.(oa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===kn.joined&&e===Hc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const y=await f.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=y.body)===null||o===void 0?void 0:o.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,m;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(si.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Rg(this,si.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(c),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Rg(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,c;const u=e.toLocaleLowerCase(),{close:f,error:m,leave:y,join:S}=si;if(i&&[f,m,y,S].indexOf(u)>=0&&i!==this._joinRef())return;let O=this._onMessage(u,n,i);if(n&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(R=>{var B,V,J;return((B=R.filter)===null||B===void 0?void 0:B.event)==="*"||((J=(V=R.filter)===null||V===void 0?void 0:V.event)===null||J===void 0?void 0:J.toLocaleLowerCase())===u}).map(R=>R.callback(O,i)):(c=this.bindings[u])===null||c===void 0||c.filter(R=>{var B,V,J,ge,me,ce;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in R){const ke=R.id,Ze=(B=R.filter)===null||B===void 0?void 0:B.event;return ke&&((V=n.ids)===null||V===void 0?void 0:V.includes(ke))&&(Ze==="*"||Ze?.toLocaleLowerCase()===((J=n.data)===null||J===void 0?void 0:J.type.toLocaleLowerCase()))}else{const ke=(me=(ge=R?.filter)===null||ge===void 0?void 0:ge.event)===null||me===void 0?void 0:me.toLocaleLowerCase();return ke==="*"||ke===((ce=n?.event)===null||ce===void 0?void 0:ce.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===u}).map(R=>{if(typeof O=="object"&&"ids"in O){const B=O.data,{schema:V,table:J,commit_timestamp:ge,type:me,errors:ce}=B;O=Object.assign(Object.assign({},{schema:V,table:J,commit_timestamp:ge,eventType:me,new:{},old:{},errors:ce}),this._getPayloadRecords(B))}R.callback(O,i)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),c={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&ul.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(si.close,{},e)}_onError(e){this._on(si.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Wb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Wb(e.columns,e.old_record)),n}}const xg=()=>{},wh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AT=[1e3,2e3,5e3,1e4],kT=1e4,OT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RT{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yg,this.transport=null,this.heartbeatIntervalMs=wh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xg,this.ref=0,this.reconnectTimer=null,this.vsn=Xb,this.logger=xg,this.conn=null,this.sendBuffer=[],this.serializer=new bT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Qg.websocket}`,this.httpEndpoint=K0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fT.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Xa.connecting:return qs.Connecting;case Xa.open:return qs.Open;case Xa.closing:return qs.Closing;default:return qs.Closed}}isConnected(){return this.connectionState()===qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new ul(`realtime:${e}`,n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:i,payload:o,ref:c}=e,u=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",y)}catch(S){this.log("error","error in heartbeat callback",S)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:c,ref:u}=n,f=u?`(${u})`:"",m=c.status||"";this.log("receive",`${m} ${i} ${o} ${f}`.trim(),c),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(o,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Xa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Xa.open||this.conn.readyState===Xa.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(si.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([OT],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const c={access_token:n,version:pT};n&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(si.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new H0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,c,u,f,m,y,S,E,O,R;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Yg,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:wh.HEARTBEAT_INTERVAL,this.worker=(c=e?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e?.heartbeatCallback)!==null&&f!==void 0?f:xg,this.vsn=(m=e?.vsn)!==null&&m!==void 0?m:Xb,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=e?.reconnectAfterMs)!==null&&y!==void 0?y:(B=>AT[B-1]||kT),this.vsn){case mT:this.encode=(S=e?.encode)!==null&&S!==void 0?S:((B,V)=>V(JSON.stringify(B))),this.decode=(E=e?.decode)!==null&&E!==void 0?E:((B,V)=>V(JSON.parse(B)));break;case z0:this.encode=(O=e?.encode)!==null&&O!==void 0?O:this.serializer.encode.bind(this.serializer),this.decode=(R=e?.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Gc=class extends Error{constructor(a,e){super(a),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xT(a,e,n){const i=new URL(e,a);if(n)for(const[o,c]of Object.entries(n))c!==void 0&&i.searchParams.set(o,c);return i.toString()}async function IT(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function NT(a){const e=a.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:c,headers:u}){const f=xT(a.baseUrl,i,o),m=await IT(a.auth),y=await e(f,{method:n,headers:{...c?{"Content-Type":"application/json"}:{},...m,...u},body:c?JSON.stringify(c):void 0}),S=await y.text(),E=(y.headers.get("content-type")||"").includes("application/json"),O=E&&S?JSON.parse(S):S;if(!y.ok){const R=E?O:void 0,B=R?.error;throw new Gc(B?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:B?.type,icebergCode:B?.code,details:R})}return{status:y.status,headers:y.headers,data:O}}}}function Sh(a){return a.join("")}var DT=class{constructor(a,e=""){this.client=a,this.prefix=e}async listNamespaces(a){const e=a?{parent:Sh(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(a,e){const n={namespace:a.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sh(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sh(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sh(a.namespace)}`}),!0}catch(e){if(e instanceof Gc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(a,e){try{return await this.createNamespace(a,e)}catch(n){if(n instanceof Gc&&n.status===409)return;throw n}}};function Wo(a){return a.join("")}var UT=class{constructor(a,e="",n){this.client=a,this.prefix=e,this.accessDelegation=n}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables`})).data.identifiers}async createTable(a,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(a,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables/${a.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(a,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(a){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables/${a.name}`,headers:e})).data.metadata}async tableExists(a){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wo(a.namespace)}/tables/${a.name}`,headers:e}),!0}catch(n){if(n instanceof Gc&&n.status===404)return!1;throw n}}async createTableIfNotExists(a,e){try{return await this.createTable(a,e)}catch(n){if(n instanceof Gc&&n.status===409)return await this.loadTable({namespace:a.namespace,name:e.name});throw n}}},MT=class{constructor(a){let e="v1";a.catalogName&&(e+=`/${a.catalogName}`);const n=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=NT({baseUrl:n,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new DT(this.client,e),this.tableOps=new UT(this.client,e,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,e){return this.namespaceOps.createNamespace(a,e)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,e){return this.tableOps.createTable(a,e)}async updateTable(a,e){return this.tableOps.updateTable(a,e)}async dropTable(a,e){await this.tableOps.dropTable(a,e)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,e){return this.namespaceOps.createNamespaceIfNotExists(a,e)}async createTableIfNotExists(a,e){return this.tableOps.createTableIfNotExists(a,e)}},ud=class extends Error{constructor(a,e="storage",n,i){super(a),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function hd(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var Ch=class extends ud{constructor(a,e,n,i="storage"){super(a,i,e,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},q0=class extends ud{constructor(a,e,n="storage"){super(a,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const PT=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),jT=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Xg=a=>{if(Array.isArray(a))return a.map(n=>Xg(n));if(typeof a=="function"||a!==Object(a))return a;const e={};return Object.entries(a).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=Xg(i)}),e},LT=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Fc(a){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(a)}function zT(a,e){if(Fc(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var i=n.call(a,e);if(Fc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function HT(a){var e=zT(a,"string");return Fc(e)=="symbol"?e:e+""}function BT(a,e,n){return(e=HT(e))in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function t_(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),n.push.apply(n,i)}return n}function it(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t_(Object(n),!0).forEach(function(i){BT(a,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(n,i))})}return a}const n_=a=>{var e;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(e=a.error)===null||e===void 0?void 0:e.message)||JSON.stringify(a)},KT=async(a,e,n,i)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!n?.noResolveJson){const o=a,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const f=u?.statusCode||u?.code||c+"";e(new Ch(n_(u),c,f,i))}).catch(()=>{if(i==="vectors"){const u=c+"";e(new Ch(o.statusText||`HTTP ${c} error`,c,u,i))}else{const u=c+"";e(new Ch(o.statusText||`HTTP ${c} error`,c,u,i))}});else{const u=c+"";e(new Ch(o.statusText||`HTTP ${c} error`,c,u,i))}}else e(new q0(n_(a),a,i))},qT=(a,e,n,i)=>{const o={method:a,headers:e?.headers||{}};return a==="GET"||a==="HEAD"||!i?it(it({},o),n):(jT(i)?(o.headers=it({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),it(it({},o),n))};async function Nc(a,e,n,i,o,c,u){return new Promise((f,m)=>{a(n,qT(e,i,o,c)).then(y=>{if(!y.ok)throw y;if(i?.noResolveJson)return y;if(u==="vectors"){const S=y.headers.get("content-type");if(y.headers.get("content-length")==="0"||y.status===204)return{};if(!S||!S.includes("application/json"))return{}}return y.json()}).then(y=>f(y)).catch(y=>KT(y,m,i,u))})}function G0(a="storage"){return{get:async(e,n,i,o)=>Nc(e,"GET",n,i,o,void 0,a),post:async(e,n,i,o,c)=>Nc(e,"POST",n,o,c,i,a),put:async(e,n,i,o,c)=>Nc(e,"PUT",n,o,c,i,a),head:async(e,n,i,o)=>Nc(e,"HEAD",n,it(it({},i),{},{noResolveJson:!0}),o,void 0,a),remove:async(e,n,i,o,c)=>Nc(e,"DELETE",n,o,c,i,a)}}const GT=G0("storage"),{get:$c,post:ai,put:Wg,head:FT,remove:Tp}=GT,Nr=G0("vectors");var El=class{constructor(a,e={},n,i="storage"){this.shouldThrowOnError=!1,this.url=a,this.headers=e,this.fetch=PT(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(a){var e=this;try{return{data:await a(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hd(n))return{data:null,error:n};throw n}}},$T=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e}then(a,e){return this.execute().then(a,e)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(hd(e))return{data:null,error:e};throw e}}};let F0;F0=Symbol.toStringTag;var VT=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e,this[F0]="BlobDownloadBuilder",this.promise=null}asStream(){return new $T(this.downloadFn,this.shouldThrowOnError)}then(a,e){return this.getPromise().then(a,e)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(hd(e))return{data:null,error:e};throw e}}};const YT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},r_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var QT=class extends El{constructor(a,e={},n,i){super(a,e,i,"storage"),this.bucketId=n}async uploadOrUpdate(a,e,n,i){var o=this;return o.handleOperation(async()=>{let c;const u=it(it({},r_),i);let f=it(it({},o.headers),a==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),m&&c.append("metadata",o.encodeMetadata(m)),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),m&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(m))):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(f=it(it({},f),i.headers));const y=o._removeEmptyFolders(e),S=o._getFinalPath(y),E=await(a=="PUT"?Wg:ai)(o.fetch,`${o.url}/object/${S}`,c,it({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{path:y,id:E.Id,fullPath:E.Key}})}async upload(a,e,n){return this.uploadOrUpdate("POST",a,e,n)}async uploadToSignedUrl(a,e,n,i){var o=this;const c=o._removeEmptyFolders(a),u=o._getFinalPath(c),f=new URL(o.url+`/object/upload/sign/${u}`);return f.searchParams.set("token",e),o.handleOperation(async()=>{let m;const y=it({upsert:r_.upsert},i),S=it(it({},o.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",y.cacheControl)):(m=n,S["cache-control"]=`max-age=${y.cacheControl}`,S["content-type"]=y.contentType),{path:c,fullPath:(await Wg(o.fetch,f.toString(),m,{headers:S})).Key}})}async createSignedUploadUrl(a,e){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(a);const o=it({},n.headers);e?.upsert&&(o["x-upsert"]="true");const c=await ai(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(n.url+c.url),f=u.searchParams.get("token");if(!f)throw new ud("No token returned by API");return{signedUrl:u.toString(),path:a,token:f}})}async update(a,e,n){return this.uploadOrUpdate("PUT",a,e,n)}async move(a,e,n){var i=this;return i.handleOperation(async()=>await ai(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:a,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers}))}async copy(a,e,n){var i=this;return i.handleOperation(async()=>({path:(await ai(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:a,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(a,e,n){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(a),c=await ai(i.fetch,`${i.url}/object/sign/${o}`,it({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:i.headers});const u=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${c.signedURL}${u}`)}})}async createSignedUrls(a,e,n){var i=this;return i.handleOperation(async()=>{const o=await ai(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:a},{headers:i.headers}),c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o.map(u=>it(it({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${c}`):null}))})}download(a,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"",c=this._getFinalPath(a),u=()=>$c(this.fetch,`${this.url}/${n}/${c}${o}`,{headers:this.headers,noResolveJson:!0});return new VT(u,this.shouldThrowOnError)}async info(a){var e=this;const n=e._getFinalPath(a);return e.handleOperation(async()=>Xg(await $c(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(a){var e=this;const n=e._getFinalPath(a);try{return await FT(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(hd(i)&&i instanceof q0){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(a,e){const n=this._getFinalPath(a),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);const c=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&i.push(u);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${f}`)}}}async remove(a){var e=this;return e.handleOperation(async()=>await Tp(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:a},{headers:e.headers}))}async list(a,e,n){var i=this;return i.handleOperation(async()=>{const o=it(it(it({},YT),e),{},{prefix:a||""});return await ai(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},n)})}async listV2(a,e){var n=this;return n.handleOperation(async()=>{const i=it({},a);return await ai(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e)})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const e=[];return a.width&&e.push(`width=${a.width}`),a.height&&e.push(`height=${a.height}`),a.resize&&e.push(`resize=${a.resize}`),a.format&&e.push(`format=${a.format}`),a.quality&&e.push(`quality=${a.quality}`),e.join("&")}};const JT="2.93.3",tu={"X-Client-Info":`storage-js/${JT}`};var XT=class extends El{constructor(a,e={},n,i){const o=new URL(a);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=it(it({},tu),e);super(c,u,n,"storage")}async listBuckets(a){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(a);return await $c(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(a){var e=this;return e.handleOperation(async()=>await $c(e.fetch,`${e.url}/bucket/${a}`,{headers:e.headers}))}async createBucket(a,e={public:!1}){var n=this;return n.handleOperation(async()=>await ai(n.fetch,`${n.url}/bucket`,{id:a,name:a,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(a,e){var n=this;return n.handleOperation(async()=>await Wg(n.fetch,`${n.url}/bucket/${a}`,{id:a,name:a,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(a){var e=this;return e.handleOperation(async()=>await ai(e.fetch,`${e.url}/bucket/${a}/empty`,{},{headers:e.headers}))}async deleteBucket(a){var e=this;return e.handleOperation(async()=>await Tp(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(a){const e={};return a&&("limit"in a&&(e.limit=String(a.limit)),"offset"in a&&(e.offset=String(a.offset)),a.search&&(e.search=a.search),a.sortColumn&&(e.sortColumn=a.sortColumn),a.sortOrder&&(e.sortOrder=a.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},WT=class extends El{constructor(a,e={},n){const i=a.replace(/\/$/,""),o=it(it({},tu),e);super(i,o,n,"storage")}async createBucket(a){var e=this;return e.handleOperation(async()=>await ai(e.fetch,`${e.url}/bucket`,{name:a},{headers:e.headers}))}async listBuckets(a){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;a?.limit!==void 0&&n.set("limit",a.limit.toString()),a?.offset!==void 0&&n.set("offset",a.offset.toString()),a?.sortColumn&&n.set("sortColumn",a.sortColumn),a?.sortOrder&&n.set("sortOrder",a.sortOrder),a?.search&&n.set("search",a.search);const i=n.toString(),o=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await $c(e.fetch,o,{headers:e.headers})})}async deleteBucket(a){var e=this;return e.handleOperation(async()=>await Tp(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}))}from(a){var e=this;if(!LT(a))throw new ud("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new MT({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...f)=>{try{return{data:await u.apply(o,f),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}},ZT=class extends El{constructor(a,e={},n){const i=a.replace(/\/$/,""),o=it(it({},tu),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async createIndex(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/CreateIndex`,a,{headers:e.headers})||{})}async getIndex(a,e){var n=this;return n.handleOperation(async()=>await Nr.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:a,indexName:e},{headers:n.headers}))}async listIndexes(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/ListIndexes`,a,{headers:e.headers}))}async deleteIndex(a,e){var n=this;return n.handleOperation(async()=>await Nr.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:a,indexName:e},{headers:n.headers})||{})}},eA=class extends El{constructor(a,e={},n){const i=a.replace(/\/$/,""),o=it(it({},tu),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async putVectors(a){var e=this;if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/PutVectors`,a,{headers:e.headers})||{})}async getVectors(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/GetVectors`,a,{headers:e.headers}))}async listVectors(a){var e=this;if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/ListVectors`,a,{headers:e.headers}))}async queryVectors(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/QueryVectors`,a,{headers:e.headers}))}async deleteVectors(a){var e=this;if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/DeleteVectors`,a,{headers:e.headers})||{})}},tA=class extends El{constructor(a,e={},n){const i=a.replace(/\/$/,""),o=it(it({},tu),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async createBucket(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{})}async getBucket(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:a},{headers:e.headers}))}async listBuckets(a={}){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/ListVectorBuckets`,a,{headers:e.headers}))}async deleteBucket(a){var e=this;return e.handleOperation(async()=>await Nr.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{})}},nA=class extends tA{constructor(a,e={}){super(a,e.headers||{},e.fetch)}from(a){return new rA(this.url,this.headers,a,this.fetch)}async createBucket(a){var e=()=>super.createBucket,n=this;return e().call(n,a)}async getBucket(a){var e=()=>super.getBucket,n=this;return e().call(n,a)}async listBuckets(a={}){var e=()=>super.listBuckets,n=this;return e().call(n,a)}async deleteBucket(a){var e=()=>super.deleteBucket,n=this;return e().call(n,a)}},rA=class extends ZT{constructor(a,e,n,i){super(a,e,i),this.vectorBucketName=n}async createIndex(a){var e=()=>super.createIndex,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(a={}){var e=()=>super.listIndexes,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(a){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,a)}async deleteIndex(a){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,a)}index(a){return new iA(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},iA=class extends eA{constructor(a,e,n,i,o){super(a,e,o),this.vectorBucketName=n,this.indexName=i}async putVectors(a){var e=()=>super.putVectors,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(a){var e=()=>super.getVectors,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(a={}){var e=()=>super.listVectors,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(a){var e=()=>super.queryVectors,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(a){var e=()=>super.deleteVectors,n=this;return e().call(n,it(it({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},aA=class extends XT{constructor(a,e={},n,i){super(a,e,n,i)}from(a){return new QT(this.url,this.headers,a,this.fetch)}get vectors(){return new nA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new WT(this.url+"/iceberg",this.headers,this.fetch)}};const $0="2.93.3",ol=30*1e3,Zg=3,Ig=Zg*ol,sA="http://localhost:9999",oA="supabase.auth.token",lA={"X-Client-Info":`gotrue-js/${$0}`},ep="X-Supabase-Api-Version",V0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uA=600*1e3;let Vc=class extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}};function $e(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class hA extends Vc{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function dA(a){return $e(a)&&a.name==="AuthApiError"}class Gs extends Vc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ha extends Vc{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class Rr extends ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ng(a){return $e(a)&&a.name==="AuthSessionMissingError"}class Zo extends ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eh extends ha{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Th extends ha{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fA(a){return $e(a)&&a.name==="AuthImplicitGrantRedirectError"}class i_ extends ha{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gA extends ha{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tp extends ha{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Dg(a){return $e(a)&&a.name==="AuthRetryableFetchError"}class a_ extends ha{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class np extends ha{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),s_=` 	
\r=`.split(""),pA=(()=>{const a=new Array(128);for(let e=0;e<a.length;e+=1)a[e]=-1;for(let e=0;e<s_.length;e+=1)a[s_[e].charCodeAt(0)]=-2;for(let e=0;e<qh.length;e+=1)a[qh[e].charCodeAt(0)]=e;return a})();function o_(a,e,n){if(a!==null)for(e.queue=e.queue<<8|a,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(qh[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(qh[i]),e.queuedBits-=6}}function Y0(a,e,n){const i=pA[a];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function l_(a){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{vA(u,i,n)};for(let u=0;u<a.length;u+=1)Y0(a.charCodeAt(u),o,c);return e.join("")}function mA(a,e){if(a<=127){e(a);return}else if(a<=2047){e(192|a>>6),e(128|a&63);return}else if(a<=65535){e(224|a>>12),e(128|a>>6&63),e(128|a&63);return}else if(a<=1114111){e(240|a>>18),e(128|a>>12&63),e(128|a>>6&63),e(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function yA(a,e){for(let n=0;n<a.length;n+=1){let i=a.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(a.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}mA(i,e)}}function vA(a,e,n){if(e.utf8seq===0){if(a<=127){n(a);return}for(let i=1;i<6;i+=1)if((a>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=a&31;else if(e.utf8seq===3)e.codepoint=a&15;else if(e.utf8seq===4)e.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|a&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function dl(a){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<a.length;o+=1)Y0(a.charCodeAt(o),n,i);return new Uint8Array(e)}function bA(a){const e=[];return yA(a,n=>e.push(n)),new Uint8Array(e)}function $s(a){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return a.forEach(o=>o_(o,n,i)),o_(null,n,i),e.join("")}function _A(a){return Math.round(Date.now()/1e3)+a}function wA(){return Symbol("auth-callback")}const qn=()=>typeof window<"u"&&typeof document<"u",zs={tested:!1,writable:!1},Q0=()=>{if(!qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zs.tested)return zs.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),zs.tested=!0,zs.writable=!0}catch{zs.tested=!0,zs.writable=!1}return zs.writable};function SA(a){const e={},n=new URL(a);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const J0=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),CA=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",ll=async(a,e,n)=>{await a.setItem(e,JSON.stringify(n))},Hs=async(a,e)=>{const n=await a.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kn=async(a,e)=>{await a.removeItem(e)};class dd{constructor(){this.promise=new dd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}dd.promiseConstructor=Promise;function Ah(a){const e=a.split(".");if(e.length!==3)throw new np("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!cA.test(e[i]))throw new np("JWT not in base64url format");return{header:JSON.parse(l_(e[0])),payload:JSON.parse(l_(e[1])),signature:dl(e[2]),raw:{header:e[0],payload:e[1]}}}async function EA(a){return await new Promise(e=>{setTimeout(()=>e(null),a)})}function TA(a,e){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await a(c);if(!e(c,null,u)){i(u);return}}catch(u){if(!e(c,u)){o(u);return}}})()})}function AA(a){return("0"+a.toString(16)).substr(-2)}function kA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let c=0;c<56;c++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,AA).join("")}async function OA(a){const n=new TextEncoder().encode(a),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function RA(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const n=await OA(a);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function el(a,e,n=!1){const i=kA();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await ll(a,`${e}-code-verifier`,o);const c=await RA(i);return[c,i===c?"plain":"s256"]}const xA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function IA(a){const e=a.headers.get(ep);if(!e||!e.match(xA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function NA(a){if(!a)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(a<=e)throw new Error("JWT has expired")}function DA(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tl(a){if(!UA.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ug(){const a={};return new Proxy(a,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function MA(a,e){return new Proxy(a,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,o)}})}function c_(a){return JSON.parse(JSON.stringify(a))}const Bs=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),PA=[502,503,504];async function u_(a){var e;if(!CA(a))throw new tp(Bs(a),0);if(PA.includes(a.status))throw new tp(Bs(a),a.status);let n;try{n=await a.json()}catch(c){throw new Gs(Bs(c),c)}let i;const o=IA(a);if(o&&o.getTime()>=V0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new a_(Bs(n),a.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Rr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new a_(Bs(n),a.status,n.weak_password.reasons);throw new hA(Bs(n),a.status||500,i)}const jA=(a,e,n,i)=>{const o={method:a,headers:e?.headers||{}};return a==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function nt(a,e,n,i){var o;const c=Object.assign({},i?.headers);c[ep]||(c[ep]=V0["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await LA(a,e,n+f,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function LA(a,e,n,i,o,c){const u=jA(e,i,o,c);let f;try{f=await a(n,Object.assign({},u))}catch(m){throw console.error(m),new tp(Bs(m),0)}if(f.ok||await u_(f),i?.noResolveJson)return f;try{return await f.json()}catch(m){await u_(m)}}function ri(a){var e;let n=null;BA(a)&&(n=Object.assign({},a),a.expires_at||(n.expires_at=_A(a.expires_in)));const i=(e=a.user)!==null&&e!==void 0?e:a;return{data:{session:n,user:i},error:null}}function h_(a){const e=ri(a);return!e.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=a.weak_password),e}function Za(a){var e;return{data:{user:(e=a.user)!==null&&e!==void 0?e:a},error:null}}function zA(a){return{data:a,error:null}}function HA(a){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:c}=a,u=cd(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:c},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function d_(a){return a}function BA(a){return a.access_token&&a.refresh_token&&a.expires_in}const Mg=["global","local","others"];class KA{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=J0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Mg[0]){if(Mg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mg.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Za})}catch(i){if($e(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=cd(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:HA,redirectTo:n?.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Za})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,c,u,f,m;try{const y={nextPage:null,lastPage:0,total:0},S=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:d_});if(S.error)throw S.error;const E=await S.json(),O=(u=S.headers.get("x-total-count"))!==null&&u!==void 0?u:0,R=(m=(f=S.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return R.length>0&&(R.forEach(B=>{const V=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(B.split(";")[1].split("=")[1]);y[`${J}Page`]=V}),y.total=parseInt(O)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){tl(e);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Za})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){tl(e);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Za})}catch(i){if($e(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){tl(e);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Za})}catch(i){if($e(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){tl(e.userId);try{const{data:n,error:i}=await nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){tl(e.userId),tl(e.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,o,c,u,f,m;try{const y={nextPage:null,lastPage:0,total:0},S=await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:d_});if(S.error)throw S.error;const E=await S.json(),O=(u=S.headers.get("x-total-count"))!==null&&u!==void 0?u:0,R=(m=(f=S.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return R.length>0&&(R.forEach(B=>{const V=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(B.split(";")[1].split("=")[1]);y[`${J}Page`]=V}),y.total=parseInt(O)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if($e(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await nt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if($e(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}}function f_(a={}){return{getItem:e=>a[e]||null,setItem:(e,n)=>{a[e]=n},removeItem:e=>{delete a[e]}}}const nl={debug:!!(globalThis&&Q0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class X0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qA extends X0{}async function GA(a,e,n){nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),nl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,o.name);try{return await n()}finally{nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,o.name)}}else{if(e===0)throw nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new qA(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(nl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function FA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function W0(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function $A(a){return parseInt(a,16)}function VA(a){const e=new TextEncoder().encode(a);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function YA(a){var e;const{chainId:n,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:f,requestId:m,resources:y,scheme:S,uri:E,version:O}=a;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(O!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${O}`);if(!((e=a.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const R=W0(a.address),B=S?`${S}://${i}`:i,V=a.statement?`${a.statement}
`:"",J=`${B} wants you to sign in with your Ethereum account:
${R}

${V}`;let ge=`URI: ${E}
Version: ${O}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(ge+=`
Expiration Time: ${o.toISOString()}`),f&&(ge+=`
Not Before: ${f.toISOString()}`),m&&(ge+=`
Request ID: ${m}`),y){let me=`
Resources:`;for(const ce of y){if(!ce||typeof ce!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${ce}`);me+=`
- ${ce}`}ge+=me}return`${J}
${ge}`}class Sn extends Error{constructor({message:e,code:n,cause:i,name:o}){var c;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=o??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=n}}class Gh extends Sn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function QA({error:a,options:e}){var n,i,o;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((n=c.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(e.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new Sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new Sn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new Sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const u=window.location.hostname;if(Z0(u)){if(c.rp.id!==u)return new Sn({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function JA({error:a,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new Sn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const i=window.location.hostname;if(Z0(i)){if(n.rpId!==i)return new Sn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class XA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const WA=new XA;function ZA(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:e,user:n,excludeCredentials:i}=a,o=cd(a,["challenge","user","excludeCredentials"]),c=dl(e).buffer,u=Object.assign(Object.assign({},n),{id:dl(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:c,user:u});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const y=i[m];f.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:dl(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return f}function ek(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:e,allowCredentials:n}=a,i=cd(a,["challenge","allowCredentials"]),o=dl(e).buffer,c=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){c.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];c.allowCredentials[u]=Object.assign(Object.assign({},f),{id:dl(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function tk(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const n=a;return{id:a.id,rawId:a.id,response:{attestationObject:$s(new Uint8Array(a.response.attestationObject)),clientDataJSON:$s(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nk(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const n=a,i=a.getClientExtensionResults(),o=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:$s(new Uint8Array(o.authenticatorData)),clientDataJSON:$s(new Uint8Array(o.clientDataJSON)),signature:$s(new Uint8Array(o.signature)),userHandle:o.userHandle?$s(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Z0(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function g_(){var a,e;return!!(qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function rk(a){try{const e=await navigator.credentials.create(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",e)}:{data:null,error:new Gh("Empty credential response",e)}}catch(e){return{data:null,error:QA({error:e,options:a})}}}async function ik(a){try{const e=await navigator.credentials.get(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",e)}:{data:null,error:new Gh("Empty credential response",e)}}catch(e){return{data:null,error:JA({error:e,options:a})}}}const ak={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},sk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Fh(...a){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of a)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))i[c]=u;else if(n(u))i[c]=u;else if(e(u)){const f=i[c];e(f)?i[c]=Fh(f,u):i[c]=Fh(u)}else i[c]=u}return i}function ok(a,e){return Fh(ak,a,e||{})}function lk(a,e){return Fh(sk,a,e||{})}class ck{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:o},c){var u;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!f)return{data:null,error:m};const y=o??WA.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:S}=f.webauthn.credential_options.publicKey;if(!S.name){const E=i;if(E)S.name=`${S.id}:${E}`;else{const R=(await this.client.getUser()).data.user,B=((u=R?.user_metadata)===null||u===void 0?void 0:u.name)||R?.email||R?.id||"User";S.name=`${S.id}:${B}`}}S.displayName||(S.displayName=S.name)}switch(f.webauthn.type){case"create":{const S=ok(f.webauthn.credential_options.publicKey,c?.create),{data:E,error:O}=await rk({publicKey:S,signal:y});return E?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:E}},error:null}:{data:null,error:O}}case"request":{const S=lk(f.webauthn.credential_options.publicKey,c?.request),{data:E,error:O}=await ik(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:S,signal:y}));return E?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:E}},error:null}:{data:null,error:O}}}}catch(f){return $e(f)?{data:null,error:f}:{data:null,error:new Gs("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Vc("rpId is required for WebAuthn authentication")};try{if(!g_())return{data:null,error:new Gs("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:c});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return $e(u)?{data:null,error:u}:{data:null,error:new Gs("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Vc("rpId is required for WebAuthn registration")};try{if(!g_())return{data:null,error:new Gs("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(S=>{var E;return(E=S.data)===null||E===void 0?void 0:E.all.find(O=>O.factor_type==="webauthn"&&O.friendly_name===e&&O.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S?.id}):void 0),{data:null,error:f};const{data:m,error:y}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:c});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(u){return $e(u)?{data:null,error:u}:{data:null,error:new Gs("Unexpected error in register",u)}}}}FA();const uk={url:sA,storageKey:oA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function p_(a,e,n){return await n()}const rl={};class Yc{get jwks(){var e,n;return(n=(e=rl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){rl[this.storageKey]=Object.assign(Object.assign({},rl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=rl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){rl[this.storageKey]=Object.assign(Object.assign({},rl[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},uk),e);if(this.storageKey=c.storageKey,this.instanceID=(n=Yc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Yc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&qn()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new KA({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=J0(c.fetch),this.lock=c.lock||p_,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&qn()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=GA:this.lock=p_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ck(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Q0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=f_(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=f_(this.memoryStorage)),qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(qn()&&(n=SA(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),qn()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(n,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),fA(c)){const m=(e=c.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?this._returnResult({error:n}):this._returnResult({error:new Gs("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ri}),{data:u,error:f}=c;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(c){if($e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var n,i,o;try{let c;if("email"in e){const{email:S,password:E,options:O}=e;let R=null,B=null;this.flowType==="pkce"&&([R,B]=await el(this.storage,this.storageKey)),c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:S,password:E,data:(n=O?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:R,code_challenge_method:B},xform:ri})}else if("phone"in e){const{phone:S,password:E,options:O}=e;c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:E,data:(i=O?.data)!==null&&i!==void 0?i:{},channel:(o=O?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:ri})}else throw new Eh("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return await Kn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(c){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:u,options:f}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:h_})}else if("phone"in e){const{phone:c,password:u,options:f}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:h_})}else throw new Eh("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const c=new Zo;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,o,c,u,f,m,y,S,E,O;let R,B;if("message"in e)R=e.message,B=e.signature;else{const{chain:V,wallet:J,statement:ge,options:me}=e;let ce;if(qn())if(typeof J=="object")ce=J;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")ce=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!me?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ce=J}const ke=new URL((n=me?.url)!==null&&n!==void 0?n:window.location.href),Ze=await ce.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ze||Ze.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const xe=W0(Ze[0]);let pe=(i=me?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!pe){const K=await ce.request({method:"eth_chainId"});pe=$A(K)}const I={domain:ke.host,address:xe,statement:ge,uri:ke.href,version:"1",chainId:pe,nonce:(o=me?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=me?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=me?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=me?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=me?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(S=me?.signInWithEthereum)===null||S===void 0?void 0:S.resources};R=YA(I),B=await ce.request({method:"personal_sign",params:[VA(R),xe]})}try{const{data:V,error:J}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:B},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(O=e.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:ri});if(J)throw J;if(!V||!V.session||!V.user){const ge=new Zo;return this._returnResult({data:{user:null,session:null},error:ge})}return V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),this._returnResult({data:Object.assign({},V),error:J})}catch(V){if($e(V))return this._returnResult({data:{user:null,session:null},error:V});throw V}}async signInWithSolana(e){var n,i,o,c,u,f,m,y,S,E,O,R;let B,V;if("message"in e)B=e.message,V=e.signature;else{const{chain:J,wallet:ge,statement:me,options:ce}=e;let ke;if(qn())if(typeof ge=="object")ke=ge;else{const xe=window;if("solana"in xe&&typeof xe.solana=="object"&&("signIn"in xe.solana&&typeof xe.solana.signIn=="function"||"signMessage"in xe.solana&&typeof xe.solana.signMessage=="function"))ke=xe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ge!="object"||!ce?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ke=ge}const Ze=new URL((n=ce?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in ke&&ke.signIn){const xe=await ke.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},ce?.signInWithSolana),{version:"1",domain:Ze.host,uri:Ze.href}),me?{statement:me}:null));let pe;if(Array.isArray(xe)&&xe[0]&&typeof xe[0]=="object")pe=xe[0];else if(xe&&typeof xe=="object"&&"signedMessage"in xe&&"signature"in xe)pe=xe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in pe&&"signature"in pe&&(typeof pe.signedMessage=="string"||pe.signedMessage instanceof Uint8Array)&&pe.signature instanceof Uint8Array)B=typeof pe.signedMessage=="string"?pe.signedMessage:new TextDecoder().decode(pe.signedMessage),V=pe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ke)||typeof ke.signMessage!="function"||!("publicKey"in ke)||typeof ke!="object"||!ke.publicKey||!("toBase58"in ke.publicKey)||typeof ke.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");B=[`${Ze.host} wants you to sign in with your Solana account:`,ke.publicKey.toBase58(),...me?["",me,""]:[""],"Version: 1",`URI: ${Ze.href}`,`Issued At: ${(o=(i=ce?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=ce?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${ce.signInWithSolana.notBefore}`]:[],...!((u=ce?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${ce.signInWithSolana.expirationTime}`]:[],...!((f=ce?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${ce.signInWithSolana.chainId}`]:[],...!((m=ce?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${ce.signInWithSolana.nonce}`]:[],...!((y=ce?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${ce.signInWithSolana.requestId}`]:[],...!((E=(S=ce?.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||E===void 0)&&E.length?["Resources",...ce.signInWithSolana.resources.map(pe=>`- ${pe}`)]:[]].join(`
`);const xe=await ke.signMessage(new TextEncoder().encode(B),"utf8");if(!xe||!(xe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");V=xe}}try{const{data:J,error:ge}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:B,signature:$s(V)},!((O=e.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:ri});if(ge)throw ge;if(!J||!J.session||!J.user){const me=new Zo;return this._returnResult({data:{user:null,session:null},error:me})}return J.session&&(await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",J.session)),this._returnResult({data:Object.assign({},J),error:ge})}catch(J){if($e(J))return this._returnResult({data:{user:null,session:null},error:J});throw J}}async _exchangeCodeForSession(e){const n=await Hs(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new gA;const{data:c,error:u}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ri});if(await Kn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const f=new Zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:c,nonce:u}=e,f=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ri}),{data:m,error:y}=f;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const S=new Zo;return this._returnResult({data:{user:null,session:null},error:S})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,o,c,u;try{if("email"in e){const{email:f,options:m}=e;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await el(this.storage,this.storageKey));const{error:E}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:S},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:m}=e,{data:y,error:S}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:S})}throw new Eh("You must provide either an email or phone number.")}catch(f){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,i;try{let o,c;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ri});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,y=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(o){if($e(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,i,o,c,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await el(this.storage,this.storageKey));const y=await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:zA});return!((c=y.data)===null||c===void 0)&&c.url&&qn()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(f){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Rr;const{error:o}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if($e(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:c}=e,{error:u}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:i,type:o,options:c}=e,{data:u,error:f}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Eh("You must provide either an email or phone number and a type")}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Ig:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await Hs(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Ug()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=MA(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Za}):await this._useSession(async n=>{var i,o,c;const{data:u,error:f}=n;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rr}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Za})})}catch(n){if($e(n))return Ng(n)&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new Rr;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await el(this.storage,this.storageKey));const{data:y,error:S}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:Za});if(S)throw S;return u.user=y.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rr;const n=Date.now()/1e3;let i=n,o=!0,c=null;const{payload:u}=Ah(e.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(n){if($e(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:f}=n;if(f)throw f;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Rr;const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!qn())throw new Th("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Th(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new i_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Th("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new i_("No code detected.");const{data:me,error:ce}=await this._exchangeCodeForSession(e.code);if(ce)throw ce;const ke=new URL(window.location.href);return ke.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ke.toString()),{data:{session:me.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:f,expires_at:m,token_type:y}=e;if(!c||!f||!u||!y)throw new Th("No session defined in URL");const S=Math.round(Date.now()/1e3),E=parseInt(f);let O=S+E;m&&(O=parseInt(m));const R=O-S;R*1e3<=ol&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${E}s`);const B=O-E;S-B>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",B,O,S):S-B<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",B,O,S);const{data:V,error:J}=await this._getUser(c);if(J)throw J;const ge={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:E,expires_at:O,refresh_token:u,token_type:y,user:V.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ge,redirectType:e.type},error:null})}catch(i){if($e(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c&&!Ng(c))return this._returnResult({error:c});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(dA(f)&&(f.status===404||f.status===401||f.status===403)||Ng(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=wA(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:c},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await el(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:o}=await this._useSession(async c=>{var u,f,m,y,S;const{data:E,error:O}=c;if(O)throw O;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",R,{headers:this.headers,jwt:(S=(y=E.session)===null||y===void 0?void 0:y.access_token)!==null&&S!==void 0?S:void 0})});if(o)throw o;return qn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if($e(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:c}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:y,nonce:S}=e,E=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:m,access_token:y,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ri}),{data:O,error:R}=E;return R?this._returnResult({data:{user:null,session:null},error:R}):!O||!O.session||!O.user?this._returnResult({data:{user:null,session:null},error:new Zo}):(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("USER_UPDATED",O.session)),this._returnResult({data:O,error:R}))}catch(o){if(await Kn(this.storage,`${this.storageKey}-code-verifier`),$e(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:c,error:u}=n;if(u)throw u;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await TA(async o=>(o>0&&await EA(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ri})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Dg(c)&&Date.now()+u-i<ol})}catch(i){if(this._debug(n,"error",i),$e(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),qn()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Hs(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await ll(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u?.user)!==null&&e!==void 0?e:Ug()}else if(o&&!o.user&&!o.user){const u=await Hs(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Kn(this.storage,this.storageKey+"-user"),await ll(this.storage,this.storageKey,o)):o.user=Ug()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ig;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Ig}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Dg(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new dd;const{data:c,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!c.session)throw new Rr;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),$e(c)){const u={data:null,error:c};return Dg(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(m){c.push(m)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Kn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await ll(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const c=c_(o);await ll(this.storage,this.storageKey,c)}else{const o=c_(n);await ll(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Kn(this.storage,this.storageKey),await Kn(this.storage,this.storageKey+"-code-verifier"),await Kn(this.storage,this.storageKey+"-user"),this.userStorage&&await Kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ol);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/ol);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ol}ms, refresh threshold is ${Zg} ticks`),o<=Zg&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof X0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await el(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;return c?this._returnResult({data:null,error:c}):await nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:y}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return y?this._returnResult({data:null,error:y}):(e.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?tk(e.webauthn.credential_response):nk(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ZA(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ek(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=n?.factors)!==null&&e!==void 0?e:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,i,o,c;if(e)try{const{payload:R}=Ah(e);let B=null;R.aal&&(B=R.aal);let V=B;const{data:{user:J},error:ge}=await this.getUser(e);if(ge)return this._returnResult({data:null,error:ge});((i=(n=J?.factors)===null||n===void 0?void 0:n.filter(ke=>ke.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(V="aal2");const ce=R.amr||[];return{data:{currentLevel:B,nextLevel:V,currentAuthenticationMethods:ce},error:null}}catch(R){if($e(R))return this._returnResult({data:null,error:R});throw R}const{data:{session:u},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Ah(u.access_token);let y=null;m.aal&&(y=m.aal);let S=y;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(R=>R.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(S="aal2");const O=m.amr||[];return{data:{currentLevel:y,nextLevel:S,currentAuthenticationMethods:O},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await nt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Rr})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Rr});const u=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&qn()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if($e(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Rr});const u=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&qn()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if($e(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await nt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Rr})})}catch(e){if($e(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await nt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rr})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(f=>f.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+uA>o)return i;const{data:c,error:u}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:R,error:B}=await this.getSession();if(B||!R.session)return this._returnResult({data:null,error:B});i=R.session.access_token}const{header:o,payload:c,signature:u,raw:{header:f,payload:m}}=Ah(i);n?.allowExpired||NA(c.exp);const y=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:R}=await this.getUser(i);if(R)throw R;return{data:{claims:c,header:o,signature:u},error:null}}const S=DA(o.alg),E=await crypto.subtle.importKey("jwk",y,S,!0,["verify"]);if(!await crypto.subtle.verify(S,E,u,bA(`${f}.${m}`)))throw new np("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(i){if($e(i))return this._returnResult({data:null,error:i});throw i}}}Yc.nextInstanceID={};const hk=Yc,dk="2.93.3";let jc="";typeof Deno<"u"?jc="deno":typeof document<"u"?jc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jc="react-native":jc="node";const fk={"X-Client-Info":`supabase-js-${jc}/${dk}`},gk={headers:fk},pk={schema:"public"},mk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yk={};function Qc(a){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(a)}function vk(a,e){if(Qc(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var i=n.call(a,e);if(Qc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function bk(a){var e=vk(a,"string");return Qc(e)=="symbol"?e:e+""}function _k(a,e,n){return(e=bk(e))in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function m_(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),n.push.apply(n,i)}return n}function on(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(n),!0).forEach(function(i){_k(a,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(n,i))})}return a}const wk=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),Sk=()=>Headers,Ck=(a,e,n)=>{const i=wk(n),o=Sk();return async(c,u)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:a;let y=new o(u?.headers);return y.has("apikey")||y.set("apikey",a),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),i(c,on(on({},u),{},{headers:y}))}};function Ek(a){return a.endsWith("/")?a:a+"/"}function Tk(a,e){var n,i;const{db:o,auth:c,realtime:u,global:f}=a,{db:m,auth:y,realtime:S,global:E}=e,O={db:on(on({},m),o),auth:on(on({},y),c),realtime:on(on({},S),u),storage:{},global:on(on(on({},E),f),{},{headers:on(on({},(n=E?.headers)!==null&&n!==void 0?n:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return a.accessToken?O.accessToken=a.accessToken:delete O.accessToken,O}function Ak(a){const e=a?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ek(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kk=class extends hk{constructor(a){super(a)}},Ok=class{constructor(a,e,n){var i,o;this.supabaseUrl=a,this.supabaseKey=e;const c=Ak(a);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:pk,realtime:yk,auth:on(on({},mk),{},{storageKey:u}),global:gk},m=Tk(n??{},f);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(S,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=m.auth)!==null&&y!==void 0?y:{},this.headers,m.global.fetch)}this.fetch=Ck(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(on({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new dT(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new aA(this.storageUrl.href,this.headers,this.fetch,n?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new oT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,e,n)}channel(a,e={config:{}}){return this.realtime.channel(a,e)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,e,n;if(a.accessToken)return await a.accessToken();const{data:i}=await a.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:c,flowType:u,lock:f,debug:m,throwOnError:y},S,E){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kk({url:this.authUrl.href,headers:on(on({},O),S),storageKey:c,autoRefreshToken:a,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,flowType:u,lock:f,debug:m,throwOnError:y,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new RT(this.realtimeUrl.href,on(on({},a),{},{params:on(on({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,e)=>{this._handleTokenChanged(a,"CLIENT",e?.access_token)})}_handleTokenChanged(a,e,n){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Rk=(a,e,n)=>new Ok(a,e,n);function xk(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const e=a.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}xk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ik="https://fryvhoosrlfvpepwdile.supabase.co",Nk="sb_publishable_ZsLuLbbilUkFIut7_R0EdQ_Iz-LIJ_k",On=Rk(Ik,Nk);const ew=(...a)=>a.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const Dk=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Uk=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const y_=a=>{const e=Uk(a);return e.charAt(0).toUpperCase()+e.slice(1)};var Mk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pk=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const jk=mt.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...f},m)=>mt.createElement("svg",{ref:m,...Mk,width:e,height:e,stroke:a,strokeWidth:i?Number(n)*24/Number(e):n,className:ew("lucide",o),...!c&&!Pk(f)&&{"aria-hidden":"true"},...f},[...u.map(([y,S])=>mt.createElement(y,S)),...Array.isArray(c)?c:[c]]));const En=(a,e)=>{const n=mt.forwardRef(({className:i,...o},c)=>mt.createElement(jk,{ref:c,iconNode:e,className:ew(`lucide-${Dk(y_(a))}`,`lucide-${a}`,i),...o}));return n.displayName=y_(a),n};const Lk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zk=En("check",Lk);const Hk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bk=En("chevron-down",Hk);const Kk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qk=En("chevron-up",Kk);const Gk=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],v_=En("cloud",Gk);const Fk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$k=En("download",Fk);const Vk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Yk=En("eye-off",Vk);const Qk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jk=En("eye",Qk);const Xk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Wk=En("layout-dashboard",Xk);const Zk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eO=En("log-out",Zk);const tO=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],b_=En("pen-line",tO);const nO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rO=En("pen",nO);const iO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aO=En("plus",iO);const sO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],oO=En("rotate-ccw",sO);const lO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cO=En("search",lO);const uO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rp=En("settings",uO);const hO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tw=En("trash-2",hO);const dO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fO=En("upload",dO);const gO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pO=En("user-plus",gO);const mO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yO=En("users",mO);const vO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nw=En("x",vO);function bO({columns:a,data:e,onEdit:n,onDelete:i,onInlineEdit:o,sortConfig:c,onSort:u}){const f=a.filter(S=>S.isVisible).sort((S,E)=>S.order-E.order),[m,y]=mt.useState(null);return Q.jsxs("div",{className:"relative overflow-hidden bg-[#1a1b1e]",children:[Q.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[75vh] custom-scrollbar border-t border-slate-800",children:Q.jsxs("table",{className:"w-full text-sm text-left text-slate-400 border-separate border-spacing-0",children:[Q.jsx("thead",{className:"sticky top-0 z-30",children:Q.jsxs("tr",{className:"bg-[#2b2d31]/90 backdrop-blur-xl",children:[f.map((S,E)=>{const O=E<2,R=c?.key===S.key;return Q.jsx("th",{onClick:()=>u(S.key),className:xr("px-6 py-5 font-bold text-slate-200 uppercase tracking-tighter border-b border-slate-800 cursor-pointer select-none transition-colors hover:bg-slate-800/50",O&&"sticky left-0 z-40 bg-[#2b2d31]/95 shadow-[1px_0_0_0_rgba(255,255,255,0.06)]",E===1&&"left-[80px]"),style:E===1?{left:"72px"}:{},children:Q.jsxs("div",{className:"flex items-center gap-2",children:[S.label,Q.jsxs("div",{className:"flex flex-col",children:[Q.jsx(qk,{className:xr("w-3 h-3 -mb-1",R&&c.direction==="asc"?"text-blue-500":"text-slate-600")}),Q.jsx(Bk,{className:xr("w-3 h-3",R&&c.direction==="desc"?"text-blue-500":"text-slate-600")})]})]})},S.id||S.key)}),Q.jsx("th",{className:"px-6 py-5 sticky right-0 z-40 bg-[#2b2d31]/95 backdrop-blur-md font-bold text-slate-200 border-b border-slate-800 shadow-[-1px_0_0_0_rgba(255,255,255,0.06)] text-center",children:""})]})}),Q.jsx("tbody",{className:"divide-y divide-slate-800/50",children:e.map(S=>Q.jsxs("tr",{className:"group hover:bg-blue-500/5 transition-all duration-200",children:[f.map((E,O)=>{const R=O<2,B=m?.id===S.id&&m?.key===E.key;return Q.jsx("td",{className:xr("px-6 py-4 whitespace-nowrap transition-colors",R&&"sticky left-0 z-20 bg-[#1a1b1e] group-hover:bg-[#1e2024] shadow-[1px_0_0_0_rgba(255,255,255,0.04)]",O===1&&"left-[80px]"),style:O===1?{left:"72px"}:{},onClick:()=>y({id:S.id,key:E.key}),children:B?Q.jsx("input",{autoFocus:!0,className:"w-full px-2 py-1 bg-[#2b2d31] border-2 border-blue-500 rounded outline-none shadow-sm text-slate-100",value:S[E.key]||"",onChange:V=>o(S.id,E.key,V.target.value),onBlur:()=>y(null),onKeyDown:V=>V.key==="Enter"&&y(null)}):Q.jsxs("div",{className:"flex items-center gap-2 group/cell",children:[Q.jsx("span",{className:xr("text-slate-300 font-medium",E.key==="Leader"&&S[E.key]&&"px-2 py-0.5 rounded-full bg-yellow-500/10 text-yellow-500 text-[10px] font-black",E.key==="Group"&&S[E.key]&&"px-2 py-0.5 rounded-full bg-indigo-500/10 text-indigo-400 text-[10px] font-black"),children:S[E.key]||"-"}),Q.jsx(b_,{className:"w-3 h-3 text-slate-600 opacity-0 group-hover/cell:opacity-100 transition-opacity"})]})},`${S.id}-${E.key}`)}),Q.jsx("td",{className:"px-6 py-4 sticky right-0 z-20 bg-[#1a1b1e] group-hover:bg-[#1e2024] transition-colors shadow-[-1px_0_0_0_rgba(255,255,255,0.04)]",children:Q.jsxs("div",{className:"flex items-center justify-center gap-4",children:[Q.jsx("button",{onClick:()=>n(S),className:"p-2 text-slate-500 hover:text-blue-400 hover:bg-blue-500/10 rounded-xl transition-all",title:"",children:Q.jsx(b_,{className:"w-4 h-4"})}),Q.jsx("button",{onClick:()=>S.id&&i(S.id),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-all",title:"",children:Q.jsx(tw,{className:"w-4 h-4"})})]})})]},S.id))})]})}),e.length===0&&Q.jsx("div",{className:"py-24 text-center bg-slate-900/10",children:Q.jsxs("div",{className:"inline-block p-6 bg-[#2b2d31] rounded-3xl shadow-sm border border-slate-800",children:[Q.jsx("p",{className:"text-xl font-black text-slate-200",children:""}),Q.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:"CSV"})]})})]})}var _O=E0();function rw({isOpen:a,onClose:e,title:n,children:i}){const o=mt.useRef(null);return mt.useEffect(()=>{const c=u=>{u.key==="Escape"&&e()};return a?(document.addEventListener("keydown",c),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[a,e]),a?_O.createPortal(Q.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm animate-in fade-in duration-200",children:Q.jsxs("div",{ref:o,className:"bg-[#1a1b1e] rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-slate-800 animate-in zoom-in-95 duration-200",children:[Q.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-800",children:[Q.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:n}),Q.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-slate-200 hover:bg-slate-800 rounded-lg transition-colors",children:Q.jsx(nw,{className:"w-5 h-5"})})]}),Q.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i})]})}),document.body):null}function wO({isOpen:a,onClose:e,onSubmit:n,columns:i,initialData:o}){const[c,u]=mt.useState({}),f=i;mt.useEffect(()=>{a&&u(o||{})},[a,o]);const m=y=>{y.preventDefault(),n(c),e()};return Q.jsx(rw,{isOpen:a,onClose:e,title:o?"":"",children:Q.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.map(y=>Q.jsxs("div",{className:"space-y-1",children:[Q.jsx("label",{className:"block text-sm font-medium text-slate-400",children:y.label}),Q.jsx("input",{type:y.type==="number"?"number":"text",className:"w-full px-3 py-2 bg-[#2b2d31] border border-slate-700 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-blue-600 outline-none transition-all text-slate-100 placeholder:text-slate-600",value:c[y.key]||"",onChange:S=>u({...c,[y.key]:S.target.value})})]},y.id)),Q.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 mt-6 pt-4 border-t border-slate-800",children:[Q.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-400 hover:bg-slate-800 rounded-lg font-medium transition-colors",children:""}),Q.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg shadow-blue-600/20",children:o?"":""})]})]})})}function SO({isOpen:a,onClose:e,columns:n,onAddColumn:i,onUpdateColumn:o,onToggleVisibility:c,onDeleteColumn:u}){const[f,m]=mt.useState(""),[y,S]=mt.useState(null),[E,O]=mt.useState(""),R=J=>{J.preventDefault(),f.trim()&&(i(f.trim()),m(""))},B=J=>{J.id&&(S(J.id),O(J.label))},V=J=>{o(J,{label:E}),S(null)};return Q.jsx(rw,{isOpen:a,onClose:e,title:"",children:Q.jsxs("div",{className:"space-y-8 p-1",children:[Q.jsxs("div",{className:"space-y-3",children:[Q.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:""}),Q.jsxs("form",{onSubmit:R,className:"flex gap-3",children:[Q.jsx("input",{type:"text",placeholder:" (: , ...)",className:"flex-1 px-4 py-3 bg-[#2b2d31] border-2 border-transparent rounded-xl focus:ring-4 focus:ring-blue-500/10 focus:border-blue-600 outline-none transition-all font-bold placeholder:text-slate-600 text-slate-100 shadow-inner",value:f,onChange:J=>m(J.target.value)}),Q.jsxs("button",{type:"submit",disabled:!f.trim(),className:"flex items-center gap-2 px-6 py-3 bg-slate-100 text-slate-900 rounded-xl hover:bg-white disabled:opacity-40 transition-all font-black shadow-lg shadow-slate-900/20 active:scale-95",children:[Q.jsx(aO,{className:"w-5 h-5"}),""]})]})]}),Q.jsxs("div",{className:"space-y-4",children:[Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:""}),Q.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 bg-slate-800 text-slate-400 rounded-full tracking-tighter",children:["TOTAL: ",n.length]})]}),Q.jsx("div",{className:"space-y-2 max-h-[450px] overflow-y-auto pr-3 custom-scrollbar",children:n.sort((J,ge)=>J.order-ge.order).map(J=>Q.jsxs("div",{className:"group flex items-center justify-between p-4 bg-[#1a1b1e] border-2 border-slate-800 rounded-2xl hover:border-blue-900/50 hover:shadow-xl transition-all duration-300",children:[Q.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Q.jsx("button",{onClick:()=>c(J),className:__("p-2 rounded-xl transition-all shadow-sm",J.isVisible?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-slate-800 text-slate-600 hover:bg-slate-700"),title:J.isVisible?"":"",children:J.isVisible?Q.jsx(Jk,{className:"w-5 h-5"}):Q.jsx(Yk,{className:"w-5 h-5"})}),y===J.id?Q.jsxs("div",{className:"flex items-center gap-2 flex-1 animate-in fade-in slide-in-from-left-2 duration-300",children:[Q.jsx("input",{autoFocus:!0,type:"text",className:"flex-1 px-3 py-1.5 bg-[#2b2d31] border-2 border-blue-500 rounded-lg outline-none font-black text-slate-100",value:E,onChange:ge=>O(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&V(J.id)}),Q.jsx("button",{onClick:()=>V(J.id),className:"p-1.5 text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",children:Q.jsx(zk,{className:"w-5 h-5"})}),Q.jsx("button",{onClick:()=>S(null),className:"p-1.5 text-slate-500 hover:bg-slate-800 rounded-lg transition-colors",children:Q.jsx(nw,{className:"w-5 h-5"})})]}):Q.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[Q.jsx("span",{className:__("font-black tracking-tight truncate",J.isVisible?"text-slate-200":"text-slate-600 italic"),children:J.label}),Q.jsx("button",{onClick:()=>B(J),className:"p-1.5 text-slate-600 opacity-0 group-hover:opacity-100 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-all",children:Q.jsx(rO,{className:"w-4 h-4"})})]})]}),Q.jsx("div",{className:"flex items-center gap-1 opacity-100 lg:opacity-0 group-hover:opacity-100 transition-opacity ml-4",children:Q.jsx("button",{onClick:()=>{J.id&&confirm(` "${J.label}" 
`)&&u(J.id)},className:"p-2 text-slate-600 hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-all",title:"",children:Q.jsx(tw,{className:"w-5 h-5"})})})]},J.id))})]}),Q.jsx("div",{className:"bg-blue-950/20 p-5 rounded-[1.5rem] border border-blue-900/30",children:Q.jsxs("p",{className:"text-[10px] text-blue-400 font-black uppercase tracking-widest text-center leading-relaxed",children:["",Q.jsx("br",{}),""]})})]})})}function __(...a){return a.filter(Boolean).join(" ")}var Mh={exports:{}};var CO=Mh.exports,w_;function EO(){return w_||(w_=1,(function(a,e){((n,i)=>{a.exports=i()})(CO,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,c=!i.document&&!!i.postMessage,u=i.IS_PAPA_WORKER||!1,f={},m=0,y={};function S(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(K){var fe=Ze(K);fe.chunkSize=parseInt(fe.chunkSize),K.step||K.chunk||(fe.chunkSize=null),this._handle=new V(fe),(this._handle.streamer=this)._config=fe}).call(this,I),this.parseChunk=function(K,fe){var Oe=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Oe){let Ce=this._config.newline;Ce||(ae=this._config.quoteChar||'"',Ce=this._handle.guessLineEndings(K,ae)),K=[...K.split(Ce).slice(Oe)].join(Ce)}this.isFirstChunk&&pe(this._config.beforeFirstChunk)&&(ae=this._config.beforeFirstChunk(K))!==void 0&&(K=ae),this.isFirstChunk=!1,this._halted=!1;var Oe=this._partialLine+K,ae=(this._partialLine="",this._handle.parse(Oe,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(K=ae.meta.cursor,Oe=(this._finished||(this._partialLine=Oe.substring(K-this._baseIndex),this._baseIndex=K),ae&&ae.data&&(this._rowCount+=ae.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)i.postMessage({results:ae,workerId:y.WORKER_ID,finished:Oe});else if(pe(this._config.chunk)&&!fe){if(this._config.chunk(ae,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ae=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ae.data),this._completeResults.errors=this._completeResults.errors.concat(ae.errors),this._completeResults.meta=ae.meta),this._completed||!Oe||!pe(this._config.complete)||ae&&ae.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Oe||ae&&ae.meta.paused||this._nextChunk(),ae}this._halted=!0},this._sendError=function(K){pe(this._config.error)?this._config.error(K):u&&this._config.error&&i.postMessage({workerId:y.WORKER_ID,error:K,finished:!1})}}function E(I){var K;(I=I||{}).chunkSize||(I.chunkSize=y.RemoteChunkSize),S.call(this,I),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(fe){this._input=fe,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(K=new XMLHttpRequest,this._config.withCredentials&&(K.withCredentials=this._config.withCredentials),c||(K.onload=xe(this._chunkLoaded,this),K.onerror=xe(this._chunkError,this)),K.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var fe,Oe=this._config.downloadRequestHeaders;for(fe in Oe)K.setRequestHeader(fe,Oe[fe])}var ae;this._config.chunkSize&&(ae=this._start+this._config.chunkSize-1,K.setRequestHeader("Range","bytes="+this._start+"-"+ae));try{K.send(this._config.downloadRequestBody)}catch(Ce){this._chunkError(Ce.message)}c&&K.status===0&&this._chunkError()}},this._chunkLoaded=function(){K.readyState===4&&(K.status<200||400<=K.status?this._chunkError():(this._start+=this._config.chunkSize||K.responseText.length,this._finished=!this._config.chunkSize||this._start>=(fe=>(fe=fe.getResponseHeader("Content-Range"))!==null?parseInt(fe.substring(fe.lastIndexOf("/")+1)):-1)(K),this.parseChunk(K.responseText)))},this._chunkError=function(fe){fe=K.statusText||fe,this._sendError(new Error(fe))}}function O(I){(I=I||{}).chunkSize||(I.chunkSize=y.LocalChunkSize),S.call(this,I);var K,fe,Oe=typeof FileReader<"u";this.stream=function(ae){this._input=ae,fe=ae.slice||ae.webkitSlice||ae.mozSlice,Oe?((K=new FileReader).onload=xe(this._chunkLoaded,this),K.onerror=xe(this._chunkError,this)):K=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ae=this._input,Ce=(this._config.chunkSize&&(Ce=Math.min(this._start+this._config.chunkSize,this._input.size),ae=fe.call(ae,this._start,Ce)),K.readAsText(ae,this._config.encoding));Oe||this._chunkLoaded({target:{result:Ce}})},this._chunkLoaded=function(ae){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ae.target.result)},this._chunkError=function(){this._sendError(K.error)}}function R(I){var K;S.call(this,I=I||{}),this.stream=function(fe){return K=fe,this._nextChunk()},this._nextChunk=function(){var fe,Oe;if(!this._finished)return fe=this._config.chunkSize,K=fe?(Oe=K.substring(0,fe),K.substring(fe)):(Oe=K,""),this._finished=!K,this.parseChunk(Oe)}}function B(I){S.call(this,I=I||{});var K=[],fe=!0,Oe=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ae){this._input=ae,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Oe&&K.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),K.length?this.parseChunk(K.shift()):fe=!0},this._streamData=xe(function(ae){try{K.push(typeof ae=="string"?ae:ae.toString(this._config.encoding)),fe&&(fe=!1,this._checkIsFinished(),this.parseChunk(K.shift()))}catch(Ce){this._streamError(Ce)}},this),this._streamError=xe(function(ae){this._streamCleanUp(),this._sendError(ae)},this),this._streamEnd=xe(function(){this._streamCleanUp(),Oe=!0,this._streamData("")},this),this._streamCleanUp=xe(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(I){var K,fe,Oe,ae,Ce=Math.pow(2,53),Ye=-Ce,Je=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,se=this,ie=0,we=0,Le=!1,x=!1,X=[],ne={data:[],errors:[],meta:{}};function ye(Ve){return I.skipEmptyLines==="greedy"?Ve.join("").trim()==="":Ve.length===1&&Ve[0].length===0}function Ue(){if(ne&&Oe&&(je("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),Oe=!1),I.skipEmptyLines&&(ne.data=ne.data.filter(function(qe){return!ye(qe)})),Ke()){let qe=function(qt,Tt){pe(I.transformHeader)&&(qt=I.transformHeader(qt,Tt)),X.push(qt)};var rt=qe;if(ne)if(Array.isArray(ne.data[0])){for(var Ve=0;Ke()&&Ve<ne.data.length;Ve++)ne.data[Ve].forEach(qe);ne.data.splice(0,1)}else ne.data.forEach(qe)}function Fe(qe,qt){for(var Tt=I.header?{}:[],ht=0;ht<qe.length;ht++){var lt=ht,gn=qe[ht],gn=((wt,Dt)=>(Gt=>(I.dynamicTypingFunction&&I.dynamicTyping[Gt]===void 0&&(I.dynamicTyping[Gt]=I.dynamicTypingFunction(Gt)),(I.dynamicTyping[Gt]||I.dynamicTyping)===!0))(wt)?Dt==="true"||Dt==="TRUE"||Dt!=="false"&&Dt!=="FALSE"&&((Gt=>{if(Je.test(Gt)&&(Gt=parseFloat(Gt),Ye<Gt&&Gt<Ce))return 1})(Dt)?parseFloat(Dt):$.test(Dt)?new Date(Dt):Dt===""?null:Dt):Dt)(lt=I.header?ht>=X.length?"__parsed_extra":X[ht]:lt,gn=I.transform?I.transform(gn,lt):gn);lt==="__parsed_extra"?(Tt[lt]=Tt[lt]||[],Tt[lt].push(gn)):Tt[lt]=gn}return I.header&&(ht>X.length?je("FieldMismatch","TooManyFields","Too many fields: expected "+X.length+" fields but parsed "+ht,we+qt):ht<X.length&&je("FieldMismatch","TooFewFields","Too few fields: expected "+X.length+" fields but parsed "+ht,we+qt)),Tt}var Ee;ne&&(I.header||I.dynamicTyping||I.transform)&&(Ee=1,!ne.data.length||Array.isArray(ne.data[0])?(ne.data=ne.data.map(Fe),Ee=ne.data.length):ne.data=Fe(ne.data,0),I.header&&ne.meta&&(ne.meta.fields=X),we+=Ee)}function Ke(){return I.header&&X.length===0}function je(Ve,Fe,Ee,rt){Ve={type:Ve,code:Fe,message:Ee},rt!==void 0&&(Ve.row=rt),ne.errors.push(Ve)}pe(I.step)&&(ae=I.step,I.step=function(Ve){ne=Ve,Ke()?Ue():(Ue(),ne.data.length!==0&&(ie+=Ve.data.length,I.preview&&ie>I.preview?fe.abort():(ne.data=ne.data[0],ae(ne,se))))}),this.parse=function(Ve,Fe,Ee){var rt=I.quoteChar||'"',rt=(I.newline||(I.newline=this.guessLineEndings(Ve,rt)),Oe=!1,I.delimiter?pe(I.delimiter)&&(I.delimiter=I.delimiter(Ve),ne.meta.delimiter=I.delimiter):((rt=((qe,qt,Tt,ht,lt)=>{var gn,wt,Dt,Gt;lt=lt||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var ln=0;ln<lt.length;ln++){for(var er,vr=lt[ln],At=0,Rn=0,St=0,Xt=(Dt=void 0,new ge({comments:ht,delimiter:vr,newline:qt,preview:10}).parse(qe)),xn=0;xn<Xt.data.length;xn++)Tt&&ye(Xt.data[xn])?St++:(er=Xt.data[xn].length,Rn+=er,Dt===void 0?Dt=er:0<er&&(At+=Math.abs(er-Dt),Dt=er));0<Xt.data.length&&(Rn/=Xt.data.length-St),(wt===void 0||At<=wt)&&(Gt===void 0||Gt<Rn)&&1.99<Rn&&(wt=At,gn=vr,Gt=Rn)}return{successful:!!(I.delimiter=gn),bestDelimiter:gn}})(Ve,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess)).successful?I.delimiter=rt.bestDelimiter:(Oe=!0,I.delimiter=y.DefaultDelimiter),ne.meta.delimiter=I.delimiter),Ze(I));return I.preview&&I.header&&rt.preview++,K=Ve,fe=new ge(rt),ne=fe.parse(K,Fe,Ee),Ue(),Le?{meta:{paused:!0}}:ne||{meta:{paused:!1}}},this.paused=function(){return Le},this.pause=function(){Le=!0,fe.abort(),K=pe(I.chunk)?"":K.substring(fe.getCharIndex())},this.resume=function(){se.streamer._halted?(Le=!1,se.streamer.parseChunk(K,!0)):setTimeout(se.resume,3)},this.aborted=function(){return x},this.abort=function(){x=!0,fe.abort(),ne.meta.aborted=!0,pe(I.complete)&&I.complete(ne),K=""},this.guessLineEndings=function(qe,rt){qe=qe.substring(0,1048576);var rt=new RegExp(J(rt)+"([^]*?)"+J(rt),"gm"),Ee=(qe=qe.replace(rt,"")).split("\r"),rt=qe.split(`
`),qe=1<rt.length&&rt[0].length<Ee[0].length;if(Ee.length===1||qe)return`
`;for(var qt=0,Tt=0;Tt<Ee.length;Tt++)Ee[Tt][0]===`
`&&qt++;return qt>=Ee.length/2?`\r
`:"\r"}}function J(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ge(I){var K=(I=I||{}).delimiter,fe=I.newline,Oe=I.comments,ae=I.step,Ce=I.preview,Ye=I.fastMode,Je=null,$=!1,se=I.quoteChar==null?'"':I.quoteChar,ie=se;if(I.escapeChar!==void 0&&(ie=I.escapeChar),(typeof K!="string"||-1<y.BAD_DELIMITERS.indexOf(K))&&(K=","),Oe===K)throw new Error("Comment character same as delimiter");Oe===!0?Oe="#":(typeof Oe!="string"||-1<y.BAD_DELIMITERS.indexOf(Oe))&&(Oe=!1),fe!==`
`&&fe!=="\r"&&fe!==`\r
`&&(fe=`
`);var we=0,Le=!1;this.parse=function(x,X,ne){if(typeof x!="string")throw new Error("Input must be a string");var ye=x.length,Ue=K.length,Ke=fe.length,je=Oe.length,Ve=pe(ae),Fe=[],Ee=[],rt=[],qe=we=0;if(!x)return At();if(Ye||Ye!==!1&&x.indexOf(se)===-1){for(var qt=x.split(fe),Tt=0;Tt<qt.length;Tt++){if(rt=qt[Tt],we+=rt.length,Tt!==qt.length-1)we+=fe.length;else if(ne)return At();if(!Oe||rt.substring(0,je)!==Oe){if(Ve){if(Fe=[],Gt(rt.split(K)),Rn(),Le)return At()}else Gt(rt.split(K));if(Ce&&Ce<=Tt)return Fe=Fe.slice(0,Ce),At(!0)}}return At()}for(var ht=x.indexOf(K,we),lt=x.indexOf(fe,we),gn=new RegExp(J(ie)+J(se),"g"),wt=x.indexOf(se,we);;)if(x[we]===se)for(wt=we,we++;;){if((wt=x.indexOf(se,wt+1))===-1)return ne||Ee.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Fe.length,index:we}),er();if(wt===ye-1)return er(x.substring(we,wt).replace(gn,se));if(se===ie&&x[wt+1]===ie)wt++;else if(se===ie||wt===0||x[wt-1]!==ie){ht!==-1&&ht<wt+1&&(ht=x.indexOf(K,wt+1));var Dt=ln((lt=lt!==-1&&lt<wt+1?x.indexOf(fe,wt+1):lt)===-1?ht:Math.min(ht,lt));if(x.substr(wt+1+Dt,Ue)===K){rt.push(x.substring(we,wt).replace(gn,se)),x[we=wt+1+Dt+Ue]!==se&&(wt=x.indexOf(se,we)),ht=x.indexOf(K,we),lt=x.indexOf(fe,we);break}if(Dt=ln(lt),x.substring(wt+1+Dt,wt+1+Dt+Ke)===fe){if(rt.push(x.substring(we,wt).replace(gn,se)),vr(wt+1+Dt+Ke),ht=x.indexOf(K,we),wt=x.indexOf(se,we),Ve&&(Rn(),Le))return At();if(Ce&&Fe.length>=Ce)return At(!0);break}Ee.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Fe.length,index:we}),wt++}}else if(Oe&&rt.length===0&&x.substring(we,we+je)===Oe){if(lt===-1)return At();we=lt+Ke,lt=x.indexOf(fe,we),ht=x.indexOf(K,we)}else if(ht!==-1&&(ht<lt||lt===-1))rt.push(x.substring(we,ht)),we=ht+Ue,ht=x.indexOf(K,we);else{if(lt===-1)break;if(rt.push(x.substring(we,lt)),vr(lt+Ke),Ve&&(Rn(),Le))return At();if(Ce&&Fe.length>=Ce)return At(!0)}return er();function Gt(St){Fe.push(St),qe=we}function ln(St){var Xt=0;return Xt=St!==-1&&(St=x.substring(wt+1,St))&&St.trim()===""?St.length:Xt}function er(St){return ne||(St===void 0&&(St=x.substring(we)),rt.push(St),we=ye,Gt(rt),Ve&&Rn()),At()}function vr(St){we=St,Gt(rt),rt=[],lt=x.indexOf(fe,we)}function At(St){if(I.header&&!X&&Fe.length&&!$){var Xt=Fe[0],xn=Object.create(null),Qr=new Set(Xt);let xi=!1;for(let br=0;br<Xt.length;br++){let pn=Xt[br];if(xn[pn=pe(I.transformHeader)?I.transformHeader(pn,br):pn]){let $n,mn=xn[pn];for(;$n=pn+"_"+mn,mn++,Qr.has($n););Qr.add($n),Xt[br]=$n,xn[pn]++,xi=!0,(Je=Je===null?{}:Je)[$n]=pn}else xn[pn]=1,Xt[br]=pn;Qr.add(pn)}xi&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:Fe,errors:Ee,meta:{delimiter:K,linebreak:fe,aborted:Le,truncated:!!St,cursor:qe+(X||0),renamedHeaders:Je}}}function Rn(){ae(At()),Fe=[],Ee=[]}},this.abort=function(){Le=!0},this.getCharIndex=function(){return we}}function me(I){var K=I.data,fe=f[K.workerId],Oe=!1;if(K.error)fe.userError(K.error,K.file);else if(K.results&&K.results.data){var ae={abort:function(){Oe=!0,ce(K.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ke,resume:ke};if(pe(fe.userStep)){for(var Ce=0;Ce<K.results.data.length&&(fe.userStep({data:K.results.data[Ce],errors:K.results.errors,meta:K.results.meta},ae),!Oe);Ce++);delete K.results}else pe(fe.userChunk)&&(fe.userChunk(K.results,ae,K.file),delete K.results)}K.finished&&!Oe&&ce(K.workerId,K.results)}function ce(I,K){var fe=f[I];pe(fe.userComplete)&&fe.userComplete(K),fe.terminate(),delete f[I]}function ke(){throw new Error("Not implemented.")}function Ze(I){if(typeof I!="object"||I===null)return I;var K,fe=Array.isArray(I)?[]:{};for(K in I)fe[K]=Ze(I[K]);return fe}function xe(I,K){return function(){I.apply(K,arguments)}}function pe(I){return typeof I=="function"}return y.parse=function(I,K){var fe=(K=K||{}).dynamicTyping||!1;if(pe(fe)&&(K.dynamicTypingFunction=fe,fe={}),K.dynamicTyping=fe,K.transform=!!pe(K.transform)&&K.transform,!K.worker||!y.WORKERS_SUPPORTED)return fe=null,y.NODE_STREAM_INPUT,typeof I=="string"?(I=(Oe=>Oe.charCodeAt(0)!==65279?Oe:Oe.slice(1))(I),fe=new(K.download?E:R)(K)):I.readable===!0&&pe(I.read)&&pe(I.on)?fe=new B(K):(i.File&&I instanceof File||I instanceof Object)&&(fe=new O(K)),fe.stream(I);(fe=(()=>{var Oe;return!!y.WORKERS_SUPPORTED&&(Oe=(()=>{var ae=i.URL||i.webkitURL||null,Ce=n.toString();return y.BLOB_URL||(y.BLOB_URL=ae.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ce,")();"],{type:"text/javascript"})))})(),(Oe=new i.Worker(Oe)).onmessage=me,Oe.id=m++,f[Oe.id]=Oe)})()).userStep=K.step,fe.userChunk=K.chunk,fe.userComplete=K.complete,fe.userError=K.error,K.step=pe(K.step),K.chunk=pe(K.chunk),K.complete=pe(K.complete),K.error=pe(K.error),delete K.worker,fe.postMessage({input:I,config:K,workerId:fe.id})},y.unparse=function(I,K){var fe=!1,Oe=!0,ae=",",Ce=`\r
`,Ye='"',Je=Ye+Ye,$=!1,se=null,ie=!1,we=((()=>{if(typeof K=="object"){if(typeof K.delimiter!="string"||y.BAD_DELIMITERS.filter(function(X){return K.delimiter.indexOf(X)!==-1}).length||(ae=K.delimiter),typeof K.quotes!="boolean"&&typeof K.quotes!="function"&&!Array.isArray(K.quotes)||(fe=K.quotes),typeof K.skipEmptyLines!="boolean"&&typeof K.skipEmptyLines!="string"||($=K.skipEmptyLines),typeof K.newline=="string"&&(Ce=K.newline),typeof K.quoteChar=="string"&&(Ye=K.quoteChar),typeof K.header=="boolean"&&(Oe=K.header),Array.isArray(K.columns)){if(K.columns.length===0)throw new Error("Option columns is empty");se=K.columns}K.escapeChar!==void 0&&(Je=K.escapeChar+Ye),K.escapeFormulae instanceof RegExp?ie=K.escapeFormulae:typeof K.escapeFormulae=="boolean"&&K.escapeFormulae&&(ie=/^[=+\-@\t\r].*$/)}})(),new RegExp(J(Ye),"g"));if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return Le(null,I,$);if(typeof I[0]=="object")return Le(se||Object.keys(I[0]),I,$)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||se),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),Le(I.fields||[],I.data||[],$);throw new Error("Unable to serialize unrecognized input");function Le(X,ne,ye){var Ue="",Ke=(typeof X=="string"&&(X=JSON.parse(X)),typeof ne=="string"&&(ne=JSON.parse(ne)),Array.isArray(X)&&0<X.length),je=!Array.isArray(ne[0]);if(Ke&&Oe){for(var Ve=0;Ve<X.length;Ve++)0<Ve&&(Ue+=ae),Ue+=x(X[Ve],Ve);0<ne.length&&(Ue+=Ce)}for(var Fe=0;Fe<ne.length;Fe++){var Ee=(Ke?X:ne[Fe]).length,rt=!1,qe=Ke?Object.keys(ne[Fe]).length===0:ne[Fe].length===0;if(ye&&!Ke&&(rt=ye==="greedy"?ne[Fe].join("").trim()==="":ne[Fe].length===1&&ne[Fe][0].length===0),ye==="greedy"&&Ke){for(var qt=[],Tt=0;Tt<Ee;Tt++){var ht=je?X[Tt]:Tt;qt.push(ne[Fe][ht])}rt=qt.join("").trim()===""}if(!rt){for(var lt=0;lt<Ee;lt++){0<lt&&!qe&&(Ue+=ae);var gn=Ke&&je?X[lt]:lt;Ue+=x(ne[Fe][gn],lt)}Fe<ne.length-1&&(!ye||0<Ee&&!qe)&&(Ue+=Ce)}}return Ue}function x(X,ne){var ye,Ue;return X==null?"":X.constructor===Date?JSON.stringify(X).slice(1,25):(Ue=!1,ie&&typeof X=="string"&&ie.test(X)&&(X="'"+X,Ue=!0),ye=X.toString().replace(we,Je),(Ue=Ue||fe===!0||typeof fe=="function"&&fe(X,ne)||Array.isArray(fe)&&fe[ne]||((Ke,je)=>{for(var Ve=0;Ve<je.length;Ve++)if(-1<Ke.indexOf(je[Ve]))return!0;return!1})(ye,y.BAD_DELIMITERS)||-1<ye.indexOf(ae)||ye.charAt(0)===" "||ye.charAt(ye.length-1)===" ")?Ye+ye+Ye:ye)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!c&&!!i.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=ge,y.ParserHandle=V,y.NetworkStreamer=E,y.FileStreamer=O,y.StringStreamer=R,y.ReadableStreamStreamer=B,i.jQuery&&((o=i.jQuery).fn.parse=function(I){var K=I.config||{},fe=[];return this.each(function(Ce){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Ye=0;Ye<this.files.length;Ye++)fe.push({file:this.files[Ye],inputElem:this,instanceConfig:o.extend({},K)})}),Oe(),this;function Oe(){if(fe.length===0)pe(I.complete)&&I.complete();else{var Ce,Ye,Je,$,se=fe[0];if(pe(I.before)){var ie=I.before(se.file,se.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return Ce="AbortError",Ye=se.file,Je=se.inputElem,$=ie.reason,void(pe(I.error)&&I.error({name:Ce},Ye,Je,$));if(ie.action==="skip")return void ae();typeof ie.config=="object"&&(se.instanceConfig=o.extend(se.instanceConfig,ie.config))}else if(ie==="skip")return void ae()}var we=se.instanceConfig.complete;se.instanceConfig.complete=function(Le){pe(we)&&we(Le,se.file,se.inputElem),ae()},y.parse(se.file,se.instanceConfig)}}function ae(){fe.splice(0,1),Oe()}}),u&&(i.onmessage=function(I){I=I.data,y.WORKER_ID===void 0&&I&&(y.WORKER_ID=I.workerId),typeof I.input=="string"?i.postMessage({workerId:y.WORKER_ID,results:y.parse(I.input,I.config),finished:!0}):(i.File&&I.input instanceof File||I.input instanceof Object)&&(I=y.parse(I.input,I.config))&&i.postMessage({workerId:y.WORKER_ID,results:I,finished:!0})}),(E.prototype=Object.create(S.prototype)).constructor=E,(O.prototype=Object.create(S.prototype)).constructor=O,(R.prototype=Object.create(R.prototype)).constructor=R,(B.prototype=Object.create(S.prototype)).constructor=B,y})})(Mh)),Mh.exports}var TO=EO();const S_=wp(TO);function Pg(a){if(!a)return"";const e=new Date(a);if(isNaN(e.getTime()))return"";const n=new Date;let i=n.getFullYear()-e.getFullYear(),o=n.getMonth()-e.getMonth();return o<0&&(i--,o+=12),i<0?"":i===0?`${o}`:o===0?`${i}`:`${i}${o}`}function AO(){const[a,e]=mt.useState([]),[n,i]=mt.useState([]),[o,c]=mt.useState(!0),[u,f]=mt.useState(!1),[m,y]=mt.useState(!1),[S,E]=mt.useState(null),[O,R]=mt.useState(""),[B,V]=mt.useState(null),J=async()=>{c(!0);try{const{data:ae,error:Ce}=await On.from("directory_columns").select("*").order("order"),{data:Ye,error:Je}=await On.from("directory_employees").select("*");if(Ce||Je){console.error("Error fetching data:",Ce,Je);return}ae&&e(ae.map($=>({id:$.id,key:$.key,label:$.label,type:$.type,order:$.order,isVisible:$.is_visible}))),Ye&&i(Ye.map($=>({id:$.id,...$.data})))}finally{c(!1)}};mt.useEffect(()=>{J();const ae=On.channel("directory_changes").on("postgres_changes",{event:"*",schema:"public",table:"directory_employees"},J).on("postgres_changes",{event:"*",schema:"public",table:"directory_columns"},J).subscribe();return()=>{ae.unsubscribe()}},[]);const ge=ae=>{const Ce=ae.target.files?.[0];Ce&&(S_.parse(Ce,{header:!0,skipEmptyLines:!0,complete:async Ye=>{const Je=Ye.meta.fields||[],$=Array.from(new Set(Je));if($.length===0){alert("CSV");return}if(confirm("CSV")){c(!0),await On.from("directory_columns").delete().neq("id",0),await On.from("directory_employees").delete().neq("id",0);const{error:se}=await On.from("directory_columns").insert($.map((Le,x)=>({key:Le,label:Le,type:"text",order:x,is_visible:!0})));if(se){alert(": "+se.message),c(!1);return}const ie=Ye.data.map(Le=>{const x={...Le};return x["joining date"]&&(!x["Length of service"]||x["Length of service"]==="-")&&(x["Length of service"]=Pg(x["joining date"])),{data:x}}),{error:we}=await On.from("directory_employees").insert(ie);we&&alert(": "+we.message),c(!1),J()}}}),ae.target.value="")},me=async()=>{confirm("")&&(c(!0),await On.from("directory_columns").delete().neq("id",0),await On.from("directory_employees").delete().neq("id",0),c(!1),J())},ce=async ae=>{const Ce={...ae};if(Ce["joining date"]&&(Ce["Length of service"]=Pg(Ce["joining date"])),S){const{id:Ye,...Je}=Ce;await On.from("directory_employees").update({data:Je}).eq("id",S.id)}else await On.from("directory_employees").insert([{data:Ce}]);E(null),J()},ke=async ae=>{confirm("")&&(await On.from("directory_employees").delete().eq("id",ae),J())},Ze=async(ae,Ce,Ye)=>{const Je=n.find(we=>we.id===ae);if(!Je)return;const{id:$,...se}=Je,ie={...se,[Ce]:Ye};Ce==="joining date"&&(ie["Length of service"]=Pg(Ye)),await On.from("directory_employees").update({data:ie}).eq("id",ae),i(we=>we.map(Le=>Le.id===ae?{id:ae,...ie}:Le))},xe=async ae=>{const Ce=a.length;await On.from("directory_columns").insert([{key:ae,label:ae,type:"text",is_visible:!0,order:Ce}]),J()},pe=async(ae,Ce)=>{const Ye={};Ce.label!==void 0&&(Ye.label=Ce.label),Ce.isVisible!==void 0&&(Ye.is_visible=Ce.isVisible),Ce.order!==void 0&&(Ye.order=Ce.order),await On.from("directory_columns").update(Ye).eq("id",ae),J()},I=async ae=>{ae.id&&(await On.from("directory_columns").update({is_visible:!ae.isVisible}).eq("id",ae.id),J())},K=async ae=>{await On.from("directory_columns").delete().eq("id",ae),J()},fe=()=>{if(n.length===0||a.length===0)return;const ae=a.filter(ie=>ie.isVisible).sort((ie,we)=>ie.order-we.order),Ce=n.map(ie=>{const we={};return ae.forEach(Le=>{we[Le.label]=ie[Le.key]||""}),we}),Ye=S_.unparse(Ce),Je=new Blob(["\uFEFF"+Ye],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(Je),se=document.createElement("a");se.href=$,se.download=`Employee_Directory_Cloud_${new Date().toISOString().split("T")[0]}.csv`,se.click()},Oe=mt.useMemo(()=>{if(!n)return[];let ae=[...n];if(O){const Ce=O.toLowerCase();ae=ae.filter(Ye=>Object.values(Ye).some(Je=>String(Je).toLowerCase().includes(Ce)))}return B&&ae.sort((Ce,Ye)=>{const Je=Ce[B.key]||"",$=Ye[B.key]||"";return typeof Je=="string"&&typeof $=="string"?B.direction==="asc"?Je.localeCompare($,"ja"):$.localeCompare(Je,"ja"):Je<$?B.direction==="asc"?-1:1:Je>$?B.direction==="asc"?1:-1:0}),ae},[n,O,B]);return o?Q.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400 font-bold animate-pulse",children:[Q.jsx(v_,{className:"w-12 h-12 mb-4"}),"..."]}):Q.jsxs("div",{translate:"no",className:"flex flex-col gap-6 animate-in fade-in duration-500",children:[Q.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 bg-[#1a1b1e] p-8 rounded-[2.5rem] shadow-xl border border-slate-800 relative overflow-hidden",children:[Q.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full -mr-16 -mt-16 pointer-events-none"}),Q.jsxs("div",{className:"flex items-center gap-6 z-10",children:[Q.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-2xl shadow-lg shadow-blue-500/20",children:Q.jsx(v_,{className:"w-8 h-8"})}),Q.jsxs("div",{children:[Q.jsx("h2",{className:"text-3xl font-black tracking-tighter text-slate-100",children:"Cloud Directory"}),Q.jsxs("p",{className:"text-slate-500 font-bold text-xs mt-1 uppercase tracking-widest flex items-center gap-2",children:[Q.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Synchronized with Supabase"]})]})]}),Q.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3 flex-1 max-w-4xl justify-end z-10",children:[Q.jsxs("div",{className:"relative flex-1 group w-full",children:[Q.jsx(cO,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-600 group-focus-within:text-blue-500 transition-colors"}),Q.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-12 pr-4 py-3 bg-[#2b2d31] border-2 border-transparent rounded-2xl focus:border-blue-500 focus:bg-[#2b2d31] outline-none font-bold transition-all placeholder:text-slate-600 text-slate-200",value:O,onChange:ae=>R(ae.target.value)})]}),Q.jsxs("div",{className:"flex items-center gap-2",children:[Q.jsx("button",{onClick:fe,className:"p-3 bg-[#2b2d31] border-2 border-transparent text-slate-400 hover:text-emerald-400 hover:border-emerald-900/30 rounded-2xl transition-all shadow-sm",title:"CSV",children:Q.jsx($k,{className:"w-5 h-5"})}),Q.jsxs("div",{className:"relative",children:[Q.jsx("input",{type:"file",accept:".csv",className:"hidden",id:"csv-import",onChange:ge}),Q.jsxs("label",{htmlFor:"csv-import",className:"flex items-center gap-2 px-5 py-3 bg-emerald-600 text-white rounded-2xl hover:bg-emerald-700 font-black cursor-pointer shadow-lg shadow-emerald-600/10 text-sm active:scale-95",children:[Q.jsx(fO,{className:"w-4 h-4"}),""]})]}),Q.jsx("button",{onClick:()=>y(!0),className:"p-3 bg-[#2b2d31] border-2 border-transparent text-slate-400 hover:text-blue-400 hover:border-blue-900/30 rounded-2xl transition-all shadow-sm",title:"",children:Q.jsx(rp,{className:"w-5 h-5"})}),Q.jsxs("button",{onClick:()=>{E(null),f(!0)},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-2xl shadow-lg shadow-blue-500/20 hover:bg-blue-700 font-black transition-all transform active:scale-95 text-sm",children:[Q.jsx(pO,{className:"w-4 h-4"}),""]}),Q.jsx("button",{onClick:me,className:"p-3 bg-red-950/30 text-red-400 hover:bg-red-900/50 hover:text-red-300 rounded-2xl transition-all",title:"",children:Q.jsx(oO,{className:"w-5 h-5"})})]})]})]}),Q.jsx("div",{className:"bg-[#1a1b1e] rounded-[2rem] shadow-2xl border border-slate-800 overflow-hidden",children:Q.jsx(bO,{columns:a,data:Oe,onEdit:ae=>{E(ae),f(!0)},onDelete:ke,onInlineEdit:Ze,sortConfig:B,onSort:ae=>{V(Ce=>Ce?.key===ae?Ce.direction==="asc"?{key:ae,direction:"desc"}:null:{key:ae,direction:"asc"})}})}),Q.jsx(wO,{isOpen:u,onClose:()=>{f(!1),E(null)},onSubmit:ce,columns:a,initialData:S}),Q.jsx(SO,{isOpen:m,onClose:()=>y(!1),columns:a,onAddColumn:xe,onUpdateColumn:pe,onToggleVisibility:I,onDeleteColumn:K})]})}function kO(){const[a,e]=mt.useState("directory"),[n,i]=mt.useState("all"),[o,c]=mt.useState([{id:"all",name:"ALL Teams",icon:""}]),u=async()=>{console.log("Fetching teams...");const{data:S,error:E}=await On.from("teams").select("*").order("created_at");if(E){console.error("Error fetching teams:",E);return}S?(console.log("Teams fetched:",S),c([{id:"all",name:"ALL Teams",icon:""},...S.map(R=>({id:R.id,name:R.name,icon:R.icon||""}))])):console.log("No teams found")};mt.useEffect(()=>{u();const S=On.channel("teams_changes").on("postgres_changes",{event:"*",schema:"public",table:"teams"},u).subscribe();return()=>{S.unsubscribe()}},[]),mt.useEffect(()=>{if(n==="all")return},[n]),mt.useEffect(()=>{Pc.columns.count().then(S=>{S===0&&fE()})},[]);const m=[...[{id:"directory",label:"Employee List",icon:yO},{id:"settings",label:"Settings",icon:rp}]],y=S=>{o.some(E=>E.id===S),e(S)};return Q.jsxs("div",{className:"min-h-screen bg-[#11100F] flex",children:[Q.jsx(rT,{items:m,activeItemId:a==="teams"?n:a,onItemClick:y,width:72,showLabels:"hover",logo:{icon:Wk,title:"Prograde",subtitle:"Nova Dashboard"},footer:Q.jsxs("div",{children:[Q.jsxs("div",{className:"bg-[#2B2D31] p-2 rounded-xl flex items-center gap-3 overflow-hidden transition-all duration-300 group-hover:p-4 group-hover:rounded-[1.5rem] border border-slate-800",children:[Q.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 text-white flex items-center justify-center font-black text-sm flex-shrink-0",children:"KU"}),Q.jsxs("div",{className:"flex-1 min-w-0 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[Q.jsx("div",{className:"font-black text-slate-200 text-xs truncate",children:"K. Ueda"}),Q.jsx("div",{className:"text-[10px] font-bold text-slate-500 truncate",children:"Administrator"})]})]}),Q.jsxs("button",{className:"w-full mt-4 flex items-center justify-center gap-2 text-slate-400 hover:text-red-500 font-black text-xs transition-colors p-2 overflow-hidden",children:[Q.jsx(eO,{className:"w-4 h-4 flex-shrink-0"}),Q.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Sign Out"})]})]})}),Q.jsx("main",{className:"flex-1 ml-[72px] p-10",children:Q.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[a==="directory"&&Q.jsx(AO,{}),a==="settings"&&Q.jsxs("div",{className:"flex flex-col items-center justify-center py-40 text-slate-300",children:[Q.jsx(rp,{className:"w-16 h-16 mb-4 animate-[spin_8s_linear_infinite]"}),Q.jsx("h2",{className:"text-2xl font-black tracking-tighter",children:"System Settings"}),Q.jsx("p",{className:"font-bold text-sm mt-2 uppercase tracking-widest text-slate-400",children:"Under Construction"})]})]})})]})}class OO extends mt.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?Q.jsxs("div",{className:"p-8 max-w-2xl mx-auto mt-10 bg-red-50 border border-red-200 rounded-lg",children:[Q.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Something went wrong"}),Q.jsx("pre",{className:"text-sm bg-white p-4 rounded border border-red-100 overflow-auto text-red-600 font-mono",children:this.state.error?.message}),Q.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-medium",children:"Reload Page"})]}):this.props.children}}const RO="msal.js.common",iw="https://login.microsoftonline.com/common/",xO="login.microsoftonline.com",aw="common",IO="adfs",NO="dstsv2",DO=`${iw}discovery/instance?api-version=1.1&authorization_endpoint=`,C_=".ciamlogin.com",UO=".onmicrosoft.com",ip="|",sw="openid",ow="profile",Ap="offline_access",MO="email",kp="S256",PO="application/x-www-form-urlencoded;charset=utf-8",Dc="Not Available",ap="/",E_="http://169.254.169.254/metadata/instance/compute/location",jO="2020-06-01",LO=2e3,zO="TryAutoDetect",HO="login.microsoft.com",BO=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],T_=240,KO="invalid_instance",A_=200,qO=400,k_=400,GO=499,FO=500,$O=599,fl={GET:"GET",POST:"POST"},Tl=[sw,ow,Ap],O_=[...Tl,MO],sr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},R_={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},rs={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},kh={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},pr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Op={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Rp={QUERY:"query",FRAGMENT:"fragment"},lw={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},VO="MSSTS",YO="ADFS",cw="Generic",uw="-",sp=".",Gn={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},xp="appmetadata",QO="client_info",$h="1",op="authority-metadata",JO=3600*24,ni={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},x_=5,XO=330,WO=50,hw="server-telemetry",I_="|",il=",",ZO="1",eR="0",tR="unknown_error",jt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},nR=60,rR=3600,dw="throttling",iR="retry-after, h429",aR="invalid_grant",sR="client_mismatch",al={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},jg={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ks={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},oR={Pop:"pop"},fw=300;const Js="client_id",gw="redirect_uri",lR="response_type",cR="response_mode",uR="grant_type",hR="claims",dR="scope",fR="refresh_token",gR="state",pR="nonce",mR="prompt",yR="code",vR="code_challenge",bR="code_challenge_method",_R="code_verifier",wR="client-request-id",SR="x-client-SKU",CR="x-client-VER",ER="x-client-OS",TR="x-client-CPU",AR="x-client-current-telemetry",kR="x-client-last-telemetry",OR="x-ms-lib-capability",RR="x-app-name",xR="x-app-ver",IR="post_logout_redirect_uri",NR="id_token_hint",DR="client_secret",UR="client_assertion",MR="client_assertion_type",pw="token_type",mw="req_cnf",N_="return_spa_code",PR="nativebroker",jR="logout_hint",LR="sid",zR="login_hint",HR="domain_hint",BR="x-client-xtra-sku",Vh="brk_client_id",Yh="brk_redirect_uri",lp="instance_aware",KR="ear_jwk",qR="ear_jwe_crypto";function Ip(a){return`See https://aka.ms/msal.js.errors#${a} for details`}class Vt extends Error{constructor(e,n,i){const o=n||(e?Ip(e):""),c=o?`${e}: ${o}`:e;super(c),Object.setPrototypeOf(this,Vt.prototype),this.errorCode=e||"",this.errorMessage=o||"",this.subError=i||"",this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function cp(a,e){return new Vt(a,e||Ip(a))}class Np extends Vt{constructor(e){super(e),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Np.prototype)}}function Jt(a){return new Np(a)}class Vr{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},i=e.split("&"),o=c=>decodeURIComponent(c.replace(/\+/g," "));return i.forEach(c=>{if(c.trim()){const[u,f]=c.split(/=(.+)/g,2);u&&f&&(n[o(u)]=o(f))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}class Dp extends Vt{constructor(e,n){super(e,n),this.name="ClientAuthError",Object.setPrototypeOf(this,Dp.prototype)}}function Se(a,e){return new Dp(a,e)}const GR="redirect_uri_empty",FR="authority_uri_insecure",Oh="url_parse_error",$R="empty_url_error",VR="empty_input_scopes_error",yw="invalid_claims",YR="token_request_empty",QR="logout_request_empty",vw="pkce_params_missing",bw="invalid_cloud_discovery_metadata",JR="invalid_authority_metadata",XR="untrusted_authority",Up="missing_ssh_jwk",WR="missing_ssh_kid",ZR="cannot_set_OIDCOptions",e1="cannot_allow_platform_broker",t1="authority_mismatch",n1="invalid_request_method_for_EAR";const _w="client_info_decoding_error",r1="client_info_empty_error",ww="token_parsing_error",i1="null_or_empty_token",Ja="endpoints_resolution_error",a1="network_error",s1="openid_config_error",o1="hash_not_deserialized",Jc="invalid_state",l1="state_mismatch",D_="state_not_found",c1="nonce_mismatch",Sw="auth_time_not_found",u1="max_age_transpired",h1="multiple_matching_appMetadata",d1="request_cannot_be_made",f1="cannot_remove_empty_scope",g1="cannot_append_scopeset",U_="empty_input_scopeset",Cw="no_account_in_silent_request",p1="invalid_cache_record",Ew="invalid_cache_environment",M_="no_account_found",Tw="no_crypto_object",Vs="token_refresh_required",m1="token_claims_cnf_required_for_signedjwt",y1="authorization_code_missing_from_server_response",v1="binding_key_not_removed",b1="end_session_endpoint_not_supported",Aw="key_id_missing",pt="method_not_implemented";class Zn{constructor(e){const n=e?Vr.trimArrayEntries([...e]):[],i=n?Vr.removeEmptyStringsFromArray(n):[];if(!i||!i.length)throw Jt(VR);this.scopes=new Set,i.forEach(o=>this.scopes.add(o))}static fromString(e){const i=(e||"").split(" ");return new Zn(i)}static createSearchScopes(e){const n=e&&e.length>0?e:[...Tl],i=new Zn(n);return i.containsOnlyOIDCScopes()?i.removeScope(Ap):i.removeOIDCScopes(),i}containsScope(e){const n=this.printScopesLowerCase().split(" "),i=new Zn(n);return e?i.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return O_.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw Se(g1)}}removeScope(e){if(!e)throw Se(f1);this.scopes.delete(e.trim())}removeOIDCScopes(){O_.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Se(U_);const n=new Set;return e.scopes.forEach(i=>n.add(i.toLowerCase())),this.scopes.forEach(i=>n.add(i.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw Se(U_);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),i=e.getScopeCount(),o=this.getScopeCount();return n.size<o+i}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function fd(a,e,n){if(!e)return;const i=a.get(Js);i&&a.has(Vh)&&n?.addFields({embeddedClientId:i,embeddedRedirectUri:a.get(gw)},e)}function Mp(a,e){a.set(lR,e)}function _1(a,e){a.set(cR,e||Rp.QUERY)}function w1(a){a.set(PR,"1")}function Pp(a,e,n=!0,i=Tl){n&&!i.includes("openid")&&!e.includes("openid")&&i.push("openid");const o=n?[...e||[],...i]:e||[],c=new Zn(o);a.set(dR,c.printScopes())}function jp(a,e){a.set(Js,e)}function Lp(a,e){a.set(gw,e)}function S1(a,e){a.set(IR,e)}function C1(a,e){a.set(NR,e)}function E1(a,e){a.set(HR,e)}function Rh(a,e){a.set(zR,e)}function Qh(a,e){a.set(sr.CCS_HEADER,`UPN:${e}`)}function Bc(a,e){a.set(sr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function P_(a,e){a.set(LR,e)}function zp(a,e,n){const i=x1(e,n);try{JSON.parse(i)}catch{throw Jt(yw)}a.set(hR,i)}function Hp(a,e){a.set(wR,e)}function Bp(a,e){a.set(SR,e.sku),a.set(CR,e.version),e.os&&a.set(ER,e.os),e.cpu&&a.set(TR,e.cpu)}function Kp(a,e){e?.appName&&a.set(RR,e.appName),e?.appVersion&&a.set(xR,e.appVersion)}function T1(a,e){a.set(mR,e)}function kw(a,e){e&&a.set(gR,e)}function A1(a,e){a.set(pR,e)}function qp(a,e,n){if(e&&n)a.set(vR,e),a.set(bR,n);else throw Jt(vw)}function k1(a,e){a.set(yR,e)}function O1(a,e){a.set(fR,e)}function R1(a,e){a.set(_R,e)}function Ow(a,e){a.set(DR,e)}function Rw(a,e){e&&a.set(UR,e)}function xw(a,e){e&&a.set(MR,e)}function Iw(a,e){a.set(uR,e)}function Gp(a){a.set(QO,"1")}function Nw(a){a.has(lp)||a.set(lp,"true")}function Ri(a,e){Object.entries(e).forEach(([n,i])=>{!a.has(n)&&i&&a.set(n,i)})}function x1(a,e){let n;if(!a)n={};else try{n=JSON.parse(a)}catch{throw Jt(yw)}return e&&e.length>0&&(n.hasOwnProperty(kh.ACCESS_TOKEN)||(n[kh.ACCESS_TOKEN]={}),n[kh.ACCESS_TOKEN][kh.XMS_CC]={values:e}),JSON.stringify(n)}function Fp(a,e){e&&(a.set(pw,jt.POP),a.set(mw,e))}function Dw(a,e){e&&(a.set(pw,jt.SSH),a.set(mw,e))}function Uw(a,e){a.set(AR,e.generateCurrentRequestHeaderValue()),a.set(kR,e.generateLastRequestHeaderValue())}function Mw(a){a.set(OR,iR)}function I1(a,e){a.set(jR,e)}function gd(a,e,n){a.has(Vh)||a.set(Vh,e),a.has(Yh)||a.set(Yh,n)}function N1(a,e){a.set(KR,encodeURIComponent(e)),a.set(qR,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function j_(a){if(!a)return a;let e=a.toLowerCase();return Vr.endsWith(e,"?")?e=e.slice(0,-1):Vr.endsWith(e,"?/")&&(e=e.slice(0,-2)),Vr.endsWith(e,"/")||(e+="/"),e}function Pw(a){return a.startsWith("#/")?a.substring(2):a.startsWith("#")||a.startsWith("?")?a.substring(1):a}function Jh(a){if(!a||a.indexOf("=")<0)return null;try{const e=Pw(a),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw Se(o1)}return null}function Xc(a){const e=new Array;return a.forEach((n,i)=>{e.push(`${i}=${encodeURIComponent(n)}`)}),e.join("&")}function L_(a){if(!a)return a;const e=a.split("#")[0];try{const n=new URL(e),i=n.origin+n.pathname+n.search;return j_(i)}catch{return j_(e)}}const Xh={createNewGuid:()=>{throw Se(pt)},base64Decode:()=>{throw Se(pt)},base64Encode:()=>{throw Se(pt)},base64UrlEncode:()=>{throw Se(pt)},encodeKid:()=>{throw Se(pt)},async getPublicKeyThumbprint(){throw Se(pt)},async removeTokenBindingKey(){throw Se(pt)},async clearKeystore(){throw Se(pt)},async signJwt(){throw Se(pt)},async hashString(){throw Se(pt)}};var rn;(function(a){a[a.Error=0]="Error",a[a.Warning=1]="Warning",a[a.Info=2]="Info",a[a.Verbose=3]="Verbose",a[a.Trace=4]="Trace"})(rn||(rn={}));const D1=50,U1=500,Fs=new Map;function M1(a,e){Fs.delete(a),Fs.set(a,e)}function P1(a,e){const n=Date.now();let i=Fs.get(a);if(i)M1(a,i);else if(i={logs:[],firstEventTime:n},Fs.set(a,i),Fs.size>D1){const o=Fs.keys().next().value;o&&Fs.delete(o)}i.logs.push({...e,milliseconds:n-i.firstEventTime}),i.logs.length>U1&&i.logs.shift()}function j1(a){if(a.length!==6)return!1;for(let e=0;e<a.length;e++){const n=a[e];if(!(n>="a"&&n<="z"||n>="A"&&n<="Z"||n>="0"&&n<="9"))return!1}return!0}class ui{constructor(e,n,i){this.level=rn.Info;const o=()=>{},c=e||ui.createDefaultLoggerOptions();this.localCallback=c.loggerCallback||o,this.piiLoggingEnabled=c.piiLoggingEnabled||!1,this.level=typeof c.logLevel=="number"?c.logLevel:rn.Info,this.packageName=n||"",this.packageVersion=i||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rn.Info}}clone(e,n){return new ui({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level},e,n)}logMessage(e,n){const i=n.correlationId;if(j1(e)){const m={hash:e,level:n.logLevel,containsPii:n.containsPii||!1,milliseconds:0};P1(i,m)}if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const f=`${`[${new Date().toUTCString()}] : [${i}]`} : ${this.packageName}@${this.packageVersion} : ${rn[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,f,n.containsPii||!1)}executeCallback(e,n,i){this.localCallback&&this.localCallback(e,n,i)}error(e,n){this.logMessage(e,{logLevel:rn.Error,containsPii:!1,correlationId:n})}errorPii(e,n){this.logMessage(e,{logLevel:rn.Error,containsPii:!0,correlationId:n})}warning(e,n){this.logMessage(e,{logLevel:rn.Warning,containsPii:!1,correlationId:n})}warningPii(e,n){this.logMessage(e,{logLevel:rn.Warning,containsPii:!0,correlationId:n})}info(e,n){this.logMessage(e,{logLevel:rn.Info,containsPii:!1,correlationId:n})}infoPii(e,n){this.logMessage(e,{logLevel:rn.Info,containsPii:!0,correlationId:n})}verbose(e,n){this.logMessage(e,{logLevel:rn.Verbose,containsPii:!1,correlationId:n})}verbosePii(e,n){this.logMessage(e,{logLevel:rn.Verbose,containsPii:!0,correlationId:n})}trace(e,n){this.logMessage(e,{logLevel:rn.Trace,containsPii:!1,correlationId:n})}tracePii(e,n){this.logMessage(e,{logLevel:rn.Trace,containsPii:!0,correlationId:n})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const pd="@azure/msal-common",nu="16.0.3";const $p={None:"none"};function z_(a,e){return!!a&&!!e&&a===e.split(".")[1]}function Al(a,e,n,i){if(i){const{oid:o,sub:c,tid:u,name:f,tfp:m,acr:y,preferred_username:S,upn:E,login_hint:O}=i,R=u||m||y||"";return{tenantId:R,localAccountId:o||c||"",name:f,username:S||E||"",loginHint:O,isHomeTenant:z_(R,a)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:z_(n,a)}}function Vp(a,e,n,i){let o=a;if(e){const{isHomeTenant:c,...u}=e;o={...a,...u}}if(n){const{isHomeTenant:c,...u}=Al(a.homeAccountId,a.localAccountId,a.tenantId,n);return o={...o,...u,idTokenClaims:n,idToken:i},o}return o}function la(a,e){const n=L1(a);try{const i=e(n);return JSON.parse(i)}catch{throw Se(ww)}}function Ys(a){if(!a.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return a.signin_state.some(n=>e.includes(n.trim().toLowerCase()))}function L1(a){if(!a)throw Se(i1);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(a);if(!n||n.length<4)throw Se(ww);return n[2]}function jw(a,e){if(e===0||Date.now()-3e5>a+e)throw Se(u1)}class Nt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Jt($R);e.includes("#")||(this._urlString=Nt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Vr.endsWith(n,"?")?n=n.slice(0,-1):Vr.endsWith(n,"?/")&&(n=n.slice(0,-2)),Vr.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Jt(Oh)}if(!e.HostNameAndPort||!e.PathSegments)throw Jt(Oh);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Jt(FR)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Nt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),i=n.PathSegments;return e&&i.length!==0&&(i[0]===rs.COMMON||i[0]===rs.ORGANIZATIONS)&&(i[0]=e),Nt.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Jt(Oh);const i={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=i.AbsolutePath.split("/");return o=o.filter(c=>c&&c.length>0),i.PathSegments=o,i.QueryString&&i.QueryString.endsWith("/")&&(i.QueryString=i.QueryString.substring(0,i.QueryString.length-1)),i}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),i=e.match(n);if(!i)throw Jt(Oh);return i[2]}static getAbsoluteUrl(e,n){if(e[0]===ap){const o=new Nt(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Nt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}}const z1=[{host:"login.microsoftonline.com"},{host:"login.chinacloudapi.cn",issuerHost:"login.partner.microsoftonline.cn"},{host:"login.microsoftonline.us"},{host:"login.sovcloud-identity.fr"},{host:"login.sovcloud-identity.de"},{host:"login.sovcloud-identity.sg"}];function H1(a,e){return{token_endpoint:`https://${a}/{tenantid}/oauth2/v2.0/token`,jwks_uri:`https://${a}/{tenantid}/discovery/v2.0/keys`,issuer:`https://${e}/{tenantid}/v2.0`,authorization_endpoint:`https://${a}/{tenantid}/oauth2/v2.0/authorize`,end_session_endpoint:`https://${a}/{tenantid}/oauth2/v2.0/logout`}}const B1=z1.reduce((a,{host:e,issuerHost:n})=>(a[e]=H1(e,n||e),a),{}),Lw={endpointMetadata:B1,instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},H_=Lw.endpointMetadata,Yp=Lw.instanceDiscoveryMetadata,zw=new Set;Yp.metadata.forEach(a=>{a.aliases.forEach(e=>{zw.add(e)})});function K1(a,e,n){let i;const o=a.canonicalAuthority;if(o){const c=new Nt(o).getUrlComponents().HostNameAndPort;i=B_(e,n,c,a.cloudDiscoveryMetadata?.metadata)||B_(e,n,c,Yp.metadata)||a.knownAuthorities}return i||[]}function B_(a,e,n,i,o){if(a.trace("1bmquz",e),n&&i){const c=Wh(i,n);if(c)return a.trace("1fotbt",e),c.aliases;a.trace("14avvj",e)}return null}function q1(a){return Wh(Yp.metadata,a)}function Wh(a,e){for(let n=0;n<a.length;n++){const i=a[n];if(i.aliases.includes(e))return i}return null}const up="cache_quota_exceeded",G1="cache_error_unknown";class gl extends Error{constructor(e,n){const i=n||Ip(e);super(i),Object.setPrototypeOf(this,gl.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=i}}function hp(a){return a instanceof Error?a.name==="QuotaExceededError"||a.name==="NS_ERROR_DOM_QUOTA_REACHED"||a.message.includes("exceeded the quota")?new gl(up):new gl(a.name,a.message):new gl(G1)}function Zh(a,e){if(!a)throw Se(r1);try{const n=e(a);return JSON.parse(n)}catch{throw Se(_w)}}function pl(a){if(!a)throw Se(_w);const e=a.split(sp,2);return{uid:e[0],utid:e.length<2?"":e[1]}}const oi={Default:0,Adfs:1,Dsts:2,Ciam:3};function Qp(a){return a&&(a.tid||a.tfp||a.acr)||null}const mr={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};function Xs(a){const e=a.tenantProfiles||[];return e.length===0&&a.realm&&a.localAccountId&&e.push(Al(a.homeAccountId,a.localAccountId,a.realm)),{homeAccountId:a.homeAccountId,environment:a.environment,tenantId:a.realm,username:a.username,localAccountId:a.localAccountId,loginHint:a.loginHint,name:a.name,nativeAccountId:a.nativeAccountId,authorityType:a.authorityType,tenantProfiles:new Map(e.map(n=>[n.tenantId,n])),dataBoundary:a.dataBoundary}}function F1(a,e,n){let i;e.authorityType===oi.Adfs?i=YO:e.protocolMode===mr.OIDC?i=cw:i=VO;let o,c;a.clientInfo&&n&&(o=Zh(a.clientInfo,n),o.xms_tdbr&&(c=o.xms_tdbr==="EU"?"EU":"None"));const u=a.environment||e&&e.getPreferredCache();if(!u)throw Se(Ew);const f=a.idTokenClaims?.preferred_username||a.idTokenClaims?.upn,m=a.idTokenClaims?.emails?a.idTokenClaims.emails[0]:null,y=f||m||"",S=a.idTokenClaims?.login_hint,E=o?.utid||Qp(a.idTokenClaims)||"",O=o?.uid||a.idTokenClaims?.oid||a.idTokenClaims?.sub||"";let R;return a.tenantProfiles?R=a.tenantProfiles:R=[Al(a.homeAccountId,O,E,a.idTokenClaims)],{homeAccountId:a.homeAccountId,environment:u,realm:E,localAccountId:O,username:y,authorityType:i,loginHint:S,clientInfo:a.clientInfo,name:a.idTokenClaims?.name||"",lastModificationTime:void 0,lastModificationApp:void 0,cloudGraphHostName:a.cloudGraphHostName,msGraphHost:a.msGraphHost,nativeAccountId:a.nativeAccountId,tenantProfiles:R,dataBoundary:c}}function $1(a,e,n){const i=Array.from(a.tenantProfiles?.values()||[]);return i.length===0&&a.tenantId&&a.localAccountId&&i.push(Al(a.homeAccountId,a.localAccountId,a.tenantId,a.idTokenClaims)),{authorityType:a.authorityType||cw,homeAccountId:a.homeAccountId,localAccountId:a.localAccountId,nativeAccountId:a.nativeAccountId,realm:a.tenantId,environment:a.environment,username:a.username,loginHint:a.loginHint,name:a.name,cloudGraphHostName:e,msGraphHost:n,tenantProfiles:i,dataBoundary:a.dataBoundary}}function Hw(a,e,n,i,o,c){if(!(e===oi.Adfs||e===oi.Dsts)){if(a)try{const u=Zh(a,i.base64Decode);if(u.uid&&u.utid)return`${u.uid}.${u.utid}`}catch{}n.warning("1ub6wv",o)}return c?.sub||""}function V1(a){return a?a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("realm")&&a.hasOwnProperty("localAccountId")&&a.hasOwnProperty("username")&&a.hasOwnProperty("authorityType"):!1}class dp{constructor(e,n,i,o,c){this.clientId=e,this.cryptoImpl=n,this.commonLogger=i.clone(pd,nu),this.staticAuthorityOptions=c,this.performanceClient=o}getAllAccounts(e={},n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){const i=this.getAllAccounts(e,n);return i.length>1?i.sort(c=>c.idTokenClaims?-1:1)[0]:i.length===1?i[0]:null}getBaseAccountInfo(e,n){const i=this.getAccountsFilteredBy(e,n);return i.length>0?Xs(i[0]):null}buildTenantProfiles(e,n,i){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,n,i?.tenantId,i))}getTenantedAccountInfoByFilter(e,n,i,o,c){let u=null,f;if(c&&!this.tenantProfileMatchesFilter(i,c))return null;const m=this.getIdToken(e,o,n,i.tenantId);return m&&(f=la(m.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,c))?null:(u=Vp(e,i,f,m?.secret),u)}getTenantProfilesFromAccountEntity(e,n,i,o){const c=Xs(e);let u=c.tenantProfiles||new Map;const f=this.getTokenKeys();if(i){const y=u.get(i);if(y)u=new Map([[i,y]]);else return[]}const m=[];return u.forEach(y=>{const S=this.getTenantedAccountInfoByFilter(c,f,y,n,o);S&&m.push(S)}),m}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,i,o,c){if(!e)throw Se(p1);try{e.account&&await this.setAccount(e.account,n,i,o),e.idToken&&c?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,n,i),e.accessToken&&c?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,n,i),e.refreshToken&&c?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n,i),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(u){throw this.commonLogger?.error("0j476p",n),u instanceof Vt?u:hp(u)}}async saveAccessToken(e,n,i){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType},c=this.getTokenKeys(),u=Zn.fromString(e.target);c.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,o,!1))return;const m=this.getAccessTokenCredential(f,n);m&&this.credentialMatchesFilter(m,o,n)&&Zn.fromString(m.target).intersectingScopeSets(u)&&this.removeAccessToken(f,n)}),await this.setAccessTokenCredential(e,n,i)}getAccountsFilteredBy(e,n){const i=this.getAccountKeys(),o=[];return i.forEach(c=>{const u=this.getAccount(c,n);if(!u||e.homeAccountId&&!this.matchHomeAccountId(u,e.homeAccountId)||e.username&&!this.matchUsername(u.username,e.username)||e.environment&&!this.matchEnvironment(u,e.environment,n)||e.realm&&!this.matchRealm(u,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(u,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(u,e.authorityType))return;const f={localAccountId:e?.localAccountId,name:e?.name},m=u.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,f));m&&m.length===0||o.push(u)}),o}credentialMatchesFilter(e,n,i){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment,i)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||e.credentialType===Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===jt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e,n){const i=this.getKeys(),o={};return i.forEach(c=>{if(!this.isAppMetadata(c))return;const u=this.getAppMetadata(c,n);u&&(e.environment&&!this.matchEnvironment(u,e.environment,n)||e.clientId&&!this.matchClientId(u,e.clientId)||(o[c]=u))}),o}getAuthorityMetadataByAlias(e,n){const i=this.getAuthorityMetadataKeys();let o=null;return i.forEach(c=>{if(!this.isAuthorityMetadata(c)||c.indexOf(this.clientId)===-1)return;const u=this.getAuthorityMetadata(c,n);u&&u.aliases.indexOf(e)!==-1&&(o=u)}),o}removeAllAccounts(e){this.getAllAccounts({},e).forEach(i=>{this.removeAccount(i,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const i=this.getAccountKeys(),o=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);i.filter(o).forEach(c=>{this.removeItem(c,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const i=this.getTokenKeys(),o=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);i.idToken.filter(o).forEach(c=>{this.removeIdToken(c,n)}),i.accessToken.filter(o).forEach(c=>{this.removeAccessToken(c,n)}),i.refreshToken.filter(o).forEach(c=>{this.removeRefreshToken(c,n)})}removeAccessToken(e,n){const i=this.getAccessTokenCredential(e,n);if(i&&(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),i.credentialType.toLowerCase()===Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&i.tokenType===jt.POP)){const c=i.keyId;c&&this.cryptoImpl.removeTokenBindingKey(c,n).catch(()=>{this.commonLogger.error("0cx291",n),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},n)})}}removeAppMetadata(e){return this.getKeys().forEach(i=>{this.isAppMetadata(i)&&this.removeItem(i,e)}),!0}getIdToken(e,n,i,o){this.commonLogger.trace("1drz22",n);const c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Gn.ID_TOKEN,clientId:this.clientId,realm:o},u=this.getIdTokensByFilter(c,n,i),f=u.size;if(f<1)return this.commonLogger.info("1atvtd",n),null;if(f>1){let m=u;if(!o){const y=new Map;u.forEach((E,O)=>{E.realm===e.tenantId&&y.set(O,E)});const S=y.size;if(S<1)return this.commonLogger.info("0ooalx",n),u.values().next().value;if(S===1)return this.commonLogger.info("1eq2vc",n),y.values().next().value;m=y}return this.commonLogger.info("1ws328",n),m.forEach((y,S)=>{this.removeIdToken(S,n)}),this.performanceClient.addFields({multiMatchedID:u.size},n),null}return this.commonLogger.info("1sm769",n),u.values().next().value}getIdTokensByFilter(e,n,i){const o=i&&i.idToken||this.getTokenKeys().idToken,c=new Map;return o.forEach(u=>{if(!this.idTokenKeyMatchesFilter(u,{clientId:this.clientId,...e}))return;const f=this.getIdTokenCredential(u,n);f&&this.credentialMatchesFilter(f,e,n)&&c.set(u,f)}),c}idTokenKeyMatchesFilter(e,n){const i=e.toLowerCase();return!(n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,i,o){const c=n.correlationId;this.commonLogger.trace("1t7hz1",c);const u=Zn.createSearchScopes(n.scopes),f=n.authenticationScheme||jt.BEARER,m=f.toLowerCase()!==jt.BEARER.toLowerCase()?Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME:Gn.ACCESS_TOKEN,y={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:m,clientId:this.clientId,realm:o||e.tenantId,target:u,tokenType:f,keyId:n.sshKid},S=i&&i.accessToken||this.getTokenKeys().accessToken,E=[];S.forEach(R=>{if(this.accessTokenKeyMatchesFilter(R,y,!0)){const B=this.getAccessTokenCredential(R,c);B&&this.credentialMatchesFilter(B,y,c)&&E.push(B)}});const O=E.length;return O<1?(this.commonLogger.info("1nckna",c),null):O>1?(this.commonLogger.info("1wkfwp",c),E.forEach(R=>{this.removeAccessToken(this.generateCredentialKey(R),c)}),this.performanceClient.addFields({multiMatchedAT:E.length},c),null):(this.commonLogger.info("06yt98",c),E[0])}accessTokenKeyMatchesFilter(e,n,i){const o=e.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1)return!1;if(n.target){const c=n.target.asArray();for(let u=0;u<c.length;u++){if(i&&!o.includes(c[u].toLowerCase()))return!1;if(!i&&o.includes(c[u].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const i=this.getTokenKeys(),o=[];return i.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,e,!0))return;const u=this.getAccessTokenCredential(c,n);u&&this.credentialMatchesFilter(u,e,n)&&o.push(u)}),o}getRefreshToken(e,n,i,o){this.commonLogger.trace("0x53vi",i);const c=n?$h:void 0,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Gn.REFRESH_TOKEN,clientId:this.clientId,familyId:c},f=o&&o.refreshToken||this.getTokenKeys().refreshToken,m=[];f.forEach(S=>{if(this.refreshTokenKeyMatchesFilter(S,u)){const E=this.getRefreshTokenCredential(S,i);E&&this.credentialMatchesFilter(E,u,i)&&m.push(E)}});const y=m.length;return y<1?(this.commonLogger.info("0dlw11",i),null):(y>1&&this.performanceClient.addFields({multiMatchedRT:y},i),this.commonLogger.info("0wcnep",i),m[0])}refreshTokenKeyMatchesFilter(e,n){const i=e.toLowerCase();return!(n.familyId&&i.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e,n){const i={environment:e,clientId:this.clientId},o=this.getAppMetadataFilteredBy(i,n),c=Object.keys(o).map(f=>o[f]),u=c.length;if(u<1)return null;if(u>1)throw Se(h1);return c[0]}isAppMetadataFOCI(e,n){const i=this.readAppMetadataFromCache(e,n);return!!(i&&i.familyId===$h)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const i=e.oid||e.sub;return n===i}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!!(e&&typeof e=="string"&&n?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n,i){if(this.staticAuthorityOptions){const c=K1(this.staticAuthorityOptions,this.commonLogger,i);if(c.includes(n)&&c.includes(e.environment))return!0}const o=this.getAuthorityMetadataByAlias(n,i);return!!(o&&o.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==Gn.ACCESS_TOKEN&&e.credentialType!==Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Zn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(xp)!==-1}isAuthorityMetadata(e){return e.indexOf(op)!==-1}generateAuthorityMetadataCacheKey(e){return`${op}-${this.clientId}-${e}`}static toObject(e,n){for(const i in n)e[i]=n[i];return e}}class Y1 extends dp{async setAccount(){throw Se(pt)}getAccount(){throw Se(pt)}async setIdTokenCredential(){throw Se(pt)}getIdTokenCredential(){throw Se(pt)}async setAccessTokenCredential(){throw Se(pt)}getAccessTokenCredential(){throw Se(pt)}async setRefreshTokenCredential(){throw Se(pt)}getRefreshTokenCredential(){throw Se(pt)}setAppMetadata(){throw Se(pt)}getAppMetadata(){throw Se(pt)}setServerTelemetry(){throw Se(pt)}getServerTelemetry(){throw Se(pt)}setAuthorityMetadata(){throw Se(pt)}getAuthorityMetadata(){throw Se(pt)}getAuthorityMetadataKeys(){throw Se(pt)}setThrottlingCache(){throw Se(pt)}getThrottlingCache(){throw Se(pt)}removeItem(){throw Se(pt)}getKeys(){throw Se(pt)}getAccountKeys(){throw Se(pt)}getTokenKeys(){throw Se(pt)}generateCredentialKey(){throw Se(pt)}generateAccountKey(){throw Se(pt)}}const Q1={InProgress:1};class Bw{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Q1.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""}}}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Kw={tokenRenewalOffsetSeconds:fw,preventCorsPreflight:!1},J1={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rn.Info,correlationId:""},X1={async sendGetRequestAsync(){throw Se(pt)},async sendPostRequestAsync(){throw Se(pt)}},W1={sku:RO,version:nu,cpu:"",os:""},Z1={clientSecret:"",clientAssertion:void 0},ex={azureCloudInstance:$p.None,tenant:`${aw}`},tx={application:{appName:"",appVersion:""}};function Jp({authOptions:a,systemOptions:e,loggerOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:c,clientCredentials:u,libraryInfo:f,telemetry:m,serverTelemetryManager:y,persistencePlugin:S,serializableCache:E}){const O={...J1,...n};return{authOptions:nx(a),systemOptions:{...Kw,...e},loggerOptions:O,storageInterface:i||new Y1(a.clientId,Xh,new ui(O),new Bw),networkInterface:o||X1,cryptoInterface:c||Xh,clientCredentials:u||Z1,libraryInfo:{...W1,...f},telemetry:{...tx,...m},serverTelemetryManager:y||null,persistencePlugin:S||null,serializableCache:E||null}}function nx(a){return{clientCapabilities:[],azureCloudOptions:ex,instanceAware:!1,...a}}function qw(a){return a.authOptions.authority.options.protocolMode===mr.OIDC}class ro extends Vt{constructor(e,n,i,o,c){super(e,n,i),this.name="ServerError",this.errorNo=o,this.status=c,Object.setPrototypeOf(this,ro.prototype)}}const fp="no_tokens_found",rx="native_account_unavailable",Gw="refresh_token_expired",Fw="ux_not_allowed",ix="interaction_required",ax="consent_required",sx="login_required",Xp="bad_token";const K_=[ix,ax,sx,Xp,Fw],ox=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token","ux_not_allowed"];class hi extends Vt{constructor(e,n,i,o,c,u,f,m){super(e,n,i),Object.setPrototypeOf(this,hi.prototype),this.timestamp=o||"",this.traceId=c||"",this.correlationId=u||"",this.claims=f||"",this.name="InteractionRequiredAuthError",this.errorNo=m}}function $w(a,e,n){const i=!!a&&K_.indexOf(a)>-1,o=!!n&&ox.indexOf(n)>-1,c=!!e&&K_.some(u=>e.indexOf(u)>-1);return i||c||o}function ed(a,e){return new hi(a,e)}function lx(a,e,n){const i=cx(a,n);return e?`${i}${ip}${e}`:i}function cx(a,e){if(!a)throw Se(Tw);const n={id:a.createNewGuid()};e&&(n.meta=e);const i=JSON.stringify(n);return a.base64Encode(i)}function ru(a,e){if(!a)throw Se(Tw);if(!e)throw Se(Jc);try{const n=e.split(ip),i=n[0],o=n.length>1?n.slice(1).join(ip):"",c=a(i),u=JSON.parse(c);return{userRequestState:o||"",libraryState:u}}catch{throw Se(Jc)}}function di(){return Math.round(new Date().getTime()/1e3)}function q_(a){return a.getTime()/1e3}function Ph(a){return a?new Date(Number(a)*1e3):new Date}function td(a,e){const n=Number(a)||0;return di()+e>n}function G_(a,e){const n=Number(a)+e*24*60*60*1e3;return Date.now()>n}function ux(a){return Number(a)>di()}const hx="networkClientSendPostRequestAsync",dx="refreshTokenClientExecutePostToTokenEndpoint",fx="authorizationCodeClientExecutePostToTokenEndpoint",gx="refreshTokenClientExecuteTokenRequest",px="refreshTokenClientAcquireToken",Lg="refreshTokenClientAcquireTokenWithCachedRefreshToken",mx="refreshTokenClientCreateTokenRequestBody",yx="silentFlowClientGenerateResultFromCacheRecord",Wp="getAuthCodeUrl",Vw="handleCodeResponseFromServer",vx="authClientExecuteTokenRequest",bx="authClientCreateTokenRequestBody",_x="updateTokenEndpointAuthority",iu="popTokenGenerateCnf",Zp="handleServerTokenResponse",wx="authorityResolveEndpointsAsync",Sx="authorityGetCloudDiscoveryMetadataFromNetwork",Cx="authorityUpdateCloudDiscoveryMetadata",Ex="authorityGetEndpointMetadataFromNetwork",Tx="authorityUpdateEndpointMetadata",F_="authorityUpdateMetadataWithRegionalInformation",Ax="regionDiscoveryDetectRegion",$_="regionDiscoveryGetRegionFromIMDS",kx="regionDiscoveryGetCurrentVersion",Ox="cacheManagerGetRefreshToken",Rx="setUserData";const ci=(a,e,n,i,o)=>(...c)=>{n.trace("1plfzx",o);const u=i.startMeasurement(e,o);if(o){const f=e+"CallCount";i.incrementFields({[f]:1},o)}try{const f=a(...c);return u.end({success:!0}),n.trace("1g8n6a",o),f}catch(f){n.trace("0cfd8i",o);try{n.trace(JSON.stringify(f),o)}catch{n.trace("00dty7",o)}throw u.end({success:!1},f),f}},ue=(a,e,n,i,o)=>(...c)=>{n.trace("1plfzx",o);const u=i.startMeasurement(e,o);if(o){const f=e+"CallCount";i.incrementFields({[f]:1},o)}return a(...c).then(f=>(n.trace("1g8n6a",o),u.end({success:!0}),f)).catch(f=>{n.trace("0cfd8i",o);try{n.trace(JSON.stringify(f),o)}catch{n.trace("00dty7",o)}throw u.end({success:!1},f),f})};const xx={SW:"sw"};class _l{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){const i=await ue(this.generateKid.bind(this),iu,n,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(i));return{kid:i.kid,reqCnfString:o}}async generateKid(e){return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:xx.SW}}async signPopToken(e,n,i){return this.signPayload(e,n,i)}async signPayload(e,n,i,o){const{resourceRequestMethod:c,resourceRequestUri:u,shrClaims:f,shrNonce:m,shrOptions:y}=i,E=(u?new Nt(u):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:di(),m:c?.toUpperCase(),u:E?.HostNameAndPort,nonce:m||this.cryptoUtils.createNewGuid(),p:E?.AbsolutePath,q:E?.QueryString?[[],E.QueryString]:void 0,client_claims:f||void 0,...o},n,y,i.correlationId)}}class Ix{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}function em(a,e,n,i,o){return{credentialType:Gn.ID_TOKEN,homeAccountId:a,environment:e,clientId:i,secret:n,realm:o,lastUpdatedAt:Date.now().toString()}}function tm(a,e,n,i,o,c,u,f,m,y,S,E,O){const R={homeAccountId:a,credentialType:Gn.ACCESS_TOKEN,secret:n,cachedAt:di().toString(),expiresOn:u.toString(),extendedExpiresOn:f.toString(),environment:e,clientId:i,realm:o,target:c,tokenType:S||jt.BEARER,lastUpdatedAt:Date.now().toString()};if(E&&(R.userAssertionHash=E),y&&(R.refreshOn=y.toString()),R.tokenType?.toLowerCase()!==jt.BEARER.toLowerCase())switch(R.credentialType=Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME,R.tokenType){case jt.POP:const B=la(n,m);if(!B?.cnf?.kid)throw Se(m1);R.keyId=B.cnf.kid;break;case jt.SSH:R.keyId=O}return R}function Nx(a,e,n,i,o,c,u){const f={credentialType:Gn.REFRESH_TOKEN,homeAccountId:a,environment:e,clientId:i,secret:n,lastUpdatedAt:Date.now().toString()};return c&&(f.userAssertionHash=c),o&&(f.familyId=o),u&&(f.expiresOn=u.toString()),f}function md(a){return a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")}function V_(a){return a?md(a)&&a.hasOwnProperty("realm")&&a.hasOwnProperty("target")&&(a.credentialType===Gn.ACCESS_TOKEN||a.credentialType===Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Dx(a){return a?md(a)&&a.hasOwnProperty("realm")&&a.credentialType===Gn.ID_TOKEN:!1}function Y_(a){return a?md(a)&&a.credentialType===Gn.REFRESH_TOKEN:!1}function Ux(a,e){const n=a.indexOf(hw)===0;let i=!0;return e&&(i=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&i}function Mx(a,e){let n=!1;a&&(n=a.indexOf(dw)===0);let i=!0;return e&&(i=e.hasOwnProperty("throttleTime")),n&&i}function Px({environment:a,clientId:e}){return[xp,a,e].join(uw).toLowerCase()}function jx(a,e){return e?a.indexOf(xp)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Lx(a,e){return e?a.indexOf(op)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Q_(){return di()+JO}function xh(a,e,n){a.authorization_endpoint=e.authorization_endpoint,a.token_endpoint=e.token_endpoint,a.end_session_endpoint=e.end_session_endpoint,a.issuer=e.issuer,a.endpointsFromNetwork=n,a.jwks_uri=e.jwks_uri}function zg(a,e,n){a.aliases=e.aliases,a.preferred_cache=e.preferred_cache,a.preferred_network=e.preferred_network,a.aliasesFromNetwork=n}function J_(a){return a.expiresAt<=di()}class Ws{constructor(e,n,i,o,c,u,f){this.clientId=e,this.cacheStorage=n,this.cryptoObj=i,this.logger=o,this.performanceClient=c,this.serializableCache=u,this.persistencePlugin=f}validateTokenResponse(e,n,i){if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||Dc} - Timestamp: ${e.timestamp||Dc} - Description: ${e.error_description||Dc} - Correlation ID: ${e.correlation_id||Dc} - Trace ID: ${e.trace_id||Dc}`,c=e.error_codes?.length?e.error_codes[0]:void 0,u=new ro(e.error,o,e.suberror,c,e.status);if(i&&e.status&&e.status>=FO&&e.status<=$O){this.logger.warning("16ks7j",n);return}else if(i&&e.status&&e.status>=qO&&e.status<=GO){this.logger.warning("0g61x3",n);return}throw $w(e.error,e.error_description,e.suberror)?new hi(e.error,e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",c):u}}async handleServerTokenResponse(e,n,i,o,c,u,f,m,y,S){let E;if(e.id_token){if(E=la(e.id_token||"",this.cryptoObj.base64Decode),u&&u.nonce&&E.nonce!==u.nonce)throw Se(c1);if(o.maxAge||o.maxAge===0){const V=E.auth_time;if(!V)throw Se(Sw);jw(V,o.maxAge)}}this.homeAccountIdentifier=Hw(e.client_info||"",n.authorityType,this.logger,this.cryptoObj,o.correlationId,E);let O;u&&u.state&&(O=ru(this.cryptoObj.base64Decode,u.state)),e.key_id=e.key_id||o.sshKid||void 0;const R=this.generateCacheRecord(e,n,i,o,E,f,u);let B;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("0jbz5k",o.correlationId),B=new Ix(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(B)),m&&!y&&R.account&&this.cacheStorage.getAllAccounts({homeAccountId:R.account.homeAccountId,environment:R.account.environment},o.correlationId).length<1)return this.logger.warning("1gmt66",o.correlationId),this.performanceClient?.addFields({acntLoggedOut:!0},o.correlationId),await Ws.generateAuthenticationResult(this.cryptoObj,n,R,!1,o,this.performanceClient,E,O,void 0,S);await this.cacheStorage.saveCacheRecord(R,o.correlationId,Ys(E||{}),c,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&B&&(this.logger.verbose("1bh17u",o.correlationId),await this.persistencePlugin.afterCacheAccess(B))}return Ws.generateAuthenticationResult(this.cryptoObj,n,R,!1,o,this.performanceClient,E,O,e,S)}generateCacheRecord(e,n,i,o,c,u,f){const m=n.getPreferredCache();if(!m)throw Se(Ew);const y=Qp(c);let S,E;e.id_token&&c&&(S=em(this.homeAccountIdentifier,m,e.id_token,this.clientId,y||""),E=Yw(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,c,e.client_info,m,y,f,void 0,this.logger));let O=null;if(e.access_token){const V=e.scope?Zn.fromString(e.scope):new Zn(o.scopes||[]),J=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,ge=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,me=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ce=i+J,ke=ce+ge,Ze=me&&me>0?i+me:void 0;O=tm(this.homeAccountIdentifier,m,e.access_token,this.clientId,y||n.tenant||"",V.printScopes(),ce,ke,this.cryptoObj.base64Decode,Ze,e.token_type,u,e.key_id)}let R=null;if(e.refresh_token){let V;if(e.refresh_token_expires_in){const J=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;V=i+J,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:V},o.correlationId)}R=Nx(this.homeAccountIdentifier,m,e.refresh_token,this.clientId,e.foci,u,V)}let B=null;return e.foci&&(B={clientId:this.clientId,environment:m,familyId:e.foci}),{account:E,idToken:S,accessToken:O,refreshToken:R,appMetadata:B}}static async generateAuthenticationResult(e,n,i,o,c,u,f,m,y,S){let E="",O=[],R=null,B,V,J="";if(i.accessToken){if(i.accessToken.tokenType===jt.POP&&!c.popKid){const ke=new _l(e,u),{secret:Ze,keyId:xe}=i.accessToken;if(!xe)throw Se(Aw);E=await ke.signPopToken(Ze,xe,c)}else E=i.accessToken.secret;O=Zn.fromString(i.accessToken.target).asArray(),R=Ph(i.accessToken.expiresOn),B=Ph(i.accessToken.extendedExpiresOn),i.accessToken.refreshOn&&(V=Ph(i.accessToken.refreshOn))}i.appMetadata&&(J=i.appMetadata.familyId===$h?$h:"");const ge=f?.oid||f?.sub||"",me=f?.tid||"";y?.spa_accountid&&i.account&&(i.account.nativeAccountId=y?.spa_accountid);const ce=i.account?Vp(Xs(i.account),void 0,f,i.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:ge,tenantId:me,scopes:O,account:ce,idToken:i?.idToken?.secret||"",idTokenClaims:f||{},accessToken:E,fromCache:o,expiresOn:R,extExpiresOn:B,refreshOn:V,correlationId:c.correlationId,requestId:S||"",familyId:J,tokenType:i.accessToken?.tokenType||"",state:m?m.userRequestState:"",cloudGraphHostName:i.account?.cloudGraphHostName||"",msGraphHost:i.account?.msGraphHost||"",code:y?.spa_code,fromPlatformBroker:!1}}}function Yw(a,e,n,i,o,c,u,f,m,y,S,E){E?.verbose("09jz0t",o);const R=a.getAccountKeys().find(me=>me.startsWith(n));let B=null;R&&(B=a.getAccount(R,o));const V=B||F1({homeAccountId:n,idTokenClaims:c,clientInfo:u,environment:f,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:S},e,i),J=V.tenantProfiles||[],ge=m||V.realm;if(ge&&!J.find(me=>me.tenantId===ge)){const me=Al(n,V.localAccountId,ge,c);J.push(me)}return V.tenantProfiles=J,V}const li={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};async function Qw(a,e,n){return typeof a=="string"?a:a({clientId:e,tokenEndpoint:n})}function yd(a,e,n){return{clientId:a,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.extraParameters?.clientId}}class ki{static generateThrottlingStorageKey(e){return`${dw}.${JSON.stringify(e)}`}static preProcess(e,n,i){const o=ki.generateThrottlingStorageKey(n),c=e.getThrottlingCache(o,i);if(c){if(c.throttleTime<Date.now()){e.removeItem(o,i);return}throw new ro(c.errorCodes?.join(" ")||"",c.errorMessage,c.subError)}}static postProcess(e,n,i,o){if(ki.checkResponseStatus(i)||ki.checkResponseForRetryAfter(i)){const c={throttleTime:ki.calculateThrottleTime(parseInt(i.headers[sr.RETRY_AFTER])),error:i.body.error,errorCodes:i.body.error_codes,errorMessage:i.body.error_description,subError:i.body.suberror};e.setThrottlingCache(ki.generateThrottlingStorageKey(n),c,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(sr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,i=Date.now()/1e3;return Math.floor(Math.min(i+(n||nR),i+rR)*1e3)}static removeThrottle(e,n,i,o){const c=yd(n,i,o),u=this.generateThrottlingStorageKey(c);e.removeItem(u,i.correlationId)}}class vd extends Vt{constructor(e,n,i){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,vd.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=i}}function Lc(a,e,n,i){return a.errorMessage=`${a.errorMessage}, additionalErrorInfo: error.name:${i?.name}, error.message:${i?.message}`,new vd(a,e,n)}function Jw(a,e,n){const i={};if(i[sr.CONTENT_TYPE]=PO,!e&&n)switch(n.type){case li.HOME_ACCOUNT_ID:try{const o=pl(n.credential);i[sr.CCS_HEADER]=`Oid:${o.uid}@${o.utid}`}catch{a.verbose("1qhtee","")}break;case li.UPN:i[sr.CCS_HEADER]=`UPN: ${n.credential}`;break}return i}function Xw(a,e,n,i){const o=new Map;return a.embeddedClientId&&gd(o,e,n),a.extraQueryParameters&&Ri(o,a.extraQueryParameters),Hp(o,a.correlationId),fd(o,a.correlationId,i),Xc(o)}async function Ww(a,e,n,i,o,c,u,f,m,y){const S=await zx(i,a,{body:e,headers:n},o,c,u,f,m);return y&&S.status<500&&S.status!==429&&y.clearTelemetryCache(),S}async function zx(a,e,n,i,o,c,u,f){ki.preProcess(o,a,i);let m;try{m=await ue(c.sendPostRequestAsync.bind(c),hx,u,f,i)(e,n);const y=m.headers||{};f?.addFields({refreshTokenSize:m.body.refresh_token?.length||0,httpVerToken:y[sr.X_MS_HTTP_VERSION]||"",requestId:y[sr.X_MS_REQUEST_ID]||""},i)}catch(y){if(y instanceof vd){const S=y.responseHeaders;throw S&&f?.addFields({httpVerToken:S[sr.X_MS_HTTP_VERSION]||"",requestId:S[sr.X_MS_REQUEST_ID]||"",contentTypeHeader:S[sr.CONTENT_TYPE]||void 0,contentLengthHeader:S[sr.CONTENT_LENGTH]||void 0,httpStatus:y.httpStatus},i),y.error}throw y instanceof Vt?y:Se(a1)}return ki.postProcess(o,a,m,i),m}function Hx(a){return a.hasOwnProperty("authorization_endpoint")&&a.hasOwnProperty("token_endpoint")&&a.hasOwnProperty("issuer")&&a.hasOwnProperty("jwks_uri")}function Bx(a){return a.hasOwnProperty("tenant_discovery_endpoint")&&a.hasOwnProperty("metadata")}function Kx(a){return a.hasOwnProperty("error")&&a.hasOwnProperty("error_description")}class bd{constructor(e,n,i,o){this.networkInterface=e,this.logger=n,this.performanceClient=i,this.correlationId=o}async detectRegion(e,n){let i=e;if(i)n.region_source=al.ENVIRONMENT_VARIABLE;else{const o=bd.IMDS_OPTIONS;try{const c=await ue(this.getRegionFromIMDS.bind(this),$_,this.logger,this.performanceClient,this.correlationId)(jO,o);if(c.status===A_&&(i=c.body,n.region_source=al.IMDS),c.status===k_){const u=await ue(this.getCurrentVersion.bind(this),kx,this.logger,this.performanceClient,this.correlationId)(o);if(!u)return n.region_source=al.FAILED_AUTO_DETECTION,null;const f=await ue(this.getRegionFromIMDS.bind(this),$_,this.logger,this.performanceClient,this.correlationId)(u,o);f.status===A_&&(i=f.body,n.region_source=al.IMDS)}}catch{return n.region_source=al.FAILED_AUTO_DETECTION,null}}return i||(n.region_source=al.FAILED_AUTO_DETECTION),i||null}async getRegionFromIMDS(e,n){return this.networkInterface.sendGetRequestAsync(`${E_}?api-version=${e}&format=text`,n,LO)}async getCurrentVersion(e){try{const n=await this.networkInterface.sendGetRequestAsync(`${E_}?format=json`,e);return n.status===k_&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}}}bd.IMDS_OPTIONS={headers:{Metadata:"true"}};class fr{constructor(e,n,i,o,c,u,f,m){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=i,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=c,this.performanceClient=f,this.correlationId=u,this.managedIdentity=m||!1,this.regionDiscovery=new bd(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(C_))return oi.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case IO:return oi.Adfs;case NO:return oi.Dsts}return oi.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Nt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Se(Ja)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Se(Ja)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Se(Ja)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Se(b1);return this.replacePath(this.metadata.end_session_endpoint)}else throw Se(Ja)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Se(Ja)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Se(Ja)}canReplaceTenant(e){return e.PathSegments.length===1&&!fr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===oi.Default&&this.protocolMode!==mr.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new Nt(this.metadata.canonical_authority).getUrlComponents(),c=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,m)=>{let y=c[m];if(m===0&&this.canReplaceTenant(o)){const S=new Nt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==S&&(this.logger.verbose("1q3g2x",this.correlationId),y=S)}f!==y&&(n=n.replace(`/${y}/`,`/${f}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===oi.Adfs||this.protocolMode===mr.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){const e=this.getCurrentMetadataEntity(),n=await ue(this.updateCloudDiscoveryMetadata.bind(this),Cx,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const i=await ue(this.updateEndpointMetadata.bind(this),Tx,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:i}),this.performanceClient?.addFields({cloudDiscoverySource:n,authorityEndpointSource:i},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort,this.correlationId);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Q_(),jwks_uri:""}),e}updateCachedMetadata(e,n,i){n!==ni.CACHE&&i?.source!==ni.CACHE&&(e.expiresAt=Q_(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache,this.correlationId);this.cacheManager.setAuthorityMetadata(o,e,this.correlationId),this.metadata=e}async updateEndpointMetadata(e){const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===ni.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&n.metadata){const o=await ue(this.updateMetadataWithRegionalInformation.bind(this),F_,this.logger,this.performanceClient,this.correlationId)(n.metadata);xh(e,o,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let i=await ue(this.getEndpointMetadataFromNetwork.bind(this),Ex,this.logger,this.performanceClient,this.correlationId)();if(i)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(i=await ue(this.updateMetadataWithRegionalInformation.bind(this),F_,this.logger,this.performanceClient,this.correlationId)(i)),xh(e,i,!0),ni.NETWORK;throw Se(s1,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("1fi0kc",this.correlationId);const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("06t0uj",this.correlationId),xh(e,n,!1),{source:ni.CONFIG};this.logger.verbose("151k0p",this.correlationId);const i=this.getEndpointMetadataFromHardcodedValues();if(i)return xh(e,i,!1),{source:ni.HARDCODED_VALUES,metadata:i};this.logger.verbose("1imop5",this.correlationId);const o=J_(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!o?(this.logger.verbose("16uq31",""),{source:ni.CACHE}):(o&&this.logger.verbose("0uoibc",""),null)}isAuthoritySameType(e){return new Nt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Jt(JR)}return null}async getEndpointMetadataFromNetwork(){const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("1y65x6",this.correlationId);try{const i=await this.networkInterface.sendGetRequestAsync(n,e);return Hx(i.body)?i.body:(this.logger.verbose("1koyv8",this.correlationId),null)}catch{return this.logger.verbose("0a9wik",this.correlationId),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in H_?H_[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){const n=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(n){if(n!==zO)return this.regionDiscoveryMetadata.region_outcome=jg.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,fr.replaceWithRegionalInformation(e,n);const i=await ue(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ax,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(i)return this.regionDiscoveryMetadata.region_outcome=jg.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=i,fr.replaceWithRegionalInformation(e,i);this.regionDiscoveryMetadata.region_outcome=jg.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const i=await ue(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Sx,this.logger,this.performanceClient,this.correlationId)();if(i)return zg(e,i,!0),ni.NETWORK;throw Jt(XR)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("0jhlgt",this.correlationId),this.logger.verbosePii("1fy7uz",this.correlationId),this.logger.verbosePii("08zabj",this.correlationId),this.logger.verbosePii("1o1kv3",this.correlationId);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("1nakio",this.correlationId),zg(e,n,!1),ni.CONFIG;this.logger.verbose("1x74aj",this.correlationId);const i=q1(this.hostnameAndPort);if(i)return this.logger.verbose("0by47c",this.correlationId),zg(e,i,!1),ni.HARDCODED_VALUES;this.logger.verbose("0r2fzy",this.correlationId);const o=J_(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!o?(this.logger.verbose("1uffgh",""),ni.CACHE):(o&&this.logger.verbose("0uoibc",""),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===oi.Ciam)return this.logger.verbose("04y84h",this.correlationId),fr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("0gszr3",this.correlationId);try{this.logger.verbose("1iifkx",this.correlationId);const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Wh(e.metadata,this.hostnameAndPort);if(this.logger.verbose("0q67e3",""),n)return this.logger.verbose("0hzfao",this.correlationId),n;this.logger.verbose("1ajz3u",this.correlationId)}catch{throw this.logger.verbose("1wq5tu",this.correlationId),Jt(bw)}}return this.isInKnownAuthorities()?(this.logger.verbose("0mt9al",this.correlationId),fr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){const e=`${DO}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let i=null;try{const o=await this.networkInterface.sendGetRequestAsync(e,n);let c,u;if(Bx(o.body))c=o.body,u=c.metadata,this.logger.verbosePii("1vglyt",this.correlationId);else if(Kx(o.body)){if(this.logger.warning("062uto",this.correlationId),c=o.body,c.error===KO)return this.logger.error("1x90tm",this.correlationId),null;this.logger.warning("0wchdm",this.correlationId),this.logger.warning("1s5mpv",this.correlationId),this.logger.warning("1yhqpw",this.correlationId),u=[]}else return this.logger.error("0768g0",this.correlationId),null;this.logger.verbose("1lrobr",this.correlationId),i=Wh(u,this.hostnameAndPort)}catch(o){return o instanceof Vt?this.logger.error("0vwhc7",this.correlationId):this.logger.error("0s2z41",this.correlationId),null}return i||(this.logger.warning("0jp28q",this.correlationId),this.logger.verbose("130sd8",this.correlationId),i=fr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),i}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Nt.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let i;if(n&&n.azureCloudInstance!==$p.None){const o=n.tenant?n.tenant:aw;i=`${n.azureCloudInstance}/${o}/`}return i||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return xO;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Se(Ja)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return zw.has(e)}static isPublicCloudAuthority(e){return BO.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,i){const o=new Nt(e);o.validateAsUri();const c=o.getUrlComponents();let u=`${n}.${c.HostNameAndPort}`;this.isPublicCloudAuthority(c.HostNameAndPort)&&(u=`${n}.${HO}`);const f=Nt.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:u}).urlString;return i?`${f}?${i}`:f}static replaceWithRegionalInformation(e,n){const i={...e};return i.authorization_endpoint=fr.buildRegionalAuthorityString(i.authorization_endpoint,n),i.token_endpoint=fr.buildRegionalAuthorityString(i.token_endpoint,n),i.end_session_endpoint&&(i.end_session_endpoint=fr.buildRegionalAuthorityString(i.end_session_endpoint,n)),i}static transformCIAMAuthority(e){let n=e;const o=new Nt(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(C_)){const c=o.HostNameAndPort.split(".")[0];n=`${n}${c}${UO}`}return n}}fr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",rs.COMMON,rs.CONSUMERS,rs.ORGANIZATIONS]);function qx(a){const i=new Nt(a).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(i){case rs.COMMON:case rs.ORGANIZATIONS:case rs.CONSUMERS:return;default:return i}}function Zw(a){return a.endsWith(ap)?a:`${a}${ap}`}function Gx(a){const e=a.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Jt(bw)}return{canonicalAuthority:a.authority?Zw(a.authority):void 0,knownAuthorities:a.knownAuthorities,cloudDiscoveryMetadata:n}}async function eS(a,e,n,i,o,c,u){const f=fr.transformCIAMAuthority(Zw(a)),m=new fr(f,e,n,i,o,c,u);try{return await ue(m.resolveEndpointsAsync.bind(m),wx,o,u,c)(),m}catch{throw Se(Ja)}}class tS{constructor(e,n){this.includeRedirectUri=!0,this.config=Jp(e),this.logger=new ui(this.config.loggerOptions,pd,nu),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,n,i){if(!e.code)throw Se(d1);i&&i.cloud_instance_host_name&&await ue(this.updateTokenEndpointAuthority.bind(this),_x,this.logger,this.performanceClient,e.correlationId)(i.cloud_instance_host_name,e.correlationId);const o=di(),c=await ue(this.executeTokenRequest.bind(this),vx,this.logger,this.performanceClient,e.correlationId)(this.authority,e,this.serverTelemetryManager),u=c.headers?.[sr.X_MS_REQUEST_ID],f=new Ws(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(c.body,e.correlationId),ue(f.handleServerTokenResponse.bind(f),Zp,this.logger,this.performanceClient,e.correlationId)(c.body,this.authority,o,e,n,i,void 0,void 0,void 0,u)}getLogoutUri(e){if(!e)throw Jt(QR);const n=this.createLogoutUrlQueryString(e);return Nt.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n,i){const o=Xw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),c=Nt.appendQueryString(e.tokenEndpoint,o),u=await ue(this.createTokenRequestBody.bind(this),bx,this.logger,this.performanceClient,n.correlationId)(n);let f;if(n.clientInfo)try{const S=Zh(n.clientInfo,this.cryptoUtils.base64Decode);f={credential:`${S.uid}${sp}${S.utid}`,type:li.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",n.correlationId)}const m=Jw(this.logger,this.config.systemOptions.preventCorsPreflight,f||n.ccsCredential),y=yd(this.config.authOptions.clientId,n);return ue(Ww,fx,this.logger,this.performanceClient,n.correlationId)(c,u,m,y,n.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,i)}async createTokenRequestBody(e){const n=new Map;if(jp(n,e.embeddedClientId||e.extraParameters?.[Js]||this.config.authOptions.clientId),this.includeRedirectUri)Lp(n,e.redirectUri);else if(!e.redirectUri)throw Jt(GR);if(Pp(n,e.scopes,!0,this.oidcDefaultScopes),k1(n,e.code),Bp(n,this.config.libraryInfo),Kp(n,this.config.telemetry.application),Mw(n),this.serverTelemetryManager&&!qw(this.config)&&Uw(n,this.serverTelemetryManager),e.codeVerifier&&R1(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&Ow(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;Rw(n,await Qw(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),xw(n,o.assertionType)}if(Iw(n,lw.AUTHORIZATION_CODE_GRANT),Gp(n),e.authenticationScheme===jt.POP){const o=new _l(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await ue(o.generateCnf.bind(o),iu,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Fp(n,c)}else if(e.authenticationScheme===jt.SSH)if(e.sshJwk)Dw(n,e.sshJwk);else throw Jt(Up);(!Vr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&zp(n,e.claims,this.config.authOptions.clientCapabilities);let i;if(e.clientInfo)try{const o=Zh(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${o.uid}${sp}${o.utid}`,type:li.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",e.correlationId)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case li.HOME_ACCOUNT_ID:try{const o=pl(i.credential);Bc(n,o)}catch{this.logger.verbose("1qhtee",e.correlationId)}break;case li.UPN:Qh(n,i.credential);break}return e.embeddedClientId&&gd(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.extraParameters&&Ri(n,e.extraParameters),e.enableSpaAuthorizationCode&&(!e.extraParameters||!e.extraParameters[N_])&&Ri(n,{[N_]:"1"}),fd(n,e.correlationId,this.performanceClient),Xc(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&S1(n,e.postLogoutRedirectUri),e.correlationId&&Hp(n,e.correlationId),e.idTokenHint&&C1(n,e.idTokenHint),e.state&&kw(n,e.state),e.logoutHint&&I1(n,e.logoutHint),e.extraQueryParameters&&Ri(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&Nw(n),Xc(n)}async updateTokenEndpointAuthority(e,n){const i=`https://${e}/${this.authority.tenant}/`,o=await eS(i,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=o}}const Fx=300;class $x{constructor(e,n){this.config=Jp(e),this.logger=new ui(this.config.loggerOptions,pd,nu),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}async acquireToken(e,n){const i=di(),o=await ue(this.executeTokenRequest.bind(this),gx,this.logger,this.performanceClient,e.correlationId)(e,this.authority),c=o.headers?.[sr.X_MS_REQUEST_ID],u=new Ws(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return u.validateTokenResponse(o.body,e.correlationId),ue(u.handleServerTokenResponse.bind(u),Zp,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,i,e,n,void 0,void 0,!0,e.forceCache,c)}async acquireTokenByRefreshToken(e,n){if(!e)throw Jt(YR);if(!e.account)throw Se(Cw);if(this.cacheManager.isAppMetadataFOCI(e.account.environment,e.correlationId))try{return await ue(this.acquireTokenWithCachedRefreshToken.bind(this),Lg,this.logger,this.performanceClient,e.correlationId)(e,!0,n)}catch(o){const c=o instanceof hi&&o.errorCode===fp,u=o instanceof ro&&o.errorCode===aR&&o.subError===sR;if(c||u)return ue(this.acquireTokenWithCachedRefreshToken.bind(this),Lg,this.logger,this.performanceClient,e.correlationId)(e,!1,n);throw o}return ue(this.acquireTokenWithCachedRefreshToken.bind(this),Lg,this.logger,this.performanceClient,e.correlationId)(e,!1,n)}async acquireTokenWithCachedRefreshToken(e,n,i){const o=ci(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ox,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0);if(!o)throw ed(fp);if(o.expiresOn){const u=e.refreshTokenExpirationOffsetSeconds||Fx;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(o.expiresOn),rtOffsetSeconds:u},e.correlationId),td(o.expiresOn,u))throw ed(Gw)}const c={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||jt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:li.HOME_ACCOUNT_ID}};try{return await ue(this.acquireToken.bind(this),px,this.logger,this.performanceClient,e.correlationId)(c,i)}catch(u){if(u instanceof hi&&u.subError===Xp){this.logger.verbose("1pg3ap",e.correlationId);const f=this.cacheManager.generateCredentialKey(o);this.cacheManager.removeRefreshToken(f,e.correlationId)}throw u}}async executeTokenRequest(e,n){const i=Xw(e,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),o=Nt.appendQueryString(n.tokenEndpoint,i),c=await ue(this.createTokenRequestBody.bind(this),mx,this.logger,this.performanceClient,e.correlationId)(e),u=Jw(this.logger,this.config.systemOptions.preventCorsPreflight,e.ccsCredential),f=yd(this.config.authOptions.clientId,e);return ue(Ww,dx,this.logger,this.performanceClient,e.correlationId)(o,c,u,f,e.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,this.serverTelemetryManager)}async createTokenRequestBody(e){const n=new Map;if(jp(n,e.embeddedClientId||e.extraParameters?.[Js]||this.config.authOptions.clientId),e.redirectUri&&Lp(n,e.redirectUri),Pp(n,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Iw(n,lw.REFRESH_TOKEN_GRANT),Gp(n),Bp(n,this.config.libraryInfo),Kp(n,this.config.telemetry.application),Mw(n),this.serverTelemetryManager&&!qw(this.config)&&Uw(n,this.serverTelemetryManager),O1(n,e.refreshToken),this.config.clientCredentials.clientSecret&&Ow(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const i=this.config.clientCredentials.clientAssertion;Rw(n,await Qw(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),xw(n,i.assertionType)}if(e.authenticationScheme===jt.POP){const i=new _l(this.cryptoUtils,this.performanceClient);let o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await ue(i.generateCnf.bind(i),iu,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Fp(n,o)}else if(e.authenticationScheme===jt.SSH)if(e.sshJwk)Dw(n,e.sshJwk);else throw Jt(Up);if((!Vr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&zp(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case li.HOME_ACCOUNT_ID:try{const i=pl(e.ccsCredential.credential);Bc(n,i)}catch{this.logger.verbose("1qhtee",e.correlationId)}break;case li.UPN:Qh(n,e.ccsCredential.credential);break}return e.embeddedClientId&&gd(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.extraParameters&&Ri(n,{...e.extraParameters}),fd(n,e.correlationId,this.performanceClient),Xc(n)}}class Vx{constructor(e,n){this.config=Jp(e),this.logger=new ui(this.config.loggerOptions,pd,nu),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}async acquireCachedToken(e){let n=Ks.NOT_APPLICABLE;if(e.forceRefresh||!Vr.isEmptyObj(e.claims))throw this.setCacheOutcome(Ks.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Se(Vs);if(!e.account)throw Se(Cw);const i=e.account.tenantId||qx(e.authority),o=this.cacheManager.getTokenKeys(),c=this.cacheManager.getAccessToken(e.account,e,o,i);if(c){if(ux(c.cachedAt)||td(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ks.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Se(Vs);c.refreshOn&&td(c.refreshOn,0)&&(n=Ks.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ks.NO_CACHED_ACCESS_TOKEN,e.correlationId),Se(Vs);const u=e.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:c,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,i),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(u,e.correlationId)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ue(this.generateResultFromCacheRecord.bind(this),yx,this.logger,this.performanceClient,e.correlationId)(f,e),n]}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),e!==Ks.NOT_APPLICABLE&&this.logger.info("09ingz",n)}async generateResultFromCacheRecord(e,n){let i;if(e.idToken&&(i=la(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const o=i?.auth_time;if(!o)throw Se(Sw);jw(o,n.maxAge)}return Ws.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,this.performanceClient,i)}}const Yx={sendGetRequestAsync:()=>Promise.reject(Se(pt)),sendPostRequestAsync:()=>Promise.reject(Se(pt))};function Qx(a,e,n,i){const o=e.correlationId,c=new Map;jp(c,e.embeddedClientId||e.extraQueryParameters?.[Js]||a.clientId);const u=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Pp(c,u,!0,a.authority.options.OIDCOptions?.defaultScopes),Lp(c,e.redirectUri),Hp(c,o),_1(c,e.responseMode),Gp(c),e.prompt&&(T1(c,e.prompt),i?.addFields({prompt:e.prompt},o)),e.domainHint&&(E1(c,e.domainHint),i?.addFields({domainHintFromRequest:!0},o)),e.prompt!==pr.SELECT_ACCOUNT)if(e.sid&&e.prompt===pr.NONE)n.verbose("1tvqyx",e.correlationId),P_(c,e.sid),i?.addFields({sidFromRequest:!0},o);else if(e.account){const f=Wx(e.account);let m=Zx(e.account);if(m&&e.domainHint&&(n.warning("0wkg3v",e.correlationId),m=null),m){n.verbose("1eyfsw",e.correlationId),Rh(c,m),i?.addFields({loginHintFromClaim:!0},o);try{const y=pl(e.account.homeAccountId);Bc(c,y)}catch{n.verbose("12ugck",e.correlationId)}}else if(f&&e.prompt===pr.NONE){n.verbose("1rmd8s",e.correlationId),P_(c,f),i?.addFields({sidFromClaim:!0},o);try{const y=pl(e.account.homeAccountId);Bc(c,y)}catch{n.verbose("12ugck",e.correlationId)}}else if(e.loginHint)n.verbose("0y3007",e.correlationId),Rh(c,e.loginHint),Qh(c,e.loginHint),i?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){n.verbose("02f507",e.correlationId),Rh(c,e.account.username),i?.addFields({loginHintFromUpn:!0},o);try{const y=pl(e.account.homeAccountId);Bc(c,y)}catch{n.verbose("12ugck",e.correlationId)}}}else e.loginHint&&(n.verbose("0g01ey",e.correlationId),Rh(c,e.loginHint),Qh(c,e.loginHint),i?.addFields({loginHintFromRequest:!0},o));else n.verbose("169k9v",e.correlationId);return e.nonce&&A1(c,e.nonce),e.state&&kw(c,e.state),(e.claims||a.clientCapabilities&&a.clientCapabilities.length>0)&&zp(c,e.claims,a.clientCapabilities),e.embeddedClientId&&gd(c,a.clientId,a.redirectUri),a.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(lp))&&Nw(c),c}function nm(a,e){const n=Xc(e);return Nt.appendQueryString(a.authorizationEndpoint,n)}function Jx(a,e){if(nS(a,e),!a.code)throw Se(y1);return a}function nS(a,e){if(!a.state||!e)throw a.state?Se(D_,"Cached State"):Se(D_,"Server State");let n,i;try{n=decodeURIComponent(a.state)}catch{throw Se(Jc,a.state)}try{i=decodeURIComponent(e)}catch{throw Se(Jc,a.state)}if(n!==i)throw Se(l1);if(a.error||a.error_description||a.suberror){const o=Xx(a);throw $w(a.error,a.error_description,a.suberror)?new hi(a.error||"",a.error_description,a.suberror,a.timestamp||"",a.trace_id||"",a.correlation_id||"",a.claims||"",o):new ro(a.error||"",a.error_description,a.suberror,o)}}function Xx(a){const e="code=",n=a.error_uri?.lastIndexOf(e);return n&&n>=0?a.error_uri?.substring(n+e.length):void 0}function Wx(a){return a.idTokenClaims?.sid||null}function Zx(a){return a.loginHint||a.idTokenClaims?.login_hint||null}const gp="unexpected_error";const X_=",",rS="|";function eI(a){const{skus:e,libraryName:n,libraryVersion:i,extensionName:o,extensionVersion:c}=a,u=new Map([[0,[n,i]],[2,[o,c]]]);let f=[];if(e?.length){if(f=e.split(X_),f.length<4)return e}else f=Array.from({length:4},()=>rS);return u.forEach((m,y)=>{m.length===2&&m[0]?.length&&m[1]?.length&&tI({skuArr:f,index:y,skuName:m[0],skuVersion:m[1]})}),f.join(X_)}function tI(a){const{skuArr:e,index:n,skuName:i,skuVersion:o}=a;n>=e.length||(e[n]=[i,o].join(rS))}class Wc{constructor(e,n){this.cacheOutcome=Ks.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||"",this.wrapperVer=e.wrapperVer||"",this.telemetryCacheKey=hw+uw+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${il}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],i=this.getNativeBrokerErrorCode();i?.length&&n.push(`broker_error=${i}`);const o=n.join(il),c=this.getRegionDiscoveryFields(),u=[e,c].join(il);return[x_,u,o].join(I_)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Wc.maxErrorsToSend(e),i=e.failedRequests.slice(0,2*n).join(il),o=e.errors.slice(0,n).join(il),c=e.errors.length,u=n<c?ZO:eR,f=[c,u].join(il);return[x_,e.cacheHits,i,o,f].join(I_)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=WO&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Vt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(tR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey,this.correlationId)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Wc.maxErrorsToSend(e),i=e.errors.length;if(n===i)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let n,i=0,o=0;const c=e.errors.length;for(n=0;n<c;n++){const u=e.failedRequests[2*n]||"",f=e.failedRequests[2*n+1]||"",m=e.errors[n]||"";if(o+=u.toString().length+f.toString().length+m.length+3,o<XO)i+=1;else break}return i}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||""),e.push(this.regionSource||""),e.push(this.regionOutcome||""),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return eI(e)}}class rm extends Vt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,rm.prototype)}}function W_(a){return new rm(a)}const nI="missing_kid_error",rI="missing_alg_error";class im{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw W_(nI);if(!e.alg)throw W_(rI);const n=new im({typ:e.typ||oR.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}function _d(a){return`See https://aka.ms/msal.js.errors#${a} for details`}class au extends Vt{constructor(e,n){super(e,_d(e),n),Object.setPrototypeOf(this,au.prototype),this.name="BrowserAuthError"}}function Ne(a,e){return new au(a,e)}const Fr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",MSAL_SKU:"msal.js.browser"},$r={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Uc={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Yr={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Z_={GET:"GET",POST:"POST"},es={SIGNIN:"signin",SIGNOUT:"signout"},Cn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Ih={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},kt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},e0={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},iI=a=>typeof a=="number"&&a in e0?e0[a]:"unknown";var tt;(function(a){a.Redirect="redirect",a.Popup="popup",a.Silent="silent",a.None="none"})(tt||(tt={}));const gr={Startup:"startup",Logout:"logout",AcquireToken:"acquireToken",HandleRedirect:"handleRedirect",None:"none"},t0={scopes:Tl},iS="jwk",aI={React:"@azure/msal-react"},pp="msal.db",sI=1,oI=`${pp}.keys`,ar={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},lI=[ar.Default,ar.Skip,ar.RefreshTokenAndNetwork];function Nh(a){return encodeURIComponent(Zc(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function ss(a){return aS(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zc(a){return aS(new TextEncoder().encode(a))}function aS(a){const e=Array.from(a,n=>String.fromCodePoint(n)).join("");return btoa(e)}const sS="pkce_not_created",oS="ear_jwk_empty",cI="ear_jwe_empty",n0="crypto_nonexistent",am="empty_navigate_uri",uI="hash_empty_error",sm="no_state_in_hash",hI="hash_does_not_contain_known_properties",lS="unable_to_parse_state",dI="state_interaction_type_mismatch",fI="interaction_in_progress",gI="interaction_in_progress_cancelled",pI="popup_window_error",mI="empty_window_error",mp="user_cancelled",yI="redirect_bridge_empty_response",vI="redirect_in_iframe",bI="block_iframe_reload",_I="block_nested_popups",om="silent_logout_unsupported",wI="no_account_error",SI="no_token_request_cache_error",CI="unable_to_parse_token_request_cache_error",cS="non_browser_environment",Mc="database_not_open",yp="no_network_connectivity",EI="post_request_failed",TI="get_request_failed",r0="failed_to_parse_response",uS="crypto_key_not_found",AI="auth_code_required",kI="auth_code_or_nativeAccountId_required",OI="spa_code_and_nativeAccountId_present",hS="database_unavailable",RI="unable_to_acquire_token_from_native_platform",xI="native_handshake_timeout",II="native_extension_not_installed",dS="native_connection_not_established",jh="uninitialized_public_client_application",NI="native_prompt_not_supported",DI="invalid_base64_string",UI="invalid_pop_token_request",MI="failed_to_build_headers",PI="failed_to_parse_headers",Hg="failed_to_decrypt_ear_response",nd="timed_out",jI="empty_response";function Ir(a){return new TextDecoder().decode(is(a))}function is(a){let e=a.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Ne(DI)}const n=atob(e);return Uint8Array.from(n,i=>i.codePointAt(0)||0)}const LI="RSASSA-PKCS1-v1_5",kl="AES-GCM",fS="HKDF",lm="SHA-256",zI=2048,HI=new Uint8Array([1,0,1]),i0="0123456789abcdef",a0=new Uint32Array(1),cm="raw",gS="encrypt",um="decrypt",BI="deriveKey",KI="crypto_subtle_undefined",hm={name:LI,hash:lm,modulusLength:zI,publicExponent:HI};function qI(a){if(!window)throw Ne(cS);if(!window.crypto)throw Ne(n0);if(!a&&!window.crypto.subtle)throw Ne(n0,KI)}async function pS(a){const n=new TextEncoder().encode(a);return window.crypto.subtle.digest(lm,n)}function GI(a){return window.crypto.getRandomValues(a)}function Bg(){return window.crypto.getRandomValues(a0),a0[0]}function Zs(){const a=Date.now(),e=Bg()*1024+(Bg()&1023),n=new Uint8Array(16),i=Math.trunc(e/2**30),o=e&2**30-1,c=Bg();n[0]=a/2**40,n[1]=a/2**32,n[2]=a/2**24,n[3]=a/2**16,n[4]=a/2**8,n[5]=a,n[6]=112|i>>>8,n[7]=i,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=c>>>24,n[13]=c>>>16,n[14]=c>>>8,n[15]=c;let u="";for(let f=0;f<n.length;f++)u+=i0.charAt(n[f]>>>4),u+=i0.charAt(n[f]&15),(f===3||f===5||f===7||f===9)&&(u+="-");return u}async function FI(a,e){return window.crypto.subtle.generateKey(hm,a,e)}async function Kg(a){return window.crypto.subtle.exportKey(iS,a)}async function $I(a,e,n){return window.crypto.subtle.importKey(iS,a,hm,e,n)}async function VI(a,e){return window.crypto.subtle.sign(hm,a,e)}async function dm(){const a=await mS(),n={alg:"dir",kty:"oct",k:ss(new Uint8Array(a))};return Zc(JSON.stringify(n))}async function YI(a){const e=Ir(a),i=JSON.parse(e).k,o=is(i);return window.crypto.subtle.importKey(cm,o,kl,!1,[um])}async function QI(a,e){const n=e.split(".");if(n.length!==5)throw Ne(Hg,"jwe_length");const i=await YI(a).catch(()=>{throw Ne(Hg,"import_key")});try{const o=new TextEncoder().encode(n[0]),c=is(n[2]),u=is(n[3]),f=is(n[4]),m=f.byteLength*8,y=new Uint8Array(u.length+f.length);y.set(u),y.set(f,u.length);const S=await window.crypto.subtle.decrypt({name:kl,iv:c,tagLength:m,additionalData:o},i,y);return new TextDecoder().decode(S)}catch{throw Ne(Hg,"decrypt")}}async function mS(){const a=await window.crypto.subtle.generateKey({name:kl,length:256},!0,[gS,um]);return window.crypto.subtle.exportKey(cm,a)}async function s0(a){return window.crypto.subtle.importKey(cm,a,fS,!1,[BI])}async function yS(a,e,n){return window.crypto.subtle.deriveKey({name:fS,salt:e,hash:lm,info:new TextEncoder().encode(n)},a,{name:kl,length:256},!1,[gS,um])}async function JI(a,e,n){const i=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),c=await yS(a,o,n),u=await window.crypto.subtle.encrypt({name:kl,iv:new Uint8Array(12)},c,i);return{data:ss(new Uint8Array(u)),nonce:ss(o)}}async function o0(a,e,n,i){const o=is(i),c=await yS(a,is(e),n),u=await window.crypto.subtle.decrypt({name:kl,iv:new Uint8Array(12)},c,o);return new TextDecoder().decode(u)}async function XI(a){const e=await pS(a),n=new Uint8Array(e);return ss(n)}class fm extends Vt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,fm.prototype)}}function Mn(a){return new fm(a,_d(a))}const vS="storage_not_supported",ir="stubbed_public_client_application_called",WI="in_mem_redirect_unavailable";function ZI(){const a=window.location.hash,e=window.location.search;let n=!1,i=!1,o="",c;if(a&&a.length>1){const S=a.charAt(0)==="#"?a.substring(1):a,E=new URLSearchParams(S);E.has("state")&&(n=!0,o=S,c=E)}if(e&&e.length>1){const S=e.charAt(0)==="?"?e.substring(1):e,E=new URLSearchParams(S);E.has("state")&&(i=!0,o=S,c=E)}if(n&&i){const S=e.charAt(0)==="?"?e.substring(1):e,E=a.charAt(0)==="#"?a.substring(1):a;o=`${S}${E}`,c=new URLSearchParams(o)}if(!o||!c)throw Ne(jI);const u=c.get("state");if(!u)throw Ne(sm);const{libraryState:f}=ru(Ir,u),{id:m,meta:y}=f;if(!m||!y)throw Ne(lS,"missing_library_state");return{params:c,payload:o,urlHash:a,urlQuery:e,hasResponseInHash:n,hasResponseInQuery:i,libraryState:{id:m,meta:y}}}function bS(a){a.location.hash="",typeof a.history.replaceState=="function"&&a.history.replaceState(null,"",`${a.location.origin}${a.location.pathname}${a.location.search}`)}function eN(a){const e=a.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function wd(){return window.parent!==window}function tN(){if(wd())return!1;try{const{libraryState:a}=ZI(),{meta:e}=a;return e.interactionType===tt.Popup}catch{return!1}}let ts=null;function nN(a,e){ts&&(a.verbose("18y01k",e),clearTimeout(ts.timeoutId),ts.channel.close(),ts.reject(Ne(gI)),ts=null)}async function hl(a,e,n,i){return new Promise((o,c)=>{e.verbose("1rf6em",i.correlationId);const{libraryState:u}=ru(n.base64Decode,i.state||""),f=new BroadcastChannel(u.id);let m;const y=window.setTimeout(()=>{ts=null,f.close(),c(Ne(nd,"redirect_bridge_timeout"))},a);ts={timeoutId:y,channel:f,reject:c},f.onmessage=S=>{m=S.data.payload,ts=null,clearTimeout(y),f.close(),m?o(m):c(Ne(yI))}})}function ns(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function rN(){const e=new Nt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function iN(){if(Jh(window.location.hash)&&wd())throw Ne(bI)}function aN(a){if(wd()&&!a)throw Ne(vI)}function sN(){if(tN())throw Ne(_I)}function _S(){if(typeof window>"u")throw Ne(cS)}function wS(a){if(!a)throw Ne(jh)}function gm(a){_S(),iN(),sN(),wS(a)}function l0(a,e){if(gm(a),aN(e.system.allowRedirectInIframe),e.cache.cacheLocation===Yr.MemoryStorage)throw Mn(WI)}function SS(a){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(a).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function vp(){return Zs()}const oN="acquireTokenFromCache",lN="acquireTokenByRefreshToken",cN="acquireTokenSilentAsync",uN="cryptoOptsGetPublicKeyThumbprint",hN="cryptoOptsSignJwt",dN="silentCacheClientAcquireToken",fN="silentIframeClientAcquireToken",gN="awaitConcurrentIframe",pN="silentRefreshClientAcquireToken",Qs="standardInteractionClientGetDiscoveredAuthority",CS="nativeInteractionClientAcquireToken",mN="refreshTokenClientAcquireTokenByRefreshToken",c0="acquireTokenBySilentIframe",pm="initializeBaseRequest",yN="initializeSilentRequest",vN="initializeCache",u0="silentIframeClientTokenHelper",qg="silentHandlerInitiateAuthRequest",rd="silentHandlerMonitorIframeForHash",bN="silentHandlerLoadFrameSync",as="standardInteractionClientCreateAuthCodeClient",Sd="standardInteractionClientGetClientConfiguration",Cd="standardInteractionClientInitializeAuthorizationRequest",_N="silentFlowClientAcquireCachedToken",wN="getStandardParams",SN="handleCodeResponse",mm="handleResponseEar",ES="handleResponsePlatformBroker",ml="handleResponseCode",CN="authClientAcquireToken",Kc="deserializeResponse",EN="authorityFactoryCreateDiscoveredInstance",TN="acquireTokenByCodeAsync",AN="handleRedirectPromise",kN="handleNativeRedirectPromise",ON="nativeMessageHandlerHandshake",RN="importExistingCache",eo="generatePkceCodes",xN="generateCodeVerifier",IN="generateCodeChallengeFromVerifier",NN="sha256Digest",DN="getRandomValues",h0="generateHKDF",UN="generateBaseKey",MN="base64Decode",PN="urlEncodeArr",jN="encrypt",d0="decrypt",ym="generateEarKey",LN="decryptEarResponse";class zN{constructor(){this.dbName=pp,this.version=sI,this.tableName=oI,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const i=window.indexedDB.open(this.dbName,this.version);i.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),i.addEventListener("success",o=>{const c=o;this.db=c.target.result,this.dbOpen=!0,e()}),i.addEventListener("error",()=>n(Ne(hS)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,i)=>{if(!this.db)return i(Ne(Mc));const u=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);u.addEventListener("success",f=>{const m=f;this.closeConnection(),n(m.target.result)}),u.addEventListener("error",f=>{this.closeConnection(),i(f)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((i,o)=>{if(!this.db)return o(Ne(Mc));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);f.addEventListener("success",()=>{this.closeConnection(),i()}),f.addEventListener("error",m=>{this.closeConnection(),o(m)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,i)=>{if(!this.db)return i(Ne(Mc));const u=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);u.addEventListener("success",()=>{this.closeConnection(),n()}),u.addEventListener("error",f=>{this.closeConnection(),i(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Ne(Mc));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();c.addEventListener("success",u=>{const f=u;this.closeConnection(),e(f.target.result)}),c.addEventListener("error",u=>{this.closeConnection(),n(u)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,i)=>{if(!this.db)return i(Ne(Mc));const u=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);u.addEventListener("success",f=>{const m=f;this.closeConnection(),n(m.target.result===1)}),u.addEventListener("error",f=>{this.closeConnection(),i(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const i=window.indexedDB.deleteDatabase(pp),o=setTimeout(()=>n(!1),200);i.addEventListener("success",()=>(clearTimeout(o),e(!0))),i.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),i.addEventListener("error",()=>(clearTimeout(o),n(!1)))})}}class Ed{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,i)=>{e.push(i)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class HN{constructor(e){this.inMemoryCache=new Ed,this.indexedDBCache=new zN,this.logger=e}handleDatabaseAccessError(e,n){if(e instanceof au&&e.errorCode===hS)this.logger.error("1wx7zz",n);else throw e}async getItem(e,n){const i=this.inMemoryCache.getItem(e);if(!i)try{return this.logger.verbose("0naxpl",n),await this.indexedDBCache.getItem(e)}catch(o){this.handleDatabaseAccessError(o,n)}return i}async setItem(e,n,i){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(o){this.handleDatabaseAccessError(o,i)}}async removeItem(e,n){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(i){this.handleDatabaseAccessError(i,n)}}async getKeys(e){const n=this.inMemoryCache.getKeys();if(n.length===0)try{return this.logger.verbose("1iqrbq",e),await this.indexedDBCache.getKeys()}catch(i){this.handleDatabaseAccessError(i,e)}return n}async containsKey(e,n){const i=this.inMemoryCache.containsKey(e);if(!i)try{return this.logger.verbose("03zl2j",n),await this.indexedDBCache.containsKey(e)}catch(o){this.handleDatabaseAccessError(o,n)}return i}clearInMemory(e){this.logger.verbose("03r21p",e),this.inMemoryCache.clear(),this.logger.verbose("0uksk1",e)}async clearPersistent(e){try{this.logger.verbose("0rdqut",e);const n=await this.indexedDBCache.deleteDatabase();return n&&this.logger.verbose("149ouc",e),n}catch(n){return this.handleDatabaseAccessError(n,e),!1}}}class ua{constructor(e,n,i){this.logger=e,qI(i??!1),this.cache=new HN(this.logger),this.performanceClient=n}createNewGuid(){return Zs()}base64Encode(e){return Zc(e)}base64Decode(e){return Ir(e)}base64UrlEncode(e){return Nh(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const n=this.performanceClient?.startMeasurement(uN,e.correlationId),i=await FI(ua.EXTRACTABLE,ua.POP_KEY_USAGES),o=await Kg(i.publicKey),c={e:o.e,kty:o.kty,n:o.n},u=f0(c),f=await this.hashString(u),m=await Kg(i.privateKey),y=await $I(m,!1,["sign"]);return await this.cache.setItem(f,{privateKey:y,publicKey:i.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri},e.correlationId),n&&n.end({success:!0}),f}async removeTokenBindingKey(e,n){if(await this.cache.removeItem(e,n),await this.cache.containsKey(e,n))throw Se(v1)}async clearKeystore(e){this.cache.clearInMemory(e);try{return await this.cache.clearPersistent(e),!0}catch(n){return n instanceof Error?this.logger.error("1owpn8",e):this.logger.error("0yrmwo",e),!1}}async signJwt(e,n,i,o){const c=this.performanceClient?.startMeasurement(hN,o),u=await this.cache.getItem(n,o||"");if(!u)throw Ne(uS);const f=await Kg(u.publicKey),m=f0(f),y=Nh(JSON.stringify({kid:n})),S=im.getShrHeaderString({...i?.header,alg:f.alg,kid:y}),E=Nh(S);e.cnf={jwk:JSON.parse(m)};const O=Nh(JSON.stringify(e)),R=`${E}.${O}`,V=new TextEncoder().encode(R),J=await VI(u.privateKey,V),ge=ss(new Uint8Array(J)),me=`${R}.${ge}`;return c&&c.end({success:!0}),me}async hashString(e){return XI(e)}}ua.POP_KEY_USAGES=["sign","verify"];ua.EXTRACTABLE=!0;function f0(a){return JSON.stringify(a,Object.keys(a).sort())}const BN="acquireTokenSilent",KN="acquireTokenByCode",qN="acquireTokenPopup",GN="acquireTokenPreRedirect",Gg="acquireTokenRedirect",FN="ssoSilent",$N="initializeClientApplication",VN="localStorageUpdated";const Fn="msal",vm="browser",g0="|",Wn=2,Lh=2,YN=`${Fn}.${vm}.log.level`,QN=`${Fn}.${vm}.log.pii`,JN=`${Fn}.${vm}.platform.auth.dom`,p0=`${Fn}.version`,m0="account.keys",y0="token.keys";function yl(a=Lh){return a<1?`${Fn}.${m0}`:`${Fn}.${a}.${m0}`}function vl(a,e=Wn){return e<1?`${Fn}.${y0}.${a}`:`${Fn}.${e}.${y0}.${a}`}const XN=1440*60*1e3,bp={Lax:"Lax",None:"None"};class TS{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,i=document.cookie.split(";");for(let o=0;o<i.length;o++){const c=i[o],[u,...f]=decodeURIComponent(c).trim().split("="),m=f.join("=");if(u===n)return m}return""}getUserData(){throw Se(pt)}setItem(e,n,i,o=!0,c=bp.Lax){let u=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${c};`;if(i){const f=WN(i);u+=`expires=${f};`}(o||c===bp.None)&&(u+="Secure;"),document.cookie=u}async setUserData(){return Promise.reject(Se(pt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(i=>{const o=decodeURIComponent(i).trim().split("=");n.push(o[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function WN(a){const e=new Date;return new Date(e.getTime()+a*XN).toUTCString()}function Wa(a,e){const n=a.getItem(yl(e));return n?JSON.parse(n):[]}function ii(a,e,n){const i=e.getItem(vl(a,n));if(i){const o=JSON.parse(i);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function zh(a){return a.hasOwnProperty("id")&&a.hasOwnProperty("nonce")&&a.hasOwnProperty("data")}const v0="msal.cache.encryption",ZN="msal.broadcast.cache";class eD{constructor(e,n,i){if(!window.localStorage)throw Mn(vS);this.memoryStorage=new Ed,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=i,this.broadcast=new BroadcastChannel(ZN)}async initialize(e){const n=new TS,i=n.getItem(v0);let o={key:"",id:""};if(i)try{o=JSON.parse(i)}catch{}if(o.key&&o.id){const c=ci(is,MN,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await ue(s0,h0,this.logger,this.performanceClient,e)(c)}}else{const c=Zs(),u=await ue(mS,UN,this.logger,this.performanceClient,e)(),f=ci(ss,PN,this.logger,this.performanceClient,e)(new Uint8Array(u));this.encryptionCookie={id:c,key:await ue(s0,h0,this.logger,this.performanceClient,e)(u)};const m={id:c,key:f};n.setItem(v0,JSON.stringify(m),0,!0,bp.None)}await ue(this.importExistingCache.bind(this),RN,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",c=>{this.updateCache(c,e)}),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Ne(jh);return this.memoryStorage.getItem(e)}async decryptData(e,n,i){if(!this.initialized||!this.encryptionCookie)throw Ne(jh);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},i),null;const o=await ue(o0,d0,this.logger,this.performanceClient,i)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!o)return null;try{return{...JSON.parse(o),lastUpdatedAt:n.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},i),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,i,o,c){if(!this.initialized||!this.encryptionCookie)throw Ne(jh);if(c)this.setItem(e,n);else{const{data:u,nonce:f}=await ue(JI,jN,this.logger,this.performanceClient,i)(this.encryptionCookie.key,n,this.getContext(e)),m={id:this.encryptionCookie.id,nonce:f,data:u,lastUpdatedAt:o};this.setItem(e,JSON.stringify(m))}this.memoryStorage.setItem(e,n),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Wa(this).forEach(i=>this.removeItem(i));const n=ii(this.clientId,this);n.idToken.forEach(i=>this.removeItem(i)),n.accessToken.forEach(i=>this.removeItem(i)),n.refreshToken.forEach(i=>this.removeItem(i)),this.getKeys().forEach(i=>{(i.startsWith(Fn)||i.indexOf(this.clientId)!==-1)&&this.removeItem(i)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Wa(this);n=await this.importArray(n,e),n.length?this.setItem(yl(),JSON.stringify(n)):this.removeItem(yl());const i=ii(this.clientId,this);i.idToken=await this.importArray(i.idToken,e),i.accessToken=await this.importArray(i.accessToken,e),i.refreshToken=await this.importArray(i.refreshToken,e),i.idToken.length||i.accessToken.length||i.refreshToken.length?this.setItem(vl(this.clientId),JSON.stringify(i)):this.removeItem(vl(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const i=this.getItem(e);if(!i)return null;let o;try{o=JSON.parse(i)}catch{return null}return zh(o)?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},n),ue(o0,d0,this.logger,this.performanceClient,n)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),i)}async importArray(e,n){const i=[],o=[];return e.forEach(c=>{const u=this.getItemFromEncryptedCache(c,n).then(f=>{f?(this.memoryStorage.setItem(c,f),i.push(c)):this.removeItem(c)});o.push(u)}),await Promise.all(o),i}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e,n){this.logger.trace("17cxcm",n);const i=this.performanceClient.startMeasurement(VN);i.add({isBackground:!0});const{key:o,value:c,context:u}=e.data;if(!o){this.logger.error("0e10qr",n),i.end({success:!1,errorCode:"noKey"});return}if(u&&u!==this.clientId){this.logger.trace("04rtdy",n),i.end({success:!1,errorCode:"contextMismatch"});return}c?(this.memoryStorage.setItem(o,c),this.logger.verbose("1vzsgt",n)):(this.memoryStorage.removeItem(o),this.logger.verbose("04ypih",n)),i.end({success:!0})}}class tD{constructor(){if(!window.sessionStorage)throw Mn(vS)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}const We={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_SUCCESS:"msal:loginSuccess",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",BROKERED_REQUEST_START:"msal:brokeredRequestStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",BROKERED_REQUEST_SUCCESS:"msal:brokeredRequestSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",BROKERED_REQUEST_FAILURE:"msal:brokeredRequestFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};const nD="@azure/msal-browser",to="5.1.0";function Qa(a,e){const n=a.indexOf(e);n>-1&&a.splice(n,1)}class _p extends dp{constructor(e,n,i,o,c,u,f){super(e,i,o,c,f),this.cacheConfig=n,this.logger=o,this.internalStorage=new Ed,this.browserStorage=b0(e,n.cacheLocation,o,c),this.temporaryCacheStorage=b0(e,Yr.SessionStorage,o,c),this.cookieStorage=new TS,this.eventHandler=u}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let n=Wa(this.browserStorage),i=ii(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:n.length,preMigrateATCount:i.accessToken.length,preMigrateITCount:i.idToken.length,preMigrateRTCount:i.refreshToken.length},e);for(let c=0;c<Lh;c++){const u=c;await this.removeStaleAccounts(c,u,e)}for(let c=0;c<Wn;c++){const u=c;await this.migrateIdTokens(c,u,e)}const o=this.getKMSIValues();for(let c=0;c<Wn;c++)await this.migrateAccessTokens(c,o,e),await this.migrateRefreshTokens(c,o,e);n=Wa(this.browserStorage),i=ii(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:n.length,postMigrateATCount:i.accessToken.length,postMigrateITCount:i.idToken.length,postMigrateRTCount:i.refreshToken.length},e)}async updateOldEntry(e,n){const i=this.browserStorage.getItem(e),o=this.validateAndParseJson(i||"");if(!o)return this.browserStorage.removeItem(e),null;if(!o.lastUpdatedAt)o.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(o),n);else if(G_(o.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},n),null;const c=zh(o)?await this.browserStorage.decryptData(e,o,n):o;return!c||!md(c)?(this.performanceClient.incrementFields({invalidCacheCount:1},n),null):(V_(c)||Y_(c))&&c.expiresOn&&td(c.expiresOn,fw)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},n),null):c}async removeStaleAccounts(e,n,i){const o=Wa(this.browserStorage,e);if(o.length!==0){for(const c of[...o]){this.performanceClient.incrementFields({oldAcntCount:1},i);const u=this.browserStorage.getItem(c),f=this.validateAndParseJson(u||"");if(!f){Qa(o,c);continue}if(f.lastUpdatedAt)G_(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(c,f,n,i),Qa(o,c));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(c,JSON.stringify(f),i);continue}}this.setAccountKeys(o,i,e)}}async removeAccountOldSchema(e,n,i,o){const u=(zh(n)?await this.browserStorage.decryptData(e,n,o):n)?.homeAccountId;if(u){const f=this.getTokenKeys(i);[...f.idToken].filter(m=>m.includes(u)).forEach(m=>{this.browserStorage.removeItem(m),Qa(f.idToken,m)}),[...f.accessToken].filter(m=>m.includes(u)).forEach(m=>{this.browserStorage.removeItem(m),Qa(f.accessToken,m)}),[...f.refreshToken].filter(m=>m.includes(u)).forEach(m=>{this.browserStorage.removeItem(m),Qa(f.refreshToken,m)}),this.setTokenKeys(f,o,i)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},o),this.browserStorage.removeItem(e)}getKMSIValues(){const e={},n=this.getTokenKeys().idToken;for(const i of n){const o=this.browserStorage.getUserData(i);if(o){const c=JSON.parse(o),u=la(c.secret,Ir);u&&(e[c.homeAccountId]=Ys(u))}}return e}async migrateIdTokens(e,n,i){const o=ii(this.clientId,this.browserStorage,e);if(o.idToken.length===0)return;const c=ii(this.clientId,this.browserStorage,Wn),u=Wa(this.browserStorage),f=Wa(this.browserStorage,n);for(const m of[...o.idToken]){this.performanceClient.incrementFields({oldITCount:1},i);const y=await this.updateOldEntry(m,i);if(!y){Qa(o.idToken,m);continue}const S=u.find(me=>me.includes(y.homeAccountId)),E=f.find(me=>me.includes(y.homeAccountId));let O=null;if(S)O=this.getAccount(S,i);else if(E){const me=this.browserStorage.getItem(E),ce=this.validateAndParseJson(me||"");O=ce&&zh(ce)?await this.browserStorage.decryptData(E,ce,i):ce}if(!O){this.performanceClient.incrementFields({skipITMigrateCount:1},i);continue}const R=la(y.secret,Ir),B=this.generateCredentialKey(y),V=this.getIdTokenCredential(B,i),J=Object.keys(R).includes("signin_state"),ge=V&&Object.keys(la(V.secret,Ir)||{}).includes("signin_state");if(!V||y.lastUpdatedAt>V.lastUpdatedAt&&(J||!ge)){const me=O.tenantProfiles||[],ce=Qp(R)||O.realm;if(ce&&!me.find(xe=>xe.tenantId===ce)){const xe=Al(O.homeAccountId,O.localAccountId,ce,R);me.push(xe)}O.tenantProfiles=me;const ke=this.generateAccountKey(Xs(O)),Ze=Ys(R);await this.setUserData(ke,JSON.stringify(O),i,O.lastUpdatedAt,Ze),u.includes(ke)||u.push(ke),await this.setUserData(B,JSON.stringify(y),i,y.lastUpdatedAt,Ze),this.performanceClient.incrementFields({migratedITCount:1},i),c.idToken.push(B)}}this.setTokenKeys(o,i,e),this.setTokenKeys(c,i),this.setAccountKeys(u,i)}async migrateAccessTokens(e,n,i){const o=ii(this.clientId,this.browserStorage,e);if(o.accessToken.length===0)return;const c=ii(this.clientId,this.browserStorage,Wn);for(const u of[...o.accessToken]){this.performanceClient.incrementFields({oldATCount:1},i);const f=await this.updateOldEntry(u,i);if(!f){Qa(o.accessToken,u);continue}if(!(f.homeAccountId in n)){this.performanceClient.incrementFields({skipATMigrateCount:1},i);continue}const m=this.generateCredentialKey(f),y=n[f.homeAccountId];if(!c.accessToken.includes(m))await this.setUserData(m,JSON.stringify(f),i,f.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},i),c.accessToken.push(m);else{const S=this.getAccessTokenCredential(m,i);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(f),i,f.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},i))}}this.setTokenKeys(o,i,e),this.setTokenKeys(c,i)}async migrateRefreshTokens(e,n,i){const o=ii(this.clientId,this.browserStorage,e);if(o.refreshToken.length===0)return;const c=ii(this.clientId,this.browserStorage,Wn);for(const u of[...o.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},i);const f=await this.updateOldEntry(u,i);if(!f){Qa(o.refreshToken,u);continue}if(!(f.homeAccountId in n)){this.performanceClient.incrementFields({skipRTMigrateCount:1},i);continue}const m=this.generateCredentialKey(f),y=n[f.homeAccountId];if(!c.refreshToken.includes(m))await this.setUserData(m,JSON.stringify(f),i,f.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},i),c.refreshToken.push(m);else{const S=this.getRefreshTokenCredential(m,i);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(f),i,f.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},i))}}this.setTokenKeys(o,i,e),this.setTokenKeys(c,i)}trackVersionChanges(e){const n=this.browserStorage.getItem(p0);n&&(this.logger.info("1wuc87",e),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==to&&this.setItem(p0,to,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,i){const o=new Array(Wn+1).fill(0),c=[],u=20;for(let f=0;f<=u;f++)try{if(this.browserStorage.setItem(e,n),f>0)for(let m=0;m<=Wn;m++){const y=o.slice(0,m).reduce((E,O)=>E+O,0);if(y>=f)break;const S=f>y+o[m]?y+o[m]:f;f>y&&o[m]>0&&this.removeAccessTokenKeys(c.slice(y,S),i,m)}break}catch(m){const y=hp(m);if(y.errorCode===up&&f<u){if(!c.length)for(let S=0;S<=Wn;S++)if(e===vl(this.clientId,S)){const E=JSON.parse(n).accessToken;c.push(...E),o[S]=E.length}else{const E=this.getTokenKeys(S).accessToken;c.push(...E),o[S]=E.length}if(c.length<=f)throw y;this.removeAccessToken(c[f],i,!1)}else throw y}}async setUserData(e,n,i,o,c){const u=new Array(Wn+1).fill(0),f=[],m=20;for(let y=0;y<=m;y++)try{if(await ue(this.browserStorage.setUserData.bind(this.browserStorage),Rx,this.logger,this.performanceClient,i)(e,n,i,o,c),y>0)for(let S=0;S<=Wn;S++){const E=u.slice(0,S).reduce((R,B)=>R+B,0);if(E>=y)break;const O=y>E+u[S]?E+u[S]:y;y>E&&u[S]>0&&this.removeAccessTokenKeys(f.slice(E,O),i,S)}break}catch(S){const E=hp(S);if(E.errorCode===up&&y<m){if(!f.length)for(let O=0;O<=Wn;O++){const R=this.getTokenKeys(O).accessToken;f.push(...R),u[O]=R.length}if(f.length<=y)throw E;this.removeAccessToken(f[y],i,!1)}else throw E}}getAccount(e,n){this.logger.trace("1lfvm6",n);const i=this.browserStorage.getUserData(e);if(!i)return this.removeAccountKeyFromMap(e,n),null;const o=this.validateAndParseJson(i);if(!o||!V1(o))return null;const c=dp.toObject({},o);return this.performanceClient.addFields({accountCachedBy:iI(c.cachedByApiId)},n),c}async setAccount(e,n,i,o){this.logger.trace("1bz3wr",n);const c=this.generateAccountKey(Xs(e)),u=Date.now().toString();e.lastUpdatedAt=u,e.cachedByApiId=o,await this.setUserData(c,JSON.stringify(e),n,u,i),this.addAccountKeyToMap(c,n),this.performanceClient.addFields({kmsi:i},n)}setAccountKeys(e,n,i=Lh){e.length===0?this.removeItem(yl(i)):this.setItem(yl(i),JSON.stringify(e),n)}getAccountKeys(){return Wa(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("0rb85k",n),this.logger.tracePii("1l9bdo",n);const i=this.getAccountKeys();return i.indexOf(e)===-1?(i.push(e),this.setItem(yl(),JSON.stringify(i),n),this.logger.verbose("0xia39",n),!0):(this.logger.verbose("0161kk",n),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("1jpigu",n),this.logger.tracePii("1xzspl",n);const i=this.getAccountKeys(),o=i.indexOf(e);o>-1?(i.splice(o,1),this.setAccountKeys(i,n)):this.logger.trace("1dytu2",n)}removeAccount(e,n){const i=this.getActiveAccount(n);i?.homeAccountId===e.homeAccountId&&i?.environment===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)})}removeIdToken(e,n){super.removeIdToken(e,n);const i=this.getTokenKeys(),o=i.idToken.indexOf(e);o>-1&&(this.logger.info("05udv9",n),i.idToken.splice(o,1),this.setTokenKeys(i,n))}removeAccessToken(e,n,i=!0){super.removeAccessToken(e,n),i&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,i=Wn){this.logger.trace("17o18n",n);const o=this.getTokenKeys(i);let c=0;if(e.forEach(u=>{const f=o.accessToken.indexOf(u);f>-1&&(o.accessToken.splice(f,1),c++)}),c>0){this.logger.info("15i5d5",n),this.setTokenKeys(o,n,i);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const i=this.getTokenKeys(),o=i.refreshToken.indexOf(e);o>-1&&(this.logger.info("1f4fq3",n),i.refreshToken.splice(o,1),this.setTokenKeys(i,n))}getTokenKeys(e=Wn){return ii(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,i=Wn){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(vl(this.clientId,i));return}else this.setItem(vl(this.clientId,i),JSON.stringify(e),n)}getIdTokenCredential(e,n){const i=this.browserStorage.getUserData(e);if(!i)return this.logger.trace("1jukz6",n),this.removeIdToken(e,n),null;const o=this.validateAndParseJson(i);return!o||!Dx(o)?(this.logger.trace("1jukz6",n),null):(this.logger.trace("01ju66",n),o)}async setIdTokenCredential(e,n,i){this.logger.trace("13hjll",n);const o=this.generateCredentialKey(e),c=Date.now().toString();e.lastUpdatedAt=c,await this.setUserData(o,JSON.stringify(e),n,c,i);const u=this.getTokenKeys();u.idToken.indexOf(o)===-1&&(this.logger.info("07jy92",n),u.idToken.push(o),this.setTokenKeys(u,n))}getAccessTokenCredential(e,n){const i=this.browserStorage.getUserData(e);if(!i)return this.logger.trace("0bqvx8",n),this.removeAccessTokenKeys([e],n),null;const o=this.validateAndParseJson(i);return!o||!V_(o)?(this.logger.trace("0bqvx8",n),null):(this.logger.trace("1o81rl",n),o)}async setAccessTokenCredential(e,n,i){this.logger.trace("1pondb",n);const o=this.generateCredentialKey(e),c=Date.now().toString();e.lastUpdatedAt=c,await this.setUserData(o,JSON.stringify(e),n,c,i);const u=this.getTokenKeys(),f=u.accessToken.indexOf(o);f!==-1&&u.accessToken.splice(f,1),this.logger.trace("1onhey",n),u.accessToken.push(o),this.setTokenKeys(u,n)}getRefreshTokenCredential(e,n){const i=this.browserStorage.getUserData(e);if(!i)return this.logger.trace("0jlizt",n),this.removeRefreshToken(e,n),null;const o=this.validateAndParseJson(i);return!o||!Y_(o)?(this.logger.trace("0jlizt",n),null):(this.logger.trace("0nokxi",n),o)}async setRefreshTokenCredential(e,n,i){this.logger.trace("0tcg8d",n);const o=this.generateCredentialKey(e),c=Date.now().toString();e.lastUpdatedAt=c,await this.setUserData(o,JSON.stringify(e),n,c,i);const u=this.getTokenKeys();u.refreshToken.indexOf(o)===-1&&(this.logger.info("0eckjs",n),u.refreshToken.push(o),this.setTokenKeys(u,n))}getAppMetadata(e,n){const i=this.browserStorage.getItem(e);if(!i)return this.logger.trace("1q101h",n),null;const o=this.validateAndParseJson(i);return!o||!jx(e,o)?(this.logger.trace("1q101h",n),null):(this.logger.trace("19pvg2",n),o)}setAppMetadata(e,n){this.logger.trace("0cyma6",n);const i=Px(e);this.setItem(i,JSON.stringify(e),n)}getServerTelemetry(e,n){const i=this.browserStorage.getItem(e);if(!i)return this.logger.trace("0jk19c",n),null;const o=this.validateAndParseJson(i);return!o||!Ux(e,o)?(this.logger.trace("0jk19c",n),null):(this.logger.trace("12jguk",n),o)}setServerTelemetry(e,n,i){this.logger.trace("1poh61",i),this.setItem(e,JSON.stringify(n),i)}getAuthorityMetadata(e,n){const i=this.internalStorage.getItem(e);if(!i)return this.logger.trace("1r39oe",n),null;const o=this.validateAndParseJson(i);return o&&Lx(e,o)?(this.logger.trace("1ohvk3",n),o):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Ih.WRAPPER_SKU,e),this.internalStorage.setItem(Ih.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Ih.WRAPPER_SKU)||"",n=this.internalStorage.getItem(Ih.WRAPPER_VER)||"";return[e,n]}setAuthorityMetadata(e,n,i){this.logger.trace("07w8n2",i),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(R_.ACTIVE_ACCOUNT_FILTERS),i=this.browserStorage.getItem(n);if(!i)return this.logger.trace("08gw0e",e),null;const o=this.validateAndParseJson(i);return o?(this.logger.trace("1t3ch7",e),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("0me1up",e),null)}setActiveAccount(e,n){const i=this.generateCacheKey(R_.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("0rsj80",n);const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.setItem(i,JSON.stringify(o),n)}else this.logger.verbose("1bp5z5",n),this.browserStorage.removeItem(i);this.eventHandler.emitEvent(We.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e,n){const i=this.browserStorage.getItem(e);if(!i)return this.logger.trace("1h4wa6",n),null;const o=this.validateAndParseJson(i);return!o||!Mx(e,o)?(this.logger.trace("1h4wa6",n),null):(this.logger.trace("0of6n8",n),o)}setThrottlingCache(e,n,i){this.logger.trace("0wfgh6",i),this.setItem(e,JSON.stringify(n),i)}getTemporaryCache(e,n,i){const o=i?this.generateCacheKey(e):e,c=this.temporaryCacheStorage.getItem(o);if(!c){if(this.cacheConfig.cacheLocation===Yr.LocalStorage){const u=this.browserStorage.getItem(o);if(u)return this.logger.trace("1yt61y",n),u}return this.logger.trace("1qhy81",n),null}return c}setTemporaryCache(e,n,i){const o=i?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n)}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e)}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(Fn)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(Fn)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}generateCacheKey(e){return Vr.startsWith(e,Fn)?e:`${Fn}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===Gn.REFRESH_TOKEN&&e.familyId||e.clientId,i=e.tokenType&&e.tokenType.toLowerCase()!==jt.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Fn}.${Wn}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",i].join(g0).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${Fn}.${Lh}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(g0).toLowerCase()}resetRequestCache(e){this.logger.trace("0h0ynu",e),this.removeTemporaryItem(this.generateCacheKey(Cn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Cn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Cn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Cn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Cn.NATIVE_REQUEST)),this.setInteractionInProgress(!1,void 0)}cacheAuthorizeRequest(e,n,i){this.logger.trace("1tzef5",n);const o=Zc(JSON.stringify(e));if(this.setTemporaryCache(Cn.REQUEST_PARAMS,o,!0),i){const c=Zc(i);this.setTemporaryCache(Cn.VERIFIER,c,!0)}}getCachedRequest(e){this.logger.trace("0uen20",e);const n=this.getTemporaryCache(Cn.REQUEST_PARAMS,e,!0);if(!n)throw Ne(SI);const i=this.getTemporaryCache(Cn.VERIFIER,e,!0);let o,c="";try{o=JSON.parse(Ir(n)),i&&(c=Ir(i))}catch{throw this.logger.errorPii("0ewsey",e),this.logger.error("0tvdic",e),Ne(CI)}return[o,c]}getCachedNativeRequest(){this.logger.trace("1yxcdm","");const e=this.getTemporaryCache(Cn.NATIVE_REQUEST,"",!0);if(!e)return this.logger.trace("0mnxd4",""),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("0rrkip",""),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress()?.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${Fn}.${Cn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,"",!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("0jjyys",""),this.removeTemporaryItem(e),this.resetRequestCache(""),bS(window),null}}setInteractionInProgress(e,n=es.SIGNIN,i=!1,o=""){const c=`${Fn}.${Cn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())if(i)this.logger.warning("1pmscr",o),nN(this.logger,o),this.removeTemporaryItem(c);else throw Ne(fI);this.setTemporaryCache(c,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(c)}async hydrateCache(e,n){const i=em(e.account.homeAccountId,e.account.environment,e.idToken,this.clientId,e.tenantId),o=tm(e.account.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?q_(e.expiresOn):0,e.extExpiresOn?q_(e.extExpiresOn):0,Ir,void 0,e.tokenType,void 0,n.sshKid),c={idToken:i,accessToken:o};return this.saveCacheRecord(c,e.correlationId,Ys(la(e.idToken,Ir)),kt.hydrateCache)}async saveCacheRecord(e,n,i,o,c){try{await super.saveCacheRecord(e,n,i,o,c)}catch(u){if(u instanceof gl&&this.performanceClient&&n)try{const f=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:f.refreshToken.length,cacheIdCount:f.idToken.length,cacheAtCount:f.accessToken.length},n)}catch{}throw u}}}function b0(a,e,n,i){try{switch(e){case Yr.LocalStorage:return new eD(a,n,i);case Yr.SessionStorage:return new tD;case Yr.MemoryStorage:default:break}}catch(o){n.error(o,"")}return new Ed}const rD=(a,e,n,i)=>{const o={cacheLocation:Yr.MemoryStorage,cacheRetentionDays:5};return new _p(a,o,Xh,e,n,i)};function iD(a,e,n,i,o){return a.verbose("1yd030",i),n?e.getAllAccounts(o,i):[]}function aD(a,e,n,i){if(e.trace("0u7b90",i),Object.keys(a).length===0)return e.warning("1kz0cu",i),null;const o=n.getAccountInfoFilteredBy(a,i);return o?(e.verbose("0btgll",i),o):(e.verbose("0ltaj5",i),null)}function sD(a,e,n){e.setActiveAccount(a,n)}function oD(a,e){return a.getActiveAccount(e)}const lD="msal.broadcast.event";class cD{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ui({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(lD)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,i){if(typeof window<"u"){const o=i||vp();return this.eventCallbacks.has(o)?(this.logger.error("1578i0",""),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose("1cnec4",""),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("12zotd","")}emitEvent(e,n,i,o){const c={eventType:e,interactionType:n||null,payload:i||null,error:o||null,timestamp:Date.now()};switch(e){case We.LOGIN_SUCCESS:case We.LOGOUT_SUCCESS:case We.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(c)}this.invokeCallbacks(c)}invokeCallbacks(e){this.eventCallbacks.forEach(([n,i],o)=>{(i.length===0||i.includes(e.eventType))&&(this.logger.verbose("15jpwk",""),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class AS{constructor(e,n,i,o,c,u,f,m,y){this.config=e,this.browserStorage=n,this.browserCrypto=i,this.networkClient=this.config.system.networkClient,this.eventHandler=c,this.navigationClient=u,this.platformAuthProvider=y,this.correlationId=m,this.logger=o.clone(Fr.MSAL_SKU,to),this.performanceClient=f}}function id(a,e,n,i){n.verbose("0bd1la",i);const o=a||e||"";return Nt.getAbsoluteUrl(o,ns())}function yr(a,e,n,i,o,c){o.verbose("1p12tq",n);const u={clientId:e,correlationId:n,apiId:a,forceRefresh:!1,wrapperSKU:i.getWrapperMetadata()[0],wrapperVer:i.getWrapperMetadata()[1]};return new Wc(u,i)}async function ca(a,e,n,i,o,c,u,f,m){const y=f&&f.hasOwnProperty("instance_aware")?f.instance_aware:void 0,S={protocolMode:a.system.protocolMode,OIDCOptions:a.auth.OIDCOptions,knownAuthorities:a.auth.knownAuthorities,cloudDiscoveryMetadata:a.auth.cloudDiscoveryMetadata,authorityMetadata:a.auth.authorityMetadata},E=c||a.auth.authority,O=y?.length?y==="true":a.auth.instanceAware,R=m&&O?a.auth.authority.replace(Nt.getDomainFromUrl(E),m.environment):E,B=fr.generateAuthority(R,u||a.auth.azureCloudOptions),V=await ue(eS,EN,o,n,e)(B,a.system.networkClient,i,S,o,e,n);if(m&&!V.isAlias(m.environment))throw Jt(t1);return V}async function bm(a,e,n,i,o){if(o)try{a.removeAccount(o,i),n.verbose("0s4z6h",i)}catch{n.error("0mgg1d",i)}else try{n.verbose("0zj631",i),a.clear(i),await e.clearKeystore(i)}catch{n.error("12ih0c",i)}}async function _m(a,e,n,i,o){const c=a.authority||e.auth.authority,u=[...a&&a.scopes||[]],f={...a,correlationId:a.correlationId,authority:c,scopes:u};if(!f.authenticationScheme)f.authenticationScheme=jt.BEARER,i.verbose("1l4fwv",o);else{if(f.authenticationScheme===jt.SSH){if(!a.sshJwk)throw Jt(Up);if(!a.sshKid)throw Jt(WR)}i.verbose("1ecmns",o)}return f}async function uD(a,e,n,i,o){const c=await ue(_m,pm,o,i,a.correlationId)(a,n,i,o,a.correlationId);return{...a,...c,account:e,forceRefresh:a.forceRefresh||!1}}function kS(a,e){let n;const i=a.httpMethod;if(e===mr.EAR){if(i&&i!==fl.POST)throw Jt(n1);n=fl.POST}else n=i||fl.GET;return n}class Ol extends AS{initializeLogoutRequest(e){this.logger.verbose("0546u4",this.correlationId);const n={correlationId:this.correlationId,...e};if(e)if(e.logoutHint)this.logger.verbose("12k4l4",this.correlationId);else if(e.account){const i=this.getLogoutHintFromIdTokenClaims(e.account);i&&(this.logger.verbose("0st5di",this.correlationId),n.logoutHint=i)}else this.logger.verbose("0pdtc3",this.correlationId);else this.logger.verbose("07ndze",this.correlationId);return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("1vamm6",n.correlationId),n.postLogoutRedirectUri=Nt.getAbsoluteUrl(e.postLogoutRedirectUri,ns())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("15m5g7",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("1f4xlz",n.correlationId),n.postLogoutRedirectUri=Nt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ns())):(this.logger.verbose("17s5rf",n.correlationId),n.postLogoutRedirectUri=Nt.getAbsoluteUrl(ns(),ns())):this.logger.verbose("0ljv63",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("0mvp54",this.correlationId)}else this.logger.verbose("1e7bdp",this.correlationId);return null}async createAuthCodeClient(e){const n=await ue(this.getClientConfiguration.bind(this),Sd,this.logger,this.performanceClient,this.correlationId)(e);return new tS(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:i,requestAzureCloudOptions:o,requestExtraQueryParameters:c,account:u}=e,f=e.authority||await ue(ca,Qs,this.logger,this.performanceClient,this.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,i,o,c,u),m=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:m.loggerCallback,piiLoggingEnabled:m.piiLoggingEnabled,logLevel:m.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Fr.MSAL_SKU,version:to,cpu:"",os:""},telemetry:this.config.telemetry}}}async function Td(a,e,n,i,o,c,u,f){const m=id(a.redirectUri,n.auth.redirectUri,c,f),y={interactionType:e},S=lx(i,a&&a.state||"",y),O={...await ue(_m,pm,c,u,f)({...a,correlationId:f},n,u,c,f),redirectUri:m,state:S,nonce:a.nonce||Zs(),responseMode:n.auth.OIDCOptions.responseMode},R={...O,httpMethod:kS(O,n.system.protocolMode)};if(a.loginHint||a.sid)return R;const B=a.account||o.getActiveAccount(f);return B&&(c.verbose("1eqlb3",f),c.verbosePii("0tf99t",f),R.account=B),R}function hD(a,e){if(!e)return null;try{return ru(a.base64Decode,e).libraryState.meta}catch{throw Se(Jc)}}function qc(a,e,n,i){const o=Jh(a);if(!o)throw Pw(a)?(n.error("13pl0s",i),n.errorPii("1097vx",i),Ne(hI)):(n.error("18h0l1",i),Ne(uI));return o}function dD(a,e,n){if(!a.state)throw Ne(sm);const i=hD(e,a.state);if(!i)throw Ne(lS);if(i.interactionType!==n)throw Ne(dI)}class OS{constructor(e,n,i,o,c){this.authModule=e,this.browserStorage=n,this.authCodeRequest=i,this.logger=o,this.performanceClient=c}async handleCodeResponse(e,n,i){let o;try{o=Jx(e,n.state)}catch(c){throw c instanceof ro&&c.subError===mp?Ne(mp):c}return ue(this.handleCodeResponseFromServer.bind(this),Vw,this.logger,this.performanceClient,n.correlationId)(o,n,i)}async handleCodeResponseFromServer(e,n,i,o=!0){if(this.logger.trace("0mf2hb",n.correlationId),this.authCodeRequest.code=e.code,o&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const u=this.createCcsCredentials(n);u&&(this.authCodeRequest.ccsCredential=u)}return await ue(this.authModule.acquireToken.bind(this.authModule),CN,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,i,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:li.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:li.UPN}:null}}const fD="ContentError",gD="PageException",pD="user_switch";const mD="USER_INTERACTION_REQUIRED",yD="USER_CANCEL",vD="NO_NETWORK",bD="PERSISTENT_ERROR",_D="DISABLED",wD="ACCOUNT_UNAVAILABLE",SD="UX_NOT_ALLOWED";const CD=-2147186943;class Oi extends Vt{constructor(e,n,i){super(e,n||_d(e)),Object.setPrototypeOf(this,Oi.prototype),this.name="NativeAuthError",this.ext=i}}function cl(a){if(a.ext&&a.ext.status&&(a.ext.status===bD||a.ext.status===_D)||a.ext&&a.ext.error&&a.ext.error===CD)return!0;switch(a.errorCode){case fD:case gD:return!0;default:return!1}}function ad(a,e,n){if(n&&n.status)switch(n.status){case wD:return ed(rx,_d(a));case mD:return new hi(a,e);case yD:return Ne(mp);case vD:return Ne(yp);case SD:return ed(Fw)}return new Oi(a,e,n)}class RS extends Ol{async acquireToken(e){const n=yr(kt.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),i=await ue(this.getClientConfiguration.bind(this),Sd,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Vx(i,this.performanceClient);this.logger.verbose("0wa871",this.correlationId);try{const u=(await ue(o.acquireCachedToken.bind(o),_N,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),u}catch(c){throw c instanceof au&&c.errorCode===uS&&this.logger.verbose("06wena",this.correlationId),c}}logout(e){this.logger.verbose("1rkurh",this.correlationId);const n=this.initializeLogoutRequest(e);return bm(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account)}}class Hh extends AS{constructor(e,n,i,o,c,u,f,m,y,S,E,O){super(e,n,i,o,c,u,m,O,y),this.apiId=f,this.accountId=S,this.platformAuthProvider=y,this.nativeStorageManager=E,this.silentCacheClient=new RS(e,this.nativeStorageManager,i,o,c,u,m,O,y);const R=this.platformAuthProvider.getExtensionName();this.skus=Wc.makeExtraSkuString({libraryName:Fr.MSAL_SKU,libraryVersion:to,extensionName:R,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[BR]:this.skus}}async acquireToken(e,n){this.logger.trace("03qeos",this.correlationId);const i=this.performanceClient.startMeasurement(CS,e.correlationId),o=di(),c=yr(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const u=await this.initializeNativeRequest(e);try{const m=await this.acquireTokensFromCache(this.accountId,u);return i.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch(m){if(n===ar.AccessToken)throw this.logger.info("0eitbc",this.correlationId),m;this.logger.info("0957j1",this.correlationId)}const f=await this.platformAuthProvider.sendMessage(u);return await this.handleNativeResponse(f,u,o).then(m=>(i.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),c.clearNativeBrokerErrorCode(),m)).catch(m=>{throw i.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError,isNativeBroker:!0}),m})}catch(u){throw u instanceof Oi&&c.setNativeBrokerErrorCode(u.errorCode),u}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Zn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("1ndf3e",this.correlationId),Se(M_);const i=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},n.correlationId);if(!i)throw Se(M_);try{const o=this.createSilentCacheRequest(n,i),c=await this.silentCacheClient.acquireToken(o),u={...i,idTokenClaims:c?.idTokenClaims,idToken:c?.idToken};return{...c,account:u}}catch(o){throw o}}async acquireTokenRedirect(e,n,i){this.logger.trace("0luikq",this.correlationId);const o=await this.initializeNativeRequest(e),c=i?.navigateToLoginRequestUrl??!0;try{await this.platformAuthProvider.sendMessage(o)}catch(m){if(m instanceof Oi&&(yr(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).setNativeBrokerErrorCode(m.errorCode),cl(m)))throw m}this.browserStorage.setTemporaryCache(Cn.NATIVE_REQUEST,JSON.stringify(o),!0);const u={apiId:kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=c?window.location.href:id(e.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId);n.end({success:!0}),await this.navigationClient.navigateExternal(f,u)}async handleRedirectPromise(e,n){if(this.logger.trace("1c5lhw",this.correlationId),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",this.correlationId),null;const i=this.browserStorage.getCachedNativeRequest();if(!i)return this.logger.verbose("0a6zjb",this.correlationId),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:o,...c}=i;o&&this.logger.verbose("0ac34v",this.correlationId),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.NATIVE_REQUEST));const u=di();try{this.logger.verbose("003x5a",this.correlationId);const f=await this.platformAuthProvider.sendMessage(c),m=await this.handleNativeResponse(f,c,u);return yr(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).clearNativeBrokerErrorCode(),m}catch(f){throw f}}logout(){return this.logger.trace("0u2sjm",this.correlationId),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,i){this.logger.trace("1bojln",this.correlationId);const o=la(e.id_token,Ir),c=this.createHomeAccountIdentifier(e,o),u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId)?.homeAccountId;if(n.extraParameters?.child_client_id&&e.account.id!==n.accountId)this.logger.info("1ub1in",this.correlationId);else if(c!==u&&e.account.id!==n.accountId)throw ad(pD);const f=await ca(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,n.authority),m=Yw(this.browserStorage,f,c,Ir,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id);e.expires_in=Number(e.expires_in);const y=await this.generateAuthenticationResult(e,n,o,m,f.canonicalAuthority,i);return await this.cacheAccount(m,Ys(o)),await this.cacheNativeTokens(e,n,c,o,e.access_token,y.tenantId,i),y}createHomeAccountIdentifier(e,n){return Hw(e.client_info||"",oi.Default,this.logger,this.browserCrypto,this.correlationId,n)}generateScopes(e,n){return n?Zn.fromString(n):Zn.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===jt.POP&&n.signPopToken){if(e.shr)return this.logger.trace("0coqhu",this.correlationId),e.shr;const i=new _l(this.browserCrypto,this.performanceClient),o={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce,correlationId:this.correlationId};if(!n.keyId)throw Se(Aw);return i.signPopToken(e.access_token,n.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,n,i,o,c,u){const f=this.addTelemetryFromNativeResponse(e.properties.MATS),m=this.generateScopes(n.scope,e.scope),y=e.account.properties||{},S=y.UID||i.oid||i.sub||"",E=y.TenantId||i.tid||"",O=Vp(Xs(o),void 0,i,e.id_token);O.nativeAccountId!==e.account.id&&(O.nativeAccountId=e.account.id);const R=await this.generatePopAccessToken(e,n),B=n.tokenType===jt.POP?jt.POP:jt.BEARER;return{authority:c,uniqueId:S,tenantId:E,scopes:m.asArray(),account:O,idToken:e.id_token,idTokenClaims:i,accessToken:R,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Ph(u+e.expires_in),tokenType:B,correlationId:this.correlationId,state:e.state,fromPlatformBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId,n,this.apiId),this.browserStorage.removeAccountContext(Xs(e),this.correlationId)}cacheNativeTokens(e,n,i,o,c,u,f){const m=em(i,n.authority,e.id_token||"",n.clientId,o.tid||""),y=n.tokenType===jt.POP?T_:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=f+y,E=this.generateScopes(e.scope,n.scope),O=tm(i,n.authority,c,n.clientId,o.tid||u,E.printScopes(),S,0,Ir,void 0,n.tokenType,void 0,n.keyId),R={idToken:m,accessToken:O};return this.nativeStorageManager.saveCacheRecord(R,this.correlationId,Ys(o),this.apiId,n.storeInCache)}getExpiresInValue(e,n){return e===jt.POP?T_:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("0b3l57",this.correlationId)}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("1okqev",this.correlationId),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("04j6wj",this.correlationId);const n=await this.getCanonicalAuthority(e),{scopes:i,...o}=e,c=new Zn(i||[]);c.appendScopes(Tl);const u={...o,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:c.printScopes(),redirectUri:id(e.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraParameters},extendedExpiryToken:!1,keyId:e.popKid};if(u.signPopToken&&e.popKid)throw Ne(UI);if(this.handleExtraBrokerParams(u),u.extraParameters=u.extraParameters||{},u.extraParameters.telemetry=$r.MATS_TELEMETRY,e.authenticationScheme===jt.POP){const f={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce,correlationId:this.correlationId},m=new _l(this.browserCrypto,this.performanceClient);let y;if(u.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:u.keyId})),u.signPopToken=!1;else{const S=await ue(m.generateCnf.bind(m),iu,this.logger,this.performanceClient,this.correlationId)(f,this.logger);y=S.reqCnfString,u.keyId=S.kid,u.signPopToken=!0}u.reqCnf=y}return this.addRequestSKUs(u),u}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority,{azureCloudOptions:i,account:o}=e;o&&await ca(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,n,i,void 0,o);const c=new Nt(n);return c.validateAsUri(),c}getPrompt(e){switch(this.apiId){case kt.ssoSilent:case kt.acquireTokenSilent_silentFlow:return this.logger.trace("1hiwaz",this.correlationId),pr.NONE}if(!e){this.logger.trace("1qlu04",this.correlationId);return}switch(e){case pr.NONE:case pr.CONSENT:case pr.LOGIN:return this.logger.trace("1ynje4",this.correlationId),e;default:throw this.logger.trace("0nkr6q",this.correlationId),Ne(NI)}}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Vh)&&e.extraParameters.hasOwnProperty(Yh)&&e.extraParameters.hasOwnProperty(Js);if(!e.embeddedClientId&&!n)return;let i="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,i=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Yh],i=e.extraParameters[Js]),e.extraParameters={child_client_id:i,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:i,embeddedRedirectUri:o},e.correlationId)}}async function wm(a,e,n,i,o){const c=Qx({...a.auth,authority:e},n,i,o);if(Bp(c,{sku:Fr.MSAL_SKU,version:to,os:"",cpu:""}),a.system.protocolMode!==mr.OIDC&&Kp(c,a.telemetry.application),n.platformBroker&&(w1(c),n.authenticationScheme===jt.POP)){const u=new ua(i,o),f=new _l(u,o);let m;n.popKid?m=u.encodeKid(n.popKid):m=(await ue(f.generateCnf.bind(f),iu,i,o,n.correlationId)(n,i)).reqCnfString,Fp(c,m)}return fd(c,n.correlationId,o),c}async function Sm(a,e,n,i,o){if(!n.codeChallenge)throw Jt(vw);const c=await ue(wm,wN,i,o,n.correlationId)(a,e,n,i,o);return Mp(c,Op.CODE),qp(c,n.codeChallenge,kp),Ri(c,{...n.extraQueryParameters,...n.extraParameters}),nm(e,c)}async function Cm(a,e,n,i,o,c){if(!i.earJwk)throw Ne(oS);const u=await wm(e,n,i,o,c);Mp(u,Op.IDTOKEN_TOKEN_REFRESHTOKEN),N1(u,i.earJwk),qp(u,i.codeChallenge,kp),Ri(u,{...i.extraParameters});const f=new Map;Ri(f,i.extraQueryParameters||{});const m=nm(n,f);return xS(a,m,u)}async function Em(a,e,n,i,o,c){const u=await wm(e,n,i,o,c);Mp(u,Op.CODE),qp(u,i.codeChallenge,i.codeChallengeMethod||kp),Ri(u,{...i.extraParameters});const f=new Map;Ri(f,i.extraQueryParameters||{});const m=nm(n,f);return xS(a,m,u)}function xS(a,e,n){const i=a.createElement("form");return i.method="post",i.action=e,n.forEach((o,c)=>{const u=a.createElement("input");u.hidden=!0,u.name=c,u.value=o,i.appendChild(u)}),a.body.appendChild(i),i}async function IS(a,e,n,i,o,c,u,f,m,y){if(f.verbose("11qcow",a.correlationId),!y)throw Ne(dS);const S=new ua(f,m),E=new Hh(i,o,S,f,u,i.system.navigationClient,n,m,y,e,c,a.correlationId),{userRequestState:O}=ru(S.base64Decode,a.state);return ue(E.acquireToken.bind(E),CS,f,m,a.correlationId)({...a,state:O,prompt:void 0})}async function bl(a,e,n,i,o,c,u,f,m,y,S,E){if(ki.removeThrottle(u,o.auth.clientId,a),e.accountId)return ue(IS,ES,y,S,a.correlationId)(a,e.accountId,i,o,u,f,m,y,S,E);const O={...a,code:e.code||"",codeVerifier:n},R=new OS(c,u,O,y,S);return await ue(R.handleCodeResponse.bind(R),SN,y,S,a.correlationId)(e,a,i)}async function Tm(a,e,n,i,o,c,u,f,m,y,S){if(ki.removeThrottle(c,i.auth.clientId,a),nS(e,a.state),!e.ear_jwe)throw Ne(cI);if(!a.earJwk)throw Ne(oS);const E=JSON.parse(await ue(QI,LN,m,y,a.correlationId)(a.earJwk,e.ear_jwe));if(E.accountId)return ue(IS,ES,m,y,a.correlationId)(a,E.accountId,n,i,c,u,f,m,y,S);const O=new Ws(i.auth.clientId,c,new ua(m,y),m,y,null,null);O.validateTokenResponse(E,a.correlationId);const R={code:"",state:a.state,nonce:a.nonce,client_info:E.client_info,cloud_graph_host_name:E.cloud_graph_host_name,cloud_instance_host_name:E.cloud_instance_host_name,cloud_instance_name:E.cloud_instance_name,msgraph_host:E.msgraph_host};return await ue(O.handleServerTokenResponse.bind(O),Zp,m,y,a.correlationId)(E,o,di(),a,n,R,void 0,void 0,void 0,void 0)}const ED=32;async function no(a,e,n){const i=ci(TD,xN,e,a,n)(a,e,n),o=await ue(AD,IN,e,a,n)(i,a,e,n);return{verifier:i,challenge:o}}function TD(a,e,n){try{const i=new Uint8Array(ED);return ci(GI,DN,e,a,n)(i),ss(i)}catch{throw Ne(sS)}}async function AD(a,e,n,i){try{const o=await ue(pS,NN,n,e,i)(a);return ss(new Uint8Array(o))}catch{throw Ne(sS)}}class sd{navigateInternal(e,n){return sd.defaultNavigateWindow(e,n)}navigateExternal(e,n){return sd.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((i,o)=>{setTimeout(()=>{o(Ne(nd,"failed_to_redirect"))},n.timeout)})}}class kD{async sendGetRequestAsync(e,n){let i,o={},c=0;const u=_0(n);try{i=await fetch(e,{method:Z_.GET,headers:u})}catch(f){throw Lc(Ne(window.navigator.onLine?TI:yp),void 0,void 0,f)}o=w0(i.headers);try{return c=i.status,{headers:o,body:await i.json(),status:c}}catch(f){throw Lc(Ne(r0),c,o,f)}}async sendPostRequestAsync(e,n){const i=n&&n.body||"",o=_0(n);let c,u=0,f={};try{c=await fetch(e,{method:Z_.POST,headers:o,body:i})}catch(m){throw Lc(Ne(window.navigator.onLine?EI:yp),void 0,void 0,m)}f=w0(c.headers);try{return u=c.status,{headers:f,body:await c.json(),status:u}}catch(m){throw Lc(Ne(r0),u,f,m)}}}function _0(a){try{const e=new Headers;if(!(a&&a.headers))return e;const n=a.headers;return Object.entries(n).forEach(([i,o])=>{e.append(i,o)}),e}catch(e){throw Lc(Ne(MI),void 0,void 0,e)}}function w0(a){try{const e={};return a.forEach((n,i)=>{e[i]=n}),e}catch{throw Ne(PI)}}const OD=6e4,RD=1e4,xD=3e4,NS=2e3;function ID({auth:a,cache:e,system:n,telemetry:i},o){const c={clientId:"",authority:`${iw}`,knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",redirectUri:typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:"",postLogoutRedirectUri:"",clientCapabilities:[],OIDCOptions:{responseMode:Rp.FRAGMENT,defaultScopes:[sw,ow,Ap]},azureCloudOptions:{azureCloudInstance:$p.None,tenant:""},instanceAware:!1},u={cacheLocation:Yr.SessionStorage,cacheRetentionDays:5},f={loggerCallback:()=>{},logLevel:rn.Info,piiLoggingEnabled:!1},y={...{...Kw,loggerOptions:f,networkClient:o?new kD:Yx,navigationClient:new sd,popupBridgeTimeout:n?.popupBridgeTimeout||OD,iframeBridgeTimeout:n?.iframeBridgeTimeout||RD,redirectNavigationTimeout:xD,allowRedirectInIframe:!1,navigatePopups:!0,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||NS,protocolMode:mr.AAD},...n,loggerOptions:n?.loggerOptions||f},S={application:{appName:"",appVersion:""},client:new Bw};if(n?.protocolMode!==mr.OIDC&&a?.OIDCOptions&&new ui(y.loggerOptions).warning(JSON.stringify(Jt(ZR)),""),n?.protocolMode&&n.protocolMode===mr.OIDC&&y?.allowPlatformBroker)throw Jt(e1);return{auth:{...c,...a,OIDCOptions:{...c.OIDCOptions,...a?.OIDCOptions}},cache:{...u,...e},system:y,telemetry:{...S,...i}}}class od{constructor(e,n,i,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=i,this.handshakeEvent=i.startMeasurement(ON),this.platformAuthType=$r.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace("0on4p2",e.correlationId);const n={method:Uc.GetToken,request:e},i={channel:$r.CHANNEL_ID,extensionId:this.extensionId,responseId:Zs(),body:n};this.logger.trace("1qadfi",e.correlationId),this.logger.tracePii("1xm533",e.correlationId),this.messageChannel.port1.postMessage(i);const o=await new Promise((u,f)=>{this.resolvers.set(i.responseId,{resolve:u,reject:f})});return this.validatePlatformBrokerResponse(o)}static async createProvider(e,n,i,o){e.trace("15zfnw",o);try{const c=new od(e,n,i,$r.PREFERRED_EXTENSION_ID);return await c.sendHandshakeRequest(o),c}catch{const u=new od(e,n,i);return await u.sendHandshakeRequest(o),u}}async sendHandshakeRequest(e){this.logger.trace("1dpg9o",e),window.addEventListener("message",this.windowListener,!1);const n={channel:$r.CHANNEL_ID,extensionId:this.extensionId,responseId:Zs(),body:{method:Uc.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=i=>{this.onChannelMessage(i)},window.postMessage(n,window.origin,[this.messageChannel.port2]),new Promise((i,o)=>{this.handshakeResolvers.set(n.responseId,{resolve:i,reject:o}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(Ne(xI)),this.handshakeResolvers.delete(n.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){const n=vp();if(this.logger.trace("0jpn5u",n),e.source!==window)return;const i=e.data;if(!(!i.channel||i.channel!==$r.CHANNEL_ID)&&!(i.extensionId&&i.extensionId!==this.extensionId)&&i.body.method===Uc.HandshakeRequest){const o=this.handshakeResolvers.get(i.responseId);if(!o){this.logger.trace("07buhm",n);return}this.logger.verbose(i.extensionId?"0xrkug":"No extension installed",n),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),o.reject(Ne(II))}}onChannelMessage(e){const n=vp();this.logger.trace("1py8yf",n);const i=e.data,o=this.resolvers.get(i.responseId),c=this.handshakeResolvers.get(i.responseId);try{const u=i.body.method;if(u===Uc.Response){if(!o)return;const f=i.body.response;if(this.logger.trace("19hpgm",n),this.logger.tracePii("179a24",n),f.status!=="Success")o.reject(ad(f.code,f.description,f.ext));else if(f.result)f.result.code&&f.result.description?o.reject(ad(f.result.code,f.result.description,f.result.ext)):o.resolve(f.result);else throw cp(gp,"Event does not contain result.");this.resolvers.delete(i.responseId)}else if(u===Uc.HandshakeResponse){if(!c){this.logger.trace("082qnt",n);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=i.extensionId,this.extensionVersion=i.body.version,this.logger.verbose("0yf5ib",n),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),c.resolve(),this.handshakeResolvers.delete(i.responseId)}}catch(u){this.logger.error("0xf978",n),this.logger.errorPii("04i99o",n),this.logger.errorPii("0xdvsy",n),o?o.reject(u):c&&c.reject(u)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw cp(gp,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===$r.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Am{constructor(e,n,i){this.logger=e,this.performanceClient=n,this.correlationId=i,this.platformAuthType=$r.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,i){if(e.trace("12mj4a",i),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts($r.MICROSOFT_ENTRA_BROKERID))?.includes($r.PLATFORM_DOM_APIS))return e.trace("1h5q1r",i),new Am(e,n,i)}getExtensionId(){return $r.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return $r.DOM_API_NAME}async sendMessage(e){this.logger.trace("02bcil",e.correlationId);try{const n=this.initializePlatformDOMRequest(e),i=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(i,e.correlationId)}catch(n){throw this.logger.error("11im7g",e.correlationId),n}}initializePlatformDOMRequest(e){this.logger.trace("15d6yv",e.correlationId);const{accountId:n,clientId:i,authority:o,scope:c,redirectUri:u,correlationId:f,state:m,storeInCache:y,embeddedClientId:S,extraParameters:E,...O}=e,R=this.getDOMExtraParams(O);return{accountId:n,brokerId:this.getExtensionId(),authority:o,clientId:i,correlationId:f||this.correlationId,extraParameters:{...E,...R},isSecurityTokenService:!1,redirectUri:u,scope:c,state:m,storeInCache:y,embeddedClientId:S}}validatePlatformBrokerResponse(e,n){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace("0h4vei",n),this.convertToPlatformBrokerResponse(e,n);if(e.hasOwnProperty("error")){const i=e;if(i.isSuccess===!1&&i.error&&i.error.code)throw this.logger.trace("0g92vm",n),ad(i.error.code,i.error.description,{error:parseInt(i.error.errorCode),protocol_error:i.error.protocolError,status:i.error.status,properties:i.error.properties})}}throw cp(gp,"Response missing expected properties.")}convertToPlatformBrokerResponse(e,n){return this.logger.trace("14913t",n),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((o,[c,u])=>(o[c]=String(u),o),{})}}}async function ND(a,e,n,i){a.trace("134j0v",n);const o=DD();a.trace("04c81g",n);let c;try{o&&(c=await Am.createProvider(a,e,n)),c||(a.trace("0l3na8",n),c=await od.createProvider(a,i||NS,e,n))}catch(u){a.trace("0icbd7",u)}return c}function DD(){let a;try{return a=window[Yr.SessionStorage],a?.getItem(JN)==="true"}catch{return!1}}function eu(a,e,n,i,o){if(e.trace("0uko3r",n),!a.system.allowPlatformBroker)return e.trace("04hozs",n),!1;if(!i)return e.trace("0kvv1r",n),!1;if(o)switch(o){case jt.BEARER:case jt.POP:return e.trace("18tev1",n),!0;default:return e.trace("1dd2nh",n),!1}return!0}class UD extends Ol{constructor(e,n,i,o,c,u,f,m,y,S){super(e,n,i,o,c,u,f,y,S),this.nativeStorage=m,this.eventHandler=c}acquireToken(e,n){let i;try{if(i={popupName:this.generatePopupName(e.scopes||Tl,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:!this.config.system.navigatePopups},this.correlationId),this.config.system.navigatePopups){const c={...e,httpMethod:kS(e,this.config.system.protocolMode)};return this.logger.verbose("1f9ok3",this.correlationId),i.popup=this.openSizedPopup("about:blank",i),this.acquireTokenPopupAsync(c,i,n)}else return this.logger.verbose("162h4u",this.correlationId),this.acquireTokenPopupAsync(e,i,n)}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("068rup",this.correlationId);const n=this.initializeLogoutRequest(e),i={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,c=e&&e.mainWindowRedirectUri;return this.config.system.navigatePopups?(this.logger.verbose("1a28da",this.correlationId),i.popup=this.openSizedPopup("about:blank",i),this.logoutPopupAsync(n,i,o,c)):(this.logger.verbose("1phd8u",this.correlationId),this.logoutPopupAsync(n,i,o,c))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,i){this.logger.verbose("1g77pg",this.correlationId);const o=await ue(Td,Cd,this.logger,this.performanceClient,this.correlationId)(e,tt.Popup,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);n.popup&&SS(o.authority);const c=eu(this.config,this.logger,this.correlationId,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=c,this.config.system.protocolMode===mr.EAR?this.executeEarFlow(o,n,i):this.executeCodeFlow(o,n,i)}async executeCodeFlow(e,n,i){const o=e.correlationId,c=yr(kt.acquireTokenPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),u=i||await ue(no,eo,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),f={...e,codeChallenge:u.challenge};try{const m=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,o)({serverTelemetryManager:c,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===fl.POST)return await this.executeCodeFlowWithPost(f,n,m,u.verifier);{const y=await ue(Sm,Wp,this.logger,this.performanceClient,o)(this.config,m.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(y,n);this.eventHandler.emitEvent(We.POPUP_OPENED,tt.Popup,{popupWindow:S},null);const E=await hl(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,e),O=ci(qc,Kc,this.logger,this.performanceClient,this.correlationId)(E,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return await ue(bl,ml,this.logger,this.performanceClient,o)(e,O,u.verifier,kt.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw n.popup?.close(),m instanceof Vt&&(m.setCorrelationId(this.correlationId),c.cacheFailedRequest(m)),m}}async executeEarFlow(e,n,i){const{correlationId:o,authority:c,azureCloudOptions:u,extraQueryParameters:f,account:m}=e,y=await ue(ca,Qs,this.logger,this.performanceClient,o)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,c,u,f,m),S=await ue(dm,ym,this.logger,this.performanceClient,o)(),E=i||await ue(no,eo,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),O={...e,earJwk:S,codeChallenge:E.challenge},R=n.popup||this.openPopup("about:blank",n);(await Cm(R.document,this.config,y,O,this.logger,this.performanceClient)).submit();const V=await ue(hl,rd,this.logger,this.performanceClient,o)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,O),J=ci(qc,Kc,this.logger,this.performanceClient,this.correlationId)(V,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);if(!J.ear_jwe&&J.code){const ge=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,o)({serverTelemetryManager:yr(kt.acquireTokenPopup,this.config.auth.clientId,o,this.browserStorage,this.logger),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:y});return ue(bl,ml,this.logger,this.performanceClient,o)(O,J,E.verifier,kt.acquireTokenPopup,this.config,ge,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return ue(Tm,mm,this.logger,this.performanceClient,o)(O,J,kt.acquireTokenPopup,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,i,o){const c=e.correlationId,u=await ue(ca,Qs,this.logger,this.performanceClient,c)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger),f=n.popup||this.openPopup("about:blank",n);(await Em(f.document,this.config,u,e,this.logger,this.performanceClient)).submit();const y=await ue(hl,rd,this.logger,this.performanceClient,c)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,e),S=ci(qc,Kc,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return ue(bl,ml,this.logger,this.performanceClient,c)(e,S,o,kt.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,i,o){this.logger.verbose("0b7yrk",this.correlationId),this.eventHandler.emitEvent(We.LOGOUT_START,tt.Popup,e);const c=yr(kt.logoutPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{await bm(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,e.account);const u=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:i,account:e.account||void 0});try{u.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===mr.OIDC){if(this.eventHandler.emitEvent(We.LOGOUT_SUCCESS,tt.Popup,e),o){const y={apiId:kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Nt.getAbsoluteUrl(o,ns());await this.navigationClient.navigateInternal(S,y)}n.popup?.close();return}}const f=u.getLogoutUri(e);this.eventHandler.emitEvent(We.LOGOUT_SUCCESS,tt.Popup,e);const m=this.openPopup(f,n);if(this.eventHandler.emitEvent(We.POPUP_OPENED,tt.Popup,{popupWindow:m},null),await hl(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,e).catch(()=>{}),o){const y={apiId:kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Nt.getAbsoluteUrl(o,ns());this.logger.verbose("0qcur2",this.correlationId),this.logger.verbosePii("0oj7lk",this.correlationId),await this.navigationClient.navigateInternal(S,y)}else this.logger.verbose("03zgcf",this.correlationId)}catch(u){throw n.popup?.close(),u instanceof Vt&&(u.setCorrelationId(this.correlationId),c.cacheFailedRequest(u)),this.eventHandler.emitEvent(We.LOGOUT_FAILURE,tt.Popup,null,u),this.eventHandler.emitEvent(We.LOGOUT_END,tt.Popup),u}this.eventHandler.emitEvent(We.LOGOUT_END,tt.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii("1kcr9k",this.correlationId),this.openPopup(e,n);throw this.logger.error("1l7hyp",this.correlationId),Ne(am)}openPopup(e,n){try{let i;if(n.popup?(i=n.popup,this.logger.verbosePii("0cgeo7",this.correlationId),i.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii("0c2awd",this.correlationId),i=this.openSizedPopup(e,n)),!i)throw Ne(mI);return i.focus&&i.focus(),this.currentWindow=i,i}catch{throw this.logger.error("0dxfb9",this.correlationId),Ne(pI)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:i,popupWindowParent:o}){const c=o.screenLeft?o.screenLeft:o.screenX,u=o.screenTop?o.screenTop:o.screenY,f=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=i.popupSize?.width,S=i.popupSize?.height,E=i.popupPosition?.top,O=i.popupPosition?.left;return(!y||y<0||y>f)&&(this.logger.verbose("08vfmo",this.correlationId),y=Fr.POPUP_WIDTH),(!S||S<0||S>m)&&(this.logger.verbose("09cxa0",this.correlationId),S=Fr.POPUP_HEIGHT),(!E||E<0||E>m)&&(this.logger.verbose("1qh4wo",this.correlationId),E=Math.max(0,m/2-Fr.POPUP_HEIGHT/2+u)),(!O||O<0||O>f)&&(this.logger.verbose("1sz3en",this.correlationId),O=Math.max(0,f/2-Fr.POPUP_WIDTH/2+c)),o.open(e,n,`width=${y}, height=${S}, top=${E}, left=${O}, scrollbars=yes`)}generatePopupName(e,n){return`${Fr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Fr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}function MD(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const a=window.performance.getEntriesByType("navigation");return(a.length?a[0]:void 0)?.type}class PD extends Ol{constructor(e,n,i,o,c,u,f,m,y,S){super(e,n,i,o,c,u,f,y,S),this.nativeStorage=m}async acquireToken(e){const n=await ue(Td,Cd,this.logger,this.performanceClient,this.correlationId)(e,tt.Redirect,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);n.platformBroker=eu(this.config,this.logger,this.correlationId,this.platformAuthProvider,e.authenticationScheme);const i=c=>{c.persisted&&(this.logger.verbose("0udvtt",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),this.eventHandler.emitEvent(We.RESTORE_FROM_BFCACHE,tt.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("0zao0a",this.correlationId),this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,o,!0),window.addEventListener("pageshow",i);try{this.config.system.protocolMode===mr.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n)}catch(c){throw c instanceof Vt&&c.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",i),c}}async executeCodeFlow(e){const n=e.correlationId,i=yr(kt.acquireTokenRedirect,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),o=await ue(no,eo,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),c={...e,codeChallenge:o.challenge};this.browserStorage.cacheAuthorizeRequest(c,this.correlationId,o.verifier);try{if(c.httpMethod===fl.POST)return await this.executeCodeFlowWithPost(c);{const u=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),f=await ue(Sm,Wp,this.logger,this.performanceClient,e.correlationId)(this.config,u.authority,c,this.logger,this.performanceClient);return await this.initiateAuthRequest(f)}}catch(u){throw u instanceof Vt&&(u.setCorrelationId(this.correlationId),i.cacheFailedRequest(u)),u}}async executeEarFlow(e){const{correlationId:n,authority:i,azureCloudOptions:o,extraQueryParameters:c,account:u}=e,f=await ue(ca,Qs,this.logger,this.performanceClient,n)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,i,o,c,u),m=await ue(dm,ym,this.logger,this.performanceClient,n)(),y=await ue(no,eo,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),S={...e,earJwk:m,codeChallenge:y.challenge};return this.browserStorage.cacheAuthorizeRequest(S,this.correlationId,y.verifier),(await Cm(document,this.config,f,S,this.logger,this.performanceClient)).submit(),new Promise((O,R)=>{setTimeout(()=>{R(Ne(nd,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,i=await ue(ca,Qs,this.logger,this.performanceClient,n)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger);return this.browserStorage.cacheAuthorizeRequest(e,this.correlationId),(await Em(document,this.config,i,e,this.logger,this.performanceClient)).submit(),new Promise((c,u)=>{setTimeout(()=>{u(Ne(nd,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e,n,i,o){const c=yr(kt.handleRedirectPromise,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),u=o?.navigateToLoginRequestUrl??!0;try{const[f,m]=this.getRedirectResponse(o?.hash||"");if(!f)return this.logger.info("1qmv0q",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),MD()!=="back_forward"?i.event.errorCode="no_server_response":this.logger.verbose("1eqegq",this.correlationId),null;const y=this.browserStorage.getTemporaryCache(Cn.ORIGIN_URI,this.correlationId,!0)||"",S=L_(y),E=L_(window.location.href);if(S===E&&u)return this.logger.verbose("11yred",this.correlationId),y.indexOf("#")>-1&&eN(y),await this.handleResponse(f,e,n,c);if(u){if(!wd()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Cn.URL_HASH,m,!0);const O={apiId:kt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let R=!0;if(!y||y==="null"){const B=rN();this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,B,!0),this.logger.warning("1dutq1",this.correlationId),R=await this.navigationClient.navigateInternal(B,O)}else this.logger.verbose("08jpy1",this.correlationId),R=await this.navigationClient.navigateInternal(y,O);if(!R)return await this.handleResponse(f,e,n,c)}}else return this.logger.verbose("0v4sdv",this.correlationId),await this.handleResponse(f,e,n,c);return null}catch(f){throw f instanceof Vt&&(f.setCorrelationId(this.correlationId),c.cacheFailedRequest(f)),f}}getRedirectResponse(e){this.logger.verbose("1c5i8m",this.correlationId);let n=e;n||(this.config.auth.OIDCOptions.responseMode===Rp.QUERY?n=window.location.search:n=window.location.hash);let i=Jh(n);if(i){try{dD(i,this.browserCrypto,tt.Redirect)}catch(c){return c instanceof Vt&&this.logger.error("0bkq6p",this.correlationId),[null,""]}return bS(window),this.logger.verbose("00uvho",this.correlationId),[i,n]}const o=this.browserStorage.getTemporaryCache(Cn.URL_HASH,this.correlationId,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.URL_HASH)),o&&(i=Jh(o),i)?(this.logger.verbose("001671",this.correlationId),[i,o]):[null,""]}async handleResponse(e,n,i,o){if(!e.state)throw Ne(sm);const{authority:u,azureCloudOptions:f,extraQueryParameters:m,account:y}=n;if(e.ear_jwe){const E=await ue(ca,Qs,this.logger,this.performanceClient,n.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,u,f,m,y);return ue(Tm,mm,this.logger,this.performanceClient,n.correlationId)(n,e,kt.acquireTokenRedirect,this.config,E,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const S=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority});return ue(bl,ml,this.logger,this.performanceClient,n.correlationId)(n,e,i,kt.acquireTokenRedirect,this.config,S,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e){if(this.logger.verbose("0yaw2e",this.correlationId),e){this.logger.infoPii("1luf83",this.correlationId);const n={apiId:kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.onRedirectNavigate;if(typeof i=="function")if(this.logger.verbose("1nehvl",this.correlationId),i(e)!==!1){this.logger.verbose("1a0jxh",this.correlationId),await this.navigationClient.navigateExternal(e,n);return}else{this.logger.verbose("09k5h5",this.correlationId);return}else{this.logger.verbose("0klwf7",this.correlationId),await this.navigationClient.navigateExternal(e,n);return}}else throw this.logger.info("0rlh4e",this.correlationId),Ne(am)}async logout(e){this.logger.verbose("1rkurh",this.correlationId);const n=this.initializeLogoutRequest(e),i=yr(kt.logout,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{this.eventHandler.emitEvent(We.LOGOUT_START,tt.Redirect,e),await bm(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account);const o={apiId:kt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===mr.OIDC)try{c.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId){this.eventHandler.emitEvent(We.LOGOUT_SUCCESS,tt.Redirect,n);return}}const u=c.getLogoutUri(n);n.account?.homeAccountId&&this.eventHandler.emitEvent(We.LOGOUT_SUCCESS,tt.Redirect,n);const f=this.config.auth.onRedirectNavigate;if(typeof f=="function")if(f(u)!==!1){this.logger.verbose("06v57e",this.correlationId),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,es.SIGNOUT),await this.navigationClient.navigateExternal(u,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("0xqes1",this.correlationId);else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,es.SIGNOUT),await this.navigationClient.navigateExternal(u,o);return}}catch(o){throw o instanceof Vt&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),this.eventHandler.emitEvent(We.LOGOUT_FAILURE,tt.Redirect,null,o),this.eventHandler.emitEvent(We.LOGOUT_END,tt.Redirect),o}this.eventHandler.emitEvent(We.LOGOUT_END,tt.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Nt.getAbsoluteUrl(n,ns())}}async function jD(a,e,n,i){if(!a)throw n.info("1l7hyp",i),Ne(am);return ci(HD,bN,n,e,i)(a)}async function LD(a,e,n,i,o){const c=km();if(!c.contentDocument)throw"No document associated with iframe!";return(await Em(c.contentDocument,a,e,n,i,o)).submit(),c}async function zD(a,e,n,i,o){const c=km();if(!c.contentDocument)throw"No document associated with iframe!";return(await Cm(c.contentDocument,a,e,n,i,o)).submit(),c}function HD(a){const e=km();return e.src=a,e}function km(){const a=document.createElement("iframe");return a.className="msalSilentIframe",a.style.visibility="hidden",a.style.position="absolute",a.style.width=a.style.height="0",a.style.border="0",a.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),a.setAttribute("allow","local-network-access *"),document.body.appendChild(a),a}class BD extends Ol{constructor(e,n,i,o,c,u,f,m,y,S,E){super(e,n,i,o,c,u,m,S,E),this.apiId=f,this.nativeStorage=y}async acquireToken(e){!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("1kl318",this.correlationId);const n={...e};n.prompt?n.prompt!==pr.NONE&&n.prompt!==pr.NO_SESSION&&(this.logger.warning("0bmctg",this.correlationId),n.prompt=pr.NONE):n.prompt=pr.NONE;const i=await ue(Td,Cd,this.logger,this.performanceClient,this.correlationId)(n,tt.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);return i.platformBroker=eu(this.config,this.logger,this.correlationId,this.platformAuthProvider,i.authenticationScheme),SS(i.authority),this.config.system.protocolMode===mr.EAR?this.executeEarFlow(i):this.executeCodeFlow(i)}async executeCodeFlow(e){let n;const i=yr(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{return n=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await ue(this.silentTokenHelper.bind(this),u0,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(o){if(o instanceof Vt&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),!n||!(o instanceof Vt)||o.errorCode!==Fr.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),await ue(this.silentTokenHelper.bind(this),u0,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const{correlationId:n,authority:i,azureCloudOptions:o,extraQueryParameters:c,account:u}=e,f=await ue(ca,Qs,this.logger,this.performanceClient,n)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,i,o,c,u),m=await ue(dm,ym,this.logger,this.performanceClient,n)(),y=await ue(no,eo,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),S={...e,earJwk:m,codeChallenge:y.challenge};await ue(zD,qg,this.logger,this.performanceClient,n)(this.config,f,S,this.logger,this.performanceClient);const E=this.config.auth.OIDCOptions.responseMode,O=await ue(hl,rd,this.logger,this.performanceClient,n)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,e),R=ci(qc,Kc,this.logger,this.performanceClient,n)(O,E,this.logger,this.correlationId);if(!R.ear_jwe&&R.code){const B=await ue(this.createAuthCodeClient.bind(this),as,this.logger,this.performanceClient,n)({serverTelemetryManager:yr(this.apiId,this.config.auth.clientId,n,this.browserStorage,this.logger),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:f});return ue(bl,ml,this.logger,this.performanceClient,n)(S,R,y.verifier,this.apiId,this.config,B,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return ue(Tm,mm,this.logger,this.performanceClient,n)(S,R,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Ne(om))}async silentTokenHelper(e,n){const i=n.correlationId,o=await ue(no,eo,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),c={...n,codeChallenge:o.challenge};if(n.httpMethod===fl.POST)await ue(LD,qg,this.logger,this.performanceClient,i)(this.config,e.authority,c,this.logger,this.performanceClient);else{const y=await ue(Sm,Wp,this.logger,this.performanceClient,i)(this.config,e.authority,c,this.logger,this.performanceClient);await ue(jD,qg,this.logger,this.performanceClient,i)(y,this.performanceClient,this.logger,i)}const u=this.config.auth.OIDCOptions.responseMode,f=await ue(hl,rd,this.logger,this.performanceClient,i)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,n),m=ci(qc,Kc,this.logger,this.performanceClient,i)(f,u,this.logger,this.correlationId);return ue(bl,ml,this.logger,this.performanceClient,i)(n,m,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class KD extends Ol{async acquireToken(e){const n=await ue(_m,pm,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger,this.correlationId),i={...e,...n};e.redirectUri&&(i.redirectUri=id(e.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId));const o=yr(kt.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),c=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:i.authority,azureCloudOptions:i.azureCloudOptions,account:i.account});return ue(c.acquireTokenByRefreshToken.bind(c),mN,this.logger,this.performanceClient,e.correlationId)(i,kt.acquireTokenSilent_silentFlow).catch(u=>{throw u.setCorrelationId(this.correlationId),o.cacheFailedRequest(u),u})}logout(){return Promise.reject(Ne(om))}async createRefreshTokenClient(e){const n=await ue(this.getClientConfiguration.bind(this),Sd,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new $x(n,this.performanceClient)}}class qD extends tS{constructor(e,n){super(e,n),this.includeRedirectUri=!1}}class GD extends Ol{constructor(e,n,i,o,c,u,f,m,y,S){super(e,n,i,o,c,u,m,y,S),this.apiId=f}async acquireToken(e){if(!e.code)throw Ne(AI);const n=await ue(Td,Cd,this.logger,this.performanceClient,this.correlationId)(e,tt.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId),i=yr(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const o={...n,code:e.code},c=await ue(this.getClientConfiguration.bind(this),Sd,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),u=new qD(c,this.performanceClient);this.logger.verbose("1uic5e",this.correlationId);const f=new OS(u,this.browserStorage,o,this.logger,this.performanceClient);return await ue(f.handleCodeResponseFromServer.bind(f),Vw,this.logger,this.performanceClient,this.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,this.apiId,!1)}catch(o){throw o instanceof Vt&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),o}}logout(){return Promise.reject(Ne(om))}}function FD(a,e,n,i){const o=window.msal?.clientIds||[],c=o.length,u=o.filter(f=>f===a).length;u>1&&n.warning("1e88vg",i),e.add({msalInstanceCount:c,sameClientIdInstanceCount:u})}function Dh(a,e,n){try{gm(a)}catch(i){throw e.end({success:!1},i,n),i}}class Om{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ua(this.logger,this.performanceClient):Xh,this.eventHandler=new cD(this.logger),this.browserStorage=this.isBrowserEnvironment?new _p(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,Gx(this.config.auth)):rD(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:Yr.MemoryStorage,cacheRetentionDays:5};this.nativeInternalStorage=new _p(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const i=new Om(e);return await i.initialize(n),i}trackPageVisibility(e){e&&(this.logger.info("16v6hv",e),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){const n=this.getRequestCorrelationId(e);if(this.logger.trace("1f7joy",n),this.initialized){this.logger.info("061m5x",n);return}if(!this.isBrowserEnvironment){this.logger.info("19fvpi",n),this.initialized=!0,this.eventHandler.emitEvent(We.INITIALIZE_END);return}const i=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,c=this.performanceClient.startMeasurement($N,i);if(this.eventHandler.emitEvent(We.INITIALIZE_START),this.logMultipleInstances(c,i),await ue(this.browserStorage.initialize.bind(this.browserStorage),vN,this.logger,this.performanceClient,i)(i),o)try{this.platformAuthProvider=await ND(this.logger,this.performanceClient,i,this.config.system.nativeBrokerHandshakeTimeout)}catch(u){this.logger.verbose(u,i)}this.config.cache.cacheLocation===Yr.LocalStorage&&this.eventHandler.subscribeCrossTab(),!this.config.system.navigatePopups&&await this.preGeneratePkceCodes(i),this.initialized=!0,this.eventHandler.emitEvent(We.INITIALIZE_END),c.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("02l8bm",""),wS(this.initialized),this.isBrowserEnvironment){const n=e?.hash||"";let i=this.redirectResponse.get(n);return typeof i>"u"?(i=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,i),this.logger.verbose("1wn9kp","")):this.logger.verbose("0w0gm3",""),i}return this.logger.verbose("12xi63",""),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",""),null;if(this.browserStorage.getInteractionInProgress()?.type===es.SIGNOUT)return this.logger.verbose("1ywcv2",""),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const i=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),c=o&&this.platformAuthProvider&&!e?.hash;let u;this.eventHandler.emitEvent(We.HANDLE_REDIRECT_START,tt.Redirect);let f;try{if(c&&this.platformAuthProvider){const m=o?.correlationId||"";u=this.performanceClient.startMeasurement(Gg,m),this.logger.trace("12v7is",m);const y=new Hh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);f=ue(y.handleRedirectPromise.bind(y),kN,this.logger,this.performanceClient,u.event.correlationId)(this.performanceClient,u.event.correlationId)}else{const[m,y]=this.browserStorage.getCachedRequest(""),S=m.correlationId;u=this.performanceClient.startMeasurement(Gg,S),this.logger.trace("0znzs5",S);const E=this.createRedirectClient(S);f=ue(E.handleRedirectPromise.bind(E),AN,this.logger,this.performanceClient,u.event.correlationId)(m,y,u,e)}}catch(m){throw this.browserStorage.resetRequestCache(""),m}return f.then(m=>(m?(this.browserStorage.resetRequestCache(m.correlationId),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_SUCCESS,tt.Redirect,m),this.logger.verbose("0ui8f5",m.correlationId),i.length<this.getAllAccounts().length&&(this.eventHandler.emitEvent(We.LOGIN_SUCCESS,tt.Redirect,m.account),this.logger.verbose("16im3l",m.correlationId)),u.end({success:!0},void 0,m.account)):u.event.errorCode?u.end({success:!1},void 0):u.discard(),this.eventHandler.emitEvent(We.HANDLE_REDIRECT_END,tt.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache(u.event.correlationId);const y=m;throw this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Redirect,null,y),this.eventHandler.emitEvent(We.HANDLE_REDIRECT_END,tt.Redirect),u.end({success:!1},y),m})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("0os66p",n);const i=this.performanceClient.startMeasurement(GN,n);i.add({scenarioId:e.scenarioId});const o=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=c=>{const u=typeof o=="function"?o(c):void 0;return i.add({navigateCallbackResult:u!==!1}),i.event=i.end({success:!0},void 0,e.account)||i.event,u};try{l0(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,es.SIGNIN),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_START,tt.Redirect,e);let c;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?c=new Hh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,i).catch(f=>{if(f instanceof Oi&&cl(f))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(f instanceof hi)return this.logger.verbose("1ipyz4",n),this.createRedirectClient(n).acquireToken(e);throw f}):c=this.createRedirectClient(n).acquireToken(e),await c}catch(c){throw this.browserStorage.resetRequestCache(n),i.event.status===2?this.performanceClient.startMeasurement(Gg,n).end({success:!1},c,e.account):i.end({success:!1},c,e.account),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Redirect,null,c),c}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(qN,n);i.add({scenarioId:e.scenarioId});try{this.logger.verbose("0ch87b",n),Dh(this.initialized,i,e.account),this.browserStorage.setInteractionInProgress(!0,es.SIGNIN,e.overrideInteractionInProgress,n)}catch(f){return Promise.reject(f)}const o=this.getAllAccounts();this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_START,tt.Popup,e);let c;const u=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?c=this.acquireTokenNative({...e,correlationId:n},kt.acquireTokenPopup).then(f=>(i.end({success:!0,isNativeBroker:!0},void 0,f.account),f)).catch(f=>{if(f instanceof Oi&&cl(f))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,u);if(f instanceof hi)return this.logger.verbose("0yy5fw",n),this.createPopupClient(n).acquireToken(e,u);throw f}):c=this.createPopupClient(n).acquireToken(e,u),c.then(f=>{const m=o.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_SUCCESS,tt.Popup,f),m&&this.eventHandler.emitEvent(We.LOGIN_SUCCESS,tt.Popup,f.account),i.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f}).catch(f=>(this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Popup,null,f),i.end({success:!1},f,e.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.navigatePopups||await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&e.increment({visibilityChangeCount:1})}async ssoSilent(e){const n=this.getRequestCorrelationId(e),i={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(FN,n),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),Dh(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const o=this.getAllAccounts();this.logger.verbose("0w1b45",n),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_START,tt.Silent,i);let c;return this.canUsePlatformBroker(i)?c=this.acquireTokenNative(i,kt.ssoSilent).catch(u=>{if(u instanceof Oi&&cl(u))return this.platformAuthProvider=void 0,this.createSilentIframeClient(i.correlationId).acquireToken(i);throw u}):c=this.createSilentIframeClient(i.correlationId).acquireToken(i),c.then(u=>{const f=o.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_SUCCESS,tt.Silent,u),f&&this.eventHandler.emitEvent(We.LOGIN_SUCCESS,tt.Silent,u.account),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:u.fromPlatformBroker,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length},void 0,u.account),u}).catch(u=>{throw this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Silent,null,u),this.ssoSilentMeasurement?.end({success:!1},u,e.account),u}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("0ch6ga",n);const i=this.performanceClient.startMeasurement(KN,n);Dh(this.initialized,i),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_START,tt.Silent,e),i.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ne(OI);if(e.code){const o=e.code;let c=this.hybridAuthCodeResponses.get(o);return c?(this.logger.verbose("0qgp28",n),i.discard()):(this.logger.verbose("06eh73",n),c=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(u=>(this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_SUCCESS,tt.Silent,u),this.hybridAuthCodeResponses.delete(o),i.end({success:!0,isNativeBroker:u.fromPlatformBroker,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length},void 0,u.account),u)).catch(u=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Silent,null,u),i.end({success:!1},u),u}),this.hybridAuthCodeResponses.set(o,c)),await c}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:n},kt.acquireTokenByCode,e.nativeAccountId).catch(c=>{throw c instanceof Oi&&cl(c)&&(this.platformAuthProvider=void 0),c});return i.end({success:!0},void 0,o.account),o}else throw Ne(RI);else throw Ne(kI)}catch(o){throw this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Silent,null,o),i.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){const n=this.getRequestCorrelationId(e);return this.logger.trace("10d9hy",n),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(TN,n),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(n).acquireToken(e).then(c=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromPlatformBroker}),c)).catch(c=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(n){case ar.Default:case ar.AccessToken:case ar.AccessTokenAndRefreshToken:const i=this.createSilentCacheClient(e.correlationId);return ue(i.acquireToken.bind(i),dN,this.logger,this.performanceClient,e.correlationId)(e);default:throw Se(Vs)}}async acquireTokenByRefreshToken(e,n){switch(n){case ar.Default:case ar.AccessTokenAndRefreshToken:case ar.RefreshToken:case ar.RefreshTokenAndNetwork:const i=this.createSilentRefreshClient(e.correlationId);return ue(i.acquireToken.bind(i),pN,this.logger,this.performanceClient,e.correlationId)(e);default:throw Se(Vs)}}async acquireTokenBySilentIframe(e){const n=this.createSilentIframeClient(e.correlationId);return ue(n.acquireToken.bind(n),fN,this.logger,this.performanceClient,e.correlationId)(e)}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return l0(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,es.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return gm(this.initialized),this.browserStorage.setInteractionInProgress(!0,es.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment)return;const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){return iD(this.logger,this.browserStorage,this.isBrowserEnvironment,this.getRequestCorrelationId(),e)}getAccount(e){return aD(e,this.logger,this.browserStorage,this.getRequestCorrelationId())}setActiveAccount(e){sD(e,this.browserStorage,this.getRequestCorrelationId())}getActiveAccount(){return oD(this.browserStorage,this.getRequestCorrelationId())}async hydrateCache(e,n){this.logger.verbose("16jycr",e.correlationId);const i=$1(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(i,e.correlationId,Ys(e.idTokenClaims),kt.hydrateCache),e.fromPlatformBroker?(this.logger.verbose("1fxyu8",e.correlationId),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,i,o){const c=this.getRequestCorrelationId(e);if(this.logger.trace("0b9y3p",c),!this.platformAuthProvider)throw Ne(dS);return new Hh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,i||this.getNativeAccountId(e),this.nativeInternalStorage,c).acquireToken(e,o)}canUsePlatformBroker(e,n){const i=this.getRequestCorrelationId(e);if(this.logger.trace("1n9lbl",i),!this.platformAuthProvider)return this.logger.trace("0vnu11",i),!1;if(!eu(this.config,this.logger,i,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("1m4bzf",i),!1;if(e.prompt)switch(e.prompt){case pr.NONE:case pr.CONSENT:case pr.LOGIN:this.logger.trace("0vdv8e",i);break;default:return this.logger.trace("0pdzw6",i),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("16lbtk",i),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new UD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,e,this.platformAuthProvider)}createRedirectClient(e){return new PD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,e,this.platformAuthProvider)}createSilentIframeClient(e){return new BD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.ssoSilent,this.performanceClient,this.nativeInternalStorage,e,this.platformAuthProvider)}createSilentCacheClient(e){return new RS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,e,this.platformAuthProvider)}createSilentRefreshClient(e){return new KD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,e,this.platformAuthProvider)}createSilentAuthCodeClient(e){return new GD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.acquireTokenByCode,this.performanceClient,e,this.platformAuthProvider)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return _S(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Zs():""}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("0lz9hf",n),this.acquireTokenRedirect({correlationId:n,...e||t0})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("0qw7v5",n),this.acquireTokenPopup({correlationId:n,...e||t0})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(BN,n);i.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Dh(this.initialized,i,e.account),this.logger.verbose("0x1c4s",n);const o=e.account||this.getActiveAccount();if(!o)throw Ne(wI);return this.acquireTokenSilentDeduped(e,o,n).then(c=>(i.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromPlatformBroker,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),{...c,state:e.state,correlationId:n})).catch(c=>{throw c instanceof Vt&&c.setCorrelationId(n),i.end({success:!1},c,o),c})}async acquireTokenSilentDeduped(e,n,i){const o=yd(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),c=JSON.stringify(o),u=this.activeSilentTokenRequests.get(c);if(typeof u>"u"){this.logger.verbose("0fcjbk",i),this.performanceClient.addFields({deduped:!1},i);const f=ue(this.acquireTokenSilentAsync.bind(this),cN,this.logger,this.performanceClient,i)({...e,correlationId:i},n);return this.activeSilentTokenRequests.set(c,f),f.finally(()=>{this.activeSilentTokenRequests.delete(c)})}else return this.logger.verbose("1yq7nb",i),this.performanceClient.addFields({deduped:!0},i),u}async acquireTokenSilentAsync(e,n){const i=()=>this.trackPageVisibility(e.correlationId);this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_START,tt.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",i);const o=await ue(uD,yN,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),c=e.cacheLookupPolicy||ar.Default;return this.acquireTokenSilentNoIframe(o,c).catch(async f=>{if($D(f,c))if(this.activeIframeRequest)if(c!==ar.Skip){const[y,S]=this.activeIframeRequest;this.logger.verbose("1w8fso",o.correlationId);const E=this.performanceClient.startMeasurement(gN,o.correlationId);E.add({awaitIframeCorrelationId:S});const O=await y;if(E.end({success:O}),O)return this.logger.verbose("0ywzzi",o.correlationId),this.acquireTokenSilentNoIframe(o,c);throw this.logger.info("17y14q",o.correlationId),f}else return this.logger.warning("1bd4p8",o.correlationId),ue(this.acquireTokenBySilentIframe.bind(this),c0,this.logger,this.performanceClient,o.correlationId)(o);else{let y;return this.activeIframeRequest=[new Promise(S=>{y=S}),o.correlationId],this.logger.verbose("0rh08z",o.correlationId),ue(this.acquireTokenBySilentIframe.bind(this),c0,this.logger,this.performanceClient,o.correlationId)(o).then(S=>(y(!0),S)).catch(S=>{throw y(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw f}).then(f=>(this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_SUCCESS,tt.Silent,f),e.correlationId&&this.performanceClient.addFields({fromCache:f.fromCache,isNativeBroker:f.fromPlatformBroker},e.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_FAILURE,tt.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",i)})}async acquireTokenSilentNoIframe(e,n){return eu(this.config,this.logger,e.correlationId,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("0sczo4",e.correlationId),this.acquireTokenNative(e,kt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async i=>{throw i instanceof Oi&&cl(i)?(this.logger.verbose("07rkmb",e.correlationId),this.platformAuthProvider=void 0,Se(Vs)):i})):(this.logger.verbose("0ox81t",e.correlationId),n===ar.AccessToken&&this.logger.verbose("0fvwxe",e.correlationId),ue(this.acquireTokenFromCache.bind(this),oN,this.logger,this.performanceClient,e.correlationId)(e,n).catch(i=>{if(n===ar.AccessToken)throw i;return this.eventHandler.emitEvent(We.ACQUIRE_TOKEN_NETWORK_START,tt.Silent,e),ue(this.acquireTokenByRefreshToken.bind(this),lN,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("1x6uj6",e),this.pkceCode=await ue(no,eo,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,n?this.logger.verbose("12js1o",e):this.logger.verbose("1oe9ci",e),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e,n){const i=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("1qtz3l",n),window.msal.clientIds.push(i),FD(i,e,this.logger,n)}}function $D(a,e){const n=!(a instanceof hi&&a.subError!==Xp),i=a.errorCode===Fr.INVALID_GRANT_ERROR||a.errorCode===Vs,o=n&&i||a.errorCode===fp||a.errorCode===Gw,c=lI.includes(e);return o&&c}class Rm{static loggerCallback(e,n){switch(e){case rn.Error:console.error(n);return;case rn.Info:console.info(n);return;case rn.Verbose:console.debug(n);return;case rn.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=ID(e,this.browserEnvironment);let n;try{n=window[Yr.SessionStorage]}catch{}const i=n?.getItem(YN),o=n?.getItem(QN)?.toLowerCase(),c=o==="true"?!0:o==="false"?!1:void 0,u={...this.config.system.loggerOptions},f=i&&Object.keys(rn).includes(i)?rn[i]:void 0;f&&(u.loggerCallback=Rm.loggerCallback,u.logLevel=f),c!==void 0&&(u.piiLoggingEnabled=c),this.logger=new ui(u,nD,to),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class wl extends Rm{getModuleName(){return wl.MODULE_NAME}getId(){return wl.ID}async initialize(e){return this.available=typeof window<"u",this.available}}wl.MODULE_NAME="";wl.ID="StandardOperatingContext";class VD{constructor(e,n){this.controller=n||new Om(new wl(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}getAccount(e){return this.controller.getAccount(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const YD={initialize:()=>Promise.reject(Mn(ir)),acquireTokenPopup:()=>Promise.reject(Mn(ir)),acquireTokenRedirect:()=>Promise.reject(Mn(ir)),acquireTokenSilent:()=>Promise.reject(Mn(ir)),acquireTokenByCode:()=>Promise.reject(Mn(ir)),getAllAccounts:()=>[],getAccount:()=>null,handleRedirectPromise:()=>Promise.reject(Mn(ir)),loginPopup:()=>Promise.reject(Mn(ir)),loginRedirect:()=>Promise.reject(Mn(ir)),logoutRedirect:()=>Promise.reject(Mn(ir)),logoutPopup:()=>Promise.reject(Mn(ir)),ssoSilent:()=>Promise.reject(Mn(ir)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,getLogger:()=>{throw Mn(ir)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Mn(ir)},hydrateCache:()=>Promise.reject(Mn(ir)),clearCache:()=>Promise.reject(Mn(ir))};class QD{static getInteractionStatusFromEvent(e,n){switch(e.eventType){case We.ACQUIRE_TOKEN_START:if(e.interactionType===tt.Redirect||e.interactionType===tt.Popup)return gr.AcquireToken;break;case We.HANDLE_REDIRECT_START:return gr.HandleRedirect;case We.LOGOUT_START:return gr.Logout;case We.LOGOUT_END:if(n&&n!==gr.Logout)break;return gr.None;case We.HANDLE_REDIRECT_END:if(n&&n!==gr.HandleRedirect)break;return gr.None;case We.ACQUIRE_TOKEN_SUCCESS:case We.ACQUIRE_TOKEN_FAILURE:case We.RESTORE_FROM_BFCACHE:if(e.interactionType===tt.Redirect||e.interactionType===tt.Popup){if(n&&n!==gr.AcquireToken)break;return gr.None}break}return null}}const JD={instance:YD,inProgress:gr.None,accounts:[],logger:new ui({})},DS=mt.createContext(JD);DS.Consumer;function S0(a,e){if(a.length!==e.length)return!1;const n=[...e];return a.every(i=>{const o=n.shift();return!i||!o?!1:i.homeAccountId===o.homeAccountId&&i.localAccountId===o.localAccountId&&i.username===o.username})}const XD="@azure/msal-react",C0="5.0.3";const ld={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},WD=(a,e)=>{const{type:n,payload:i}=e;let o=a.inProgress;switch(n){case ld.UNBLOCK_INPROGRESS:a.inProgress===gr.Startup&&(o=gr.None,i.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'",""));break;case ld.EVENT:const u=i.message,f=QD.getInteractionStatusFromEvent(u,a.inProgress);f&&(i.logger.info(`MsalProvider - '${u.eventType}' results in setting inProgress from '${a.inProgress}' to '${f}'`,""),o=f);break;default:throw new Error(`Unknown action type: ${n}`)}if(o===gr.Startup)return a;const c=i.instance.getAllAccounts();return o!==a.inProgress&&!S0(c,a.accounts)?{...a,inProgress:o,accounts:c}:o!==a.inProgress?{...a,inProgress:o}:S0(c,a.accounts)?a:{...a,accounts:c}};function ZD({instance:a,children:e}){mt.useEffect(()=>{a.initializeWrapperLibrary(aI.React,C0)},[a]);const n=mt.useMemo(()=>a.getLogger().clone(XD,C0),[a]),[i,o]=mt.useReducer(WD,void 0,()=>({inProgress:gr.Startup,accounts:[]}));mt.useEffect(()=>{const u=a.addEventCallback(f=>{o({payload:{instance:a,logger:n,message:f},type:ld.EVENT})});return n.verbose(`MsalProvider - Registered event callback with id: '${u}'`,""),a.initialize().then(()=>{a.handleRedirectPromise().catch(()=>{}).finally(()=>{o({payload:{instance:a,logger:n},type:ld.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{u&&(n.verbose(`MsalProvider - Removing event callback '${u}'`,""),a.removeEventCallback(u))}},[a,n]);const c={instance:a,inProgress:i.inProgress,accounts:i.accounts,logger:n};return tE.createElement(DS.Provider,{value:c},e)}const eU={auth:{clientId:"YOUR_CLIENT_ID_HERE",authority:"https://login.microsoftonline.com/common",redirectUri:window.location.origin},cache:{cacheLocation:"sessionStorage"}},tU=new VD(eU);oE.createRoot(document.getElementById("root")).render(Q.jsx(mt.StrictMode,{children:Q.jsx(OO,{children:Q.jsx(ZD,{instance:tU,children:Q.jsx(kO,{})})})}));
